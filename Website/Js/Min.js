"use strict";function AppCtrl(){angular.element(document).ready(function(){alert("hello")})}function onLogin(a){a.error?console.error("Error signing in: "+a.error_description):WL.api({path:"me",method:"GET"}).then(function(){},function(a){console.error("Error calling API: "+a.error.message)})}function onGoogleApiLoad(){gapi.client.setApiKey(_googleConfig.api_key)}var Base64=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b={encode:function(b){var c,d,e,f,g,h,i,j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+a.charAt(f)+a.charAt(g)+a.charAt(h)+a.charAt(i);while(k<b.length);return j},decode:function(b){var c,d,e,f,g,h,i,j="",k=0;b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),h=a.indexOf(b.charAt(k++)),i=a.indexOf(b.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!=h&&(j+=String.fromCharCode(d)),64!=i&&(j+=String.fromCharCode(e));while(k<b.length);return j}};return b}(),MD5=function(){var a=0,b="",c=8,d=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},e=function(a,b){return a<<b|a>>>32-b},f=function(a){for(var b=[],d=(1<<c)-1,e=0;e<a.length*c;e+=c)b[e>>5]|=(a.charCodeAt(e/c)&d)<<e%32;return b},g=function(a){for(var b="",d=(1<<c)-1,e=0;e<32*a.length;e+=c)b+=String.fromCharCode(a[e>>5]>>>e%32&d);return b},h=function(b){for(var c=a?"0123456789ABCDEF":"0123456789abcdef",d="",e=0;e<4*b.length;e++)d+=c.charAt(15&b[e>>2]>>8*(e%4)+4)+c.charAt(15&b[e>>2]>>8*(e%4));return d},i=function(a){for(var c,d,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="",g=0;g<4*a.length;g+=3)for(c=(255&a[g>>2]>>8*(g%4))<<16|(255&a[g+1>>2]>>8*((g+1)%4))<<8|255&a[g+2>>2]>>8*((g+2)%4),d=0;4>d;d++)f+=8*g+6*d>32*a.length?b:e.charAt(63&c>>6*(3-d));return f},j=function(a,b,c,f,g,h){return d(e(d(d(b,a),d(f,h)),g),c)},k=function(a,b,c,d,e,f,g){return j(b&c|~b&d,a,b,e,f,g)},l=function(a,b,c,d,e,f,g){return j(b&d|c&~d,a,b,e,f,g)},m=function(a,b,c,d,e,f,g){return j(b^c^d,a,b,e,f,g)},n=function(a,b,c,d,e,f,g){return j(c^(b|~d),a,b,e,f,g)},o=function(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c,e,f,g,h=1732584193,i=-271733879,j=-1732584194,o=271733878,p=0;p<a.length;p+=16)c=h,e=i,f=j,g=o,h=k(h,i,j,o,a[p+0],7,-680876936),o=k(o,h,i,j,a[p+1],12,-389564586),j=k(j,o,h,i,a[p+2],17,606105819),i=k(i,j,o,h,a[p+3],22,-1044525330),h=k(h,i,j,o,a[p+4],7,-176418897),o=k(o,h,i,j,a[p+5],12,1200080426),j=k(j,o,h,i,a[p+6],17,-1473231341),i=k(i,j,o,h,a[p+7],22,-45705983),h=k(h,i,j,o,a[p+8],7,1770035416),o=k(o,h,i,j,a[p+9],12,-1958414417),j=k(j,o,h,i,a[p+10],17,-42063),i=k(i,j,o,h,a[p+11],22,-1990404162),h=k(h,i,j,o,a[p+12],7,1804603682),o=k(o,h,i,j,a[p+13],12,-40341101),j=k(j,o,h,i,a[p+14],17,-1502002290),i=k(i,j,o,h,a[p+15],22,1236535329),h=l(h,i,j,o,a[p+1],5,-165796510),o=l(o,h,i,j,a[p+6],9,-1069501632),j=l(j,o,h,i,a[p+11],14,643717713),i=l(i,j,o,h,a[p+0],20,-373897302),h=l(h,i,j,o,a[p+5],5,-701558691),o=l(o,h,i,j,a[p+10],9,38016083),j=l(j,o,h,i,a[p+15],14,-660478335),i=l(i,j,o,h,a[p+4],20,-405537848),h=l(h,i,j,o,a[p+9],5,568446438),o=l(o,h,i,j,a[p+14],9,-1019803690),j=l(j,o,h,i,a[p+3],14,-187363961),i=l(i,j,o,h,a[p+8],20,1163531501),h=l(h,i,j,o,a[p+13],5,-1444681467),o=l(o,h,i,j,a[p+2],9,-51403784),j=l(j,o,h,i,a[p+7],14,1735328473),i=l(i,j,o,h,a[p+12],20,-1926607734),h=m(h,i,j,o,a[p+5],4,-378558),o=m(o,h,i,j,a[p+8],11,-2022574463),j=m(j,o,h,i,a[p+11],16,1839030562),i=m(i,j,o,h,a[p+14],23,-35309556),h=m(h,i,j,o,a[p+1],4,-1530992060),o=m(o,h,i,j,a[p+4],11,1272893353),j=m(j,o,h,i,a[p+7],16,-155497632),i=m(i,j,o,h,a[p+10],23,-1094730640),h=m(h,i,j,o,a[p+13],4,681279174),o=m(o,h,i,j,a[p+0],11,-358537222),j=m(j,o,h,i,a[p+3],16,-722521979),i=m(i,j,o,h,a[p+6],23,76029189),h=m(h,i,j,o,a[p+9],4,-640364487),o=m(o,h,i,j,a[p+12],11,-421815835),j=m(j,o,h,i,a[p+15],16,530742520),i=m(i,j,o,h,a[p+2],23,-995338651),h=n(h,i,j,o,a[p+0],6,-198630844),o=n(o,h,i,j,a[p+7],10,1126891415),j=n(j,o,h,i,a[p+14],15,-1416354905),i=n(i,j,o,h,a[p+5],21,-57434055),h=n(h,i,j,o,a[p+12],6,1700485571),o=n(o,h,i,j,a[p+3],10,-1894986606),j=n(j,o,h,i,a[p+10],15,-1051523),i=n(i,j,o,h,a[p+1],21,-2054922799),h=n(h,i,j,o,a[p+8],6,1873313359),o=n(o,h,i,j,a[p+15],10,-30611744),j=n(j,o,h,i,a[p+6],15,-1560198380),i=n(i,j,o,h,a[p+13],21,1309151649),h=n(h,i,j,o,a[p+4],6,-145523070),o=n(o,h,i,j,a[p+11],10,-1120210379),j=n(j,o,h,i,a[p+2],15,718787259),i=n(i,j,o,h,a[p+9],21,-343485551),h=d(h,c),i=d(i,e),j=d(j,f),o=d(o,g);return[h,i,j,o]},p=function(a,b){var d=f(a);d.length>16&&(d=o(d,a.length*c));for(var e=new Array(16),g=new Array(16),h=0;16>h;h++)e[h]=909522486^d[h],g[h]=1549556828^d[h];var i=o(e.concat(f(b)),512+b.length*c);return o(g.concat(i),640)},q={hexdigest:function(a){return h(o(f(a),a.length*c))},b64digest:function(a){return i(o(f(a),a.length*c))},hash:function(a){return g(o(f(a),a.length*c))},hmac_hexdigest:function(a,b){return h(p(a,b))},hmac_b64digest:function(a,b){return i(p(a,b))},hmac_hash:function(a,b){return g(p(a,b))},test:function(){return"900150983cd24fb0d6963f7d28e17f72"===MD5.hexdigest("abc")}};return q}();Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice,d=Array.prototype.concat,e=c.call(arguments,1);return function(){return b.apply(a?a:this,d.call(e,c.call(arguments,0)))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),function(a){function b(a,b){return new f.Builder(a,b)}function c(a){return new f.Builder("message",a)}function d(a){return new f.Builder("iq",a)}function e(a){return new f.Builder("presence",a)}var f;f={VERSION:"8d27954",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas"},addNamespace:function(a,b){f.NS[a]=b},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,forEachChild:function(a,b,c){var d,e;for(d=0;d<a.childNodes.length;d++)e=a.childNodes[d],e.nodeType!=f.ElementType.NORMAL||b&&!this.isTagEqual(e,b)||c(e)},isTagEqual:function(a,b){return a.tagName.toLowerCase()==b.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var a;return void 0===document.implementation.createDocument?(a=this._getIEXmlDom(),a.appendChild(a.createElement("strophe"))):a=document.implementation.createDocument("jabber:client","strophe",null),a},xmlGenerator:function(){return f._xmlGenerator||(f._xmlGenerator=f._makeGenerator()),f._xmlGenerator},_getIEXmlDom:function(){for(var a=null,b=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],c=0;c<b.length&&null===a;c++)try{a=new ActiveXObject(b[c])}catch(d){a=null}return a},xmlElement:function(a){if(!a)return null;var b,c,d,e=f.xmlGenerator().createElement(a);for(b=1;b<arguments.length;b++)if(arguments[b])if("string"==typeof arguments[b]||"number"==typeof arguments[b])e.appendChild(f.xmlTextNode(arguments[b]));else if("object"==typeof arguments[b]&&"function"==typeof arguments[b].sort)for(c=0;c<arguments[b].length;c++)"object"==typeof arguments[b][c]&&"function"==typeof arguments[b][c].sort&&e.setAttribute(arguments[b][c][0],arguments[b][c][1]);else if("object"==typeof arguments[b])for(d in arguments[b])arguments[b].hasOwnProperty(d)&&e.setAttribute(d,arguments[b][d]);return e},xmlescape:function(a){return a=a.replace(/\&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/'/g,"&apos;"),a=a.replace(/"/g,"&quot;")},xmlTextNode:function(a){return a=f.xmlescape(a),f.xmlGenerator().createTextNode(a)},getText:function(a){if(!a)return null;var b="";0===a.childNodes.length&&a.nodeType==f.ElementType.TEXT&&(b+=a.nodeValue);for(var c=0;c<a.childNodes.length;c++)a.childNodes[c].nodeType==f.ElementType.TEXT&&(b+=a.childNodes[c].nodeValue);return b},copyElement:function(a){var b,c;if(a.nodeType==f.ElementType.NORMAL){for(c=f.xmlElement(a.tagName),b=0;b<a.attributes.length;b++)c.setAttribute(a.attributes[b].nodeName.toLowerCase(),a.attributes[b].value);for(b=0;b<a.childNodes.length;b++)c.appendChild(f.copyElement(a.childNodes[b]))}else a.nodeType==f.ElementType.TEXT&&(c=f.xmlGenerator().createTextNode(a.nodeValue));return c},escapeNode:function(a){return a.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(a){return a.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(a){return a.indexOf("@")<0?null:a.split("@")[0]},getDomainFromJid:function(a){var b=f.getBareJidFromJid(a);if(b.indexOf("@")<0)return b;var c=b.split("@");return c.splice(0,1),c.join("@")},getResourceFromJid:function(a){var b=a.split("/");return b.length<2?null:(b.splice(0,1),b.join("/"))},getBareJidFromJid:function(a){return a?a.split("/")[0]:null},log:function(){},debug:function(a){this.log(this.LogLevel.DEBUG,a)},info:function(a){this.log(this.LogLevel.INFO,a)},warn:function(a){this.log(this.LogLevel.WARN,a)},error:function(a){this.log(this.LogLevel.ERROR,a)},fatal:function(a){this.log(this.LogLevel.FATAL,a)},serialize:function(a){var b;if(!a)return null;"function"==typeof a.tree&&(a=a.tree());var c,d,e=a.nodeName;for(a.getAttribute("_realname")&&(e=a.getAttribute("_realname")),b="<"+e,c=0;c<a.attributes.length;c++)"_realname"!=a.attributes[c].nodeName&&(b+=" "+a.attributes[c].nodeName.toLowerCase()+"='"+a.attributes[c].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/</g,"&lt;")+"'");if(a.childNodes.length>0){for(b+=">",c=0;c<a.childNodes.length;c++)switch(d=a.childNodes[c],d.nodeType){case f.ElementType.NORMAL:b+=f.serialize(d);break;case f.ElementType.TEXT:b+=d.nodeValue;break;case f.ElementType.CDATA:b+="<![CDATA["+d.nodeValue+"]]>"}b+="</"+e+">"}else b+="/>";return b},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(a,b){f._connectionPlugins[a]=b}},f.Builder=function(a,b){("presence"==a||"message"==a||"iq"==a)&&(b&&!b.xmlns?b.xmlns=f.NS.CLIENT:b||(b={xmlns:f.NS.CLIENT})),this.nodeTree=f.xmlElement(a,b),this.node=this.nodeTree},f.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return f.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(a){for(var b in a)a.hasOwnProperty(b)&&this.node.setAttribute(b,a[b]);return this},c:function(a,b,c){var d=f.xmlElement(a,b,c);return this.node.appendChild(d),c||(this.node=d),this},cnode:function(a){var b=f.xmlGenerator();try{var c=void 0!==b.importNode}catch(d){var c=!1}var e=c?b.importNode(a,!0):f.copyElement(a);return this.node.appendChild(e),this.node=e,this},t:function(a){var b=f.xmlTextNode(a);return this.node.appendChild(b),this}},f.Handler=function(a,b,c,d,e,g,h){this.handler=a,this.ns=b,this.name=c,this.type=d,this.id=e,this.options=h||{matchbare:!1},this.options.matchBare||(this.options.matchBare=!1),this.from=this.options.matchBare?g?f.getBareJidFromJid(g):null:g,this.user=!0},f.Handler.prototype={isMatch:function(a){var b,c=null;if(c=this.options.matchBare?f.getBareJidFromJid(a.getAttribute("from")):a.getAttribute("from"),b=!1,this.ns){var d=this;f.forEachChild(a,null,function(a){a.getAttribute("xmlns")==d.ns&&(b=!0)}),b=b||a.getAttribute("xmlns")==this.ns}else b=!0;return!b||this.name&&!f.isTagEqual(a,this.name)||this.type&&a.getAttribute("type")!=this.type||this.id&&a.getAttribute("id")!=this.id||this.from&&c!=this.from?!1:!0},run:function(a){var b=null;try{b=this.handler(a)}catch(c){throw c.sourceURL?f.fatal("error: "+this.handler+" "+c.sourceURL+":"+c.line+" - "+c.name+": "+c.message):c.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",c,c.message)),f.fatal("error: "+this.handler+" "+c.fileName+":"+c.lineNumber+" - "+c.name+": "+c.message)):f.fatal("error: "+this.handler),c}return b},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},f.TimedHandler=function(a,b){this.period=a,this.handler=b,this.lastCalled=(new Date).getTime(),this.user=!0},f.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},f.Request=function(a,b,c,d){this.id=++f._requestId,this.xmlData=a,this.data=f.serialize(a),this.origFunc=b,this.func=b,this.rid=c,this.date=0/0,this.sends=d||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var a=new Date;return(a-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var a=new Date;return(a-this.dead)/1e3},this.xhr=this._newXHR()},f.Request.prototype={getResponse:function(){var a=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(a=this.xhr.responseXML.documentElement,"parsererror"==a.tagName)throw f.error("invalid response received"),f.error("responseText: "+this.xhr.responseText),f.error("responseXML: "+f.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(f.error("invalid response received"),f.error("responseText: "+this.xhr.responseText),f.error("responseXML: "+f.serialize(this.xhr.responseXML)));return a},_newXHR:function(){var a=null;return window.XMLHttpRequest?(a=new XMLHttpRequest,a.overrideMimeType&&a.overrideMimeType("text/xml")):window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a.onreadystatechange=this.func.bind(null,this),a}},f.Connection=function(a){this.service=a,this.jid="",this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.features=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this.hold=1,this.wait=60,this.window=5,this._data=[],this._requests=[],this._uniqueId=Math.round(1e4*Math.random()),this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var b in f._connectionPlugins)if(f._connectionPlugins.hasOwnProperty(b)){var c=f._connectionPlugins[b],d=function(){};d.prototype=c,this[b]=new d,this[b].init(this)}},f.Connection.prototype={reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=Math.round(1e4*Math.random())},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(a){return"string"==typeof a||"number"==typeof a?++this._uniqueId+":"+a:++this._uniqueId+""},connect:function(a,b,c,d,e){this.jid=a,this.pass=b,this.connect_callback=c,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.wait=d||this.wait,this.hold=e||this.hold,this.domain=f.getDomainFromJid(this.jid);var g=this._buildBody().attrs({to:this.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":f.NS.BOSH});this._changeConnectStatus(f.Status.CONNECTING,null),this._requests.push(new f.Request(g.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),g.tree().getAttribute("rid"))),this._throttledRequestHandler()},attach:function(a,b,c,d,e,g,h){this.jid=a,this.sid=b,this.rid=c,this.connect_callback=d,this.domain=f.getDomainFromJid(this.jid),this.authenticated=!0,this.connected=!0,this.wait=e||this.wait,this.hold=g||this.hold,this.window=h||this.window,this._changeConnectStatus(f.Status.ATTACHED,null)},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},send:function(a){if(null!==a){if("function"==typeof a.sort)for(var b=0;b<a.length;b++)this._queueData(a[b]);else"function"==typeof a.tree?this._queueData(a.tree()):this._queueData(a);this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(a,b,c,d){var e=null,f=this;"function"==typeof a.tree&&(a=a.tree());var g=a.getAttribute("id");g||(g=this.getUniqueId("sendIQ"),a.setAttribute("id",g));var h=this.addHandler(function(a){e&&f.deleteTimedHandler(e);var d=a.getAttribute("type");if("result"==d)b&&b(a);else{if("error"!=d)throw{name:"StropheError",message:"Got bad IQ type of "+d};c&&c(a)}},null,"iq",null,g);return d&&(e=this.addTimedHandler(d,function(){return f.deleteHandler(h),c&&c(null),!1})),this.send(a),g},_queueData:function(a){if(null===a||!a.tagName||!a.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(a)},_sendRestart:function(){this._data.push("restart"),this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(a,b){var c=new f.TimedHandler(a,b);return this.addTimeds.push(c),c},deleteTimedHandler:function(a){this.removeTimeds.push(a)},addHandler:function(a,b,c,d,e,g,h){var i=new f.Handler(a,b,c,d,e,g,h);return this.addHandlers.push(i),i},deleteHandler:function(a){this.removeHandlers.push(a)},disconnect:function(a){this._changeConnectStatus(f.Status.DISCONNECTING,a),f.info("Disconnect was called because: "+a),this.connected&&(this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._sendTerminate())},_changeConnectStatus:function(a,b){for(var c in f._connectionPlugins)if(f._connectionPlugins.hasOwnProperty(c)){var d=this[c];if(d.statusChanged)try{d.statusChanged(a,b)}catch(e){f.error(""+c+" plugin caused an exception "+"changing status: "+e)}}if(this.connect_callback)try{this.connect_callback(a,b)}catch(g){f.error("User connection callback caused an exception: "+g)}},_buildBody:function(){var a=b("body",{rid:this.rid++,xmlns:f.NS.HTTPBIND});return null!==this.sid&&a.attrs({sid:this.sid}),a},_removeRequest:function(a){f.debug("removing request");var b;for(b=this._requests.length-1;b>=0;b--)a==this._requests[b]&&this._requests.splice(b,1);a.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(a){var b=this._requests[a];null===b.dead&&(b.dead=new Date),this._processRequest(a)},_processRequest:function(a){var b=this._requests[a],c=-1;try{4==b.xhr.readyState&&(c=b.xhr.status)}catch(d){f.error("caught an error in _requests["+a+"], reqStatus: "+c)}if("undefined"==typeof c&&(c=-1),b.sends>5)return this._onDisconnectTimeout(),void 0;var e=b.age(),g=!isNaN(e)&&e>Math.floor(f.TIMEOUT*this.wait),h=null!==b.dead&&b.timeDead()>Math.floor(f.SECONDARY_TIMEOUT*this.wait),i=4==b.xhr.readyState&&(1>c||c>=500);if((g||h||i)&&(h&&f.error("Request "+this._requests[a].id+" timed out (secondary), restarting"),b.abort=!0,b.xhr.abort(),b.xhr.onreadystatechange=function(){},this._requests[a]=new f.Request(b.xmlData,b.origFunc,b.rid,b.sends),b=this._requests[a]),0===b.xhr.readyState){f.debug("request id "+b.id+"."+b.sends+" posting");try{var j=!("sync"in this&&this.sync===!0);b.xhr.open("POST",this.service,j)}catch(k){return f.error("XHR open failed."),this.connected||this._changeConnectStatus(f.Status.CONNFAIL,"bad-service"),this.disconnect(),void 0}var l=function(){b.date=new Date,b.xhr.send(b.data)};if(b.sends>1){var m=1e3*Math.min(Math.floor(f.TIMEOUT*this.wait),Math.pow(b.sends,3));setTimeout(l,m)}else l();b.sends++,this.xmlOutput!==f.Connection.prototype.xmlOutput&&this.xmlOutput(b.xmlData),this.rawOutput!==f.Connection.prototype.rawOutput&&this.rawOutput(b.data)}else f.debug("_processRequest: "+(0===a?"first":"second")+" request has readyState of "+b.xhr.readyState)},_throttledRequestHandler:function(){this._requests?f.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):f.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))},_onRequestStateChange:function(a,b){if(f.debug("request id "+b.id+"."+b.sends+" state changed to "+b.xhr.readyState),b.abort)return b.abort=!1,void 0;var c;if(4==b.xhr.readyState){c=0;try{c=b.xhr.status}catch(d){}if("undefined"==typeof c&&(c=0),this.disconnecting&&c>=400)return this._hitError(c),void 0;var e=this._requests[0]==b,g=this._requests[1]==b;(c>0&&500>c||b.sends>5)&&(this._removeRequest(b),f.debug("request id "+b.id+" should now be removed")),200==c?((g||e&&this._requests.length>0&&this._requests[0].age()>Math.floor(f.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),f.debug("request id "+b.id+"."+b.sends+" got 200"),a(b),this.errors=0):(f.error("request id "+b.id+"."+b.sends+" error "+c+" happened"),(0===c||c>=400&&600>c||c>=12e3)&&(this._hitError(c),c>=400&&500>c&&(this._changeConnectStatus(f.Status.DISCONNECTING,null),this._doDisconnect()))),c>0&&500>c||b.sends>5||this._throttledRequestHandler()}},_hitError:function(a){this.errors++,f.warn("request errored, status: "+a+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_doDisconnect:function(){f.info("_doDisconnect was called"),this.authenticated=!1,this.disconnecting=!1,this.sid=null,this.streamId=null,this.rid=Math.floor(4294967295*Math.random()),this.connected&&(this._changeConnectStatus(f.Status.DISCONNECTED,null),this.connected=!1),this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[]},_dataRecv:function(a){try{var b=a.getResponse()}catch(c){if("parsererror"!=c)throw c;this.disconnect("strophe-parsererror")}if(null!==b){this.xmlInput!==f.Connection.prototype.xmlInput&&this.xmlInput(b),this.rawInput!==f.Connection.prototype.rawInput&&this.rawInput(f.serialize(b));for(var d,e;this.removeHandlers.length>0;)e=this.removeHandlers.pop(),d=this.handlers.indexOf(e),d>=0&&this.handlers.splice(d,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&0===this._requests.length)return this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null,this._doDisconnect(),void 0;var g,h,i=b.getAttribute("type");if(null!==i&&"terminate"==i){if(this.disconnecting)return;return g=b.getAttribute("condition"),h=b.getElementsByTagName("conflict"),null!==g?("remote-stream-error"==g&&h.length>0&&(g="conflict"),this._changeConnectStatus(f.Status.CONNFAIL,g)):this._changeConnectStatus(f.Status.CONNFAIL,"unknown"),this.disconnect(),void 0}var j=this;f.forEachChild(b,null,function(a){var b,c;for(c=j.handlers,j.handlers=[],b=0;b<c.length;b++){var d=c[b];try{!d.isMatch(a)||!j.authenticated&&d.user?j.handlers.push(d):d.run(a)&&j.handlers.push(d)}catch(e){}}})}},_sendTerminate:function(){f.info("_sendTerminate was called");var a=this._buildBody().attrs({type:"terminate"});this.authenticated&&a.c("presence",{xmlns:f.NS.CLIENT,type:"unavailable"}),this.disconnecting=!0;var b=new f.Request(a.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),a.tree().getAttribute("rid"));this._requests.push(b),this._throttledRequestHandler()},_connect_cb:function(a){f.info("_connect_cb was called"),this.connected=!0;var c=a.getResponse();if(c){this.xmlInput!==f.Connection.prototype.xmlInput&&this.xmlInput(c),this.rawInput!==f.Connection.prototype.rawInput&&this.rawInput(f.serialize(c));var e,g,h=c.getAttribute("type");if(null!==h&&"terminate"==h)return e=c.getAttribute("condition"),g=c.getElementsByTagName("conflict"),null!==e?("remote-stream-error"==e&&g.length>0&&(e="conflict"),this._changeConnectStatus(f.Status.CONNFAIL,e)):this._changeConnectStatus(f.Status.CONNFAIL,"unknown"),void 0;this.sid||(this.sid=c.getAttribute("sid")),this.stream_id||(this.stream_id=c.getAttribute("authid"));var i=c.getAttribute("requests");i&&(this.window=parseInt(i,10));var j=c.getAttribute("hold");j&&(this.hold=parseInt(j,10));var k=c.getAttribute("wait");k&&(this.wait=parseInt(k,10));var l,m,n,o,p=!1,q=!1,r=!1,s=c.getElementsByTagName("mechanism");if(!(s.length>0)){var t=this._buildBody();return this._requests.push(new f.Request(t.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),t.tree().getAttribute("rid"))),this._throttledRequestHandler(),void 0}for(l=0;l<s.length;l++)m=f.getText(s[l]),"DIGEST-MD5"==m?q=!0:"PLAIN"==m?p=!0:"ANONYMOUS"==m&&(r=!0);null===f.getNodeFromJid(this.jid)&&r?(this._changeConnectStatus(f.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(b("auth",{xmlns:f.NS.SASL,mechanism:"ANONYMOUS"}).tree())):null===f.getNodeFromJid(this.jid)?(this._changeConnectStatus(f.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect()):q?(this._changeConnectStatus(f.Status.AUTHENTICATING,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge1_cb.bind(this),null,"challenge",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(b("auth",{xmlns:f.NS.SASL,mechanism:"DIGEST-MD5"}).tree())):p?(n=unescape(encodeURIComponent(f.getBareJidFromJid(this.jid))),n+="\x00",n+=unescape(encodeURIComponent(f.getNodeFromJid(this.jid))),n+="\x00",n+=this.pass,this._changeConnectStatus(f.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),o=Base64.encode(n),this.send(b("auth",{xmlns:f.NS.SASL,mechanism:"PLAIN"}).t(o).tree())):(this._changeConnectStatus(f.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(d({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:f.NS.AUTH}).c("username",{}).t(f.getNodeFromJid(this.jid)).tree()))}},_sasl_challenge1_cb:function(a){var c,d=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,e=Base64.decode(f.getText(a)),g=MD5.hexdigest(""+1234567890*Math.random()),h="",i=null,j="",k="";for(this.deleteHandler(this._sasl_failure_handler);e.match(d);)switch(c=e.match(d),e=e.replace(c[0],""),c[2]=c[2].replace(/^"(.+)"$/,"$1"),c[1]){case"realm":h=c[2];break;case"nonce":j=c[2];break;case"qop":k=c[2];break;case"host":i=c[2]}var l="xmpp/"+this.domain;null!==i&&(l=l+"/"+i);var m=MD5.hash(unescape(encodeURIComponent(f.getNodeFromJid(this.jid)))+":"+h+":"+this.pass)+":"+j+":"+g,n="AUTHENTICATE:"+l,o="";return o+="username="+this._quote(unescape(encodeURIComponent(f.getNodeFromJid(this.jid))))+",",o+="realm="+this._quote(h)+",",o+="nonce="+this._quote(j)+",",o+="cnonce="+this._quote(g)+",",o+='nc="00000001",',o+='qop="auth",',o+="digest-uri="+this._quote(l)+",",o+="response="+this._quote(MD5.hexdigest(MD5.hexdigest(m)+":"+j+":00000001:"+g+":auth:"+MD5.hexdigest(n)))+",",o+='charset="utf-8"',this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge2_cb.bind(this),null,"challenge",null,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(b("response",{xmlns:f.NS.SASL}).t(Base64.encode(o)).tree()),!1},_quote:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},_sasl_challenge2_cb:function(){return this.deleteHandler(this._sasl_success_handler),this.deleteHandler(this._sasl_failure_handler),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(b("response",{xmlns:f.NS.SASL}).tree()),!1},_auth1_cb:function(){var a=d({type:"set",id:"_auth_2"}).c("query",{xmlns:f.NS.AUTH}).c("username",{}).t(f.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return f.getResourceFromJid(this.jid)||(this.jid=f.getBareJidFromJid(this.jid)+"/strophe"),a.up().c("resource",{}).t(f.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(a.tree()),!1},_sasl_success_cb:function(){return f.info("SASL authentication succeeded."),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(a){this.features=a;var b,c;for(b=0;b<a.childNodes.length;b++)c=a.childNodes[b],"bind"==c.nodeName&&(this.do_bind=!0),"session"==c.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(f.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var e=f.getResourceFromJid(this.jid);return e?this.send(d({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:f.NS.BIND}).c("resource",{}).t(e).tree()):this.send(d({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:f.NS.BIND}).tree()),!1},_sasl_bind_cb:function(a){if("error"==a.getAttribute("type"))return f.info("SASL binding failed."),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1;var b,c=a.getElementsByTagName("bind");return c.length>0?(b=c[0].getElementsByTagName("jid"),b.length>0&&(this.jid=f.getText(b[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(d({type:"set",id:"_session_auth_2"}).c("session",{xmlns:f.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(f.Status.CONNECTED,null))),void 0):(f.info("SASL binding failed."),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(a){if("result"==a.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(f.Status.CONNECTED,null);else if("error"==a.getAttribute("type"))return f.info("Session creation failed."),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1},_auth2_cb:function(a){return"result"==a.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(f.Status.CONNECTED,null)):"error"==a.getAttribute("type")&&(this._changeConnectStatus(f.Status.AUTHFAIL,null),this.disconnect()),!1
},_addSysTimedHandler:function(a,b){var c=new f.TimedHandler(a,b);return c.user=!1,this.addTimeds.push(c),c},_addSysHandler:function(a,b,c,d,e){var g=new f.Handler(a,b,c,d,e);return g.user=!1,this.addHandlers.push(g),g},_onDisconnectTimeout:function(){f.info("_onDisconnectTimeout was called");for(var a;this._requests.length>0;)a=this._requests.pop(),a.abort=!0,a.xhr.abort(),a.xhr.onreadystatechange=function(){};return this._doDisconnect(),!1},_onIdle:function(){for(var a,b,c,d;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)b=this.removeTimeds.pop(),a=this.timedHandlers.indexOf(b),a>=0&&this.timedHandlers.splice(a,1);var e=(new Date).getTime();for(d=[],a=0;a<this.timedHandlers.length;a++)b=this.timedHandlers[a],(this.authenticated||!b.user)&&(c=b.lastCalled+b.period,0>=c-e?b.run()&&d.push(b):d.push(b));this.timedHandlers=d;var g,h;if(this.authenticated&&0===this._requests.length&&0===this._data.length&&!this.disconnecting&&(f.info("no requests during idle cycle, sending blank request"),this._data.push(null)),this._requests.length<2&&this._data.length>0&&!this.paused){for(g=this._buildBody(),a=0;a<this._data.length;a++)null!==this._data[a]&&("restart"===this._data[a]?g.attrs({to:this.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":f.NS.BOSH}):g.cnode(this._data[a]).up());delete this._data,this._data=[],this._requests.push(new f.Request(g.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),g.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}this._requests.length>0&&(h=this._requests[0].age(),null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(f.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),h>Math.floor(f.TIMEOUT*this.wait)&&(f.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(f.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())),clearTimeout(this._idleTimeout),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},a&&a(f,b,c,d,e)}(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]}),Strophe.addConnectionPlugin("muc",{_connection:null,init:function(a){this._connection=a,Strophe.addNamespace("MUC_OWNER",Strophe.NS.MUC+"#owner"),Strophe.addNamespace("MUC_ADMIN",Strophe.NS.MUC+"#admin")},join:function(a,b,c,d,e){var f=this.test_append_nick(a,b),g=$pres({from:this._connection.jid,to:f}).c("x",{xmlns:Strophe.NS.MUC});if(e){var h=Strophe.xmlElement("password",[],e);g.cnode(h)}c&&this._connection.addHandler(function(b){var d=b.getAttribute("from"),e=d.split("/");return e[0]==a?c(b):!0},null,"message",null,null,null),d&&this._connection.addHandler(function(a){var b=a.getElementsByTagName("x");if(b.length>0)for(var c=0;c<b.length;c++){var e=b[c].getAttribute("xmlns");if(e&&e.match(Strophe.NS.MUC))return d(a)}return!0},null,"presence",null,null,null),this._connection.send(g)},leave:function(a,b,c){var d=this.test_append_nick(a,b),e=this._connection.getUniqueId(),f=$pres({type:"unavailable",id:e,from:this._connection.jid,to:d}).c("x",{xmlns:Strophe.NS.MUC});return this._connection.addHandler(c,null,"presence",null,e,null),this._connection.send(f),e},message:function(a,b,c,d){var e=this.test_append_nick(a,b);d=d||"groupchat";var f=this._connection.getUniqueId(),g=$msg({to:e,from:this._connection.jid,type:d,id:f}).c("body",{xmlns:Strophe.NS.CLIENT}).t(c);return g.up().c("x",{xmlns:"jabber:x:event"}).c("composing"),this._connection.send(g),f},configure:function(a){var b=$iq({to:a,type:"get"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}),c=b.tree();return this._connection.sendIQ(c,function(){},function(){})},cancelConfigure:function(a){var b=$iq({to:a,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}),c=b.tree();return this._connection.sendIQ(c,function(){},function(){})},saveConfiguration:function(a,b){for(var c=$iq({to:a,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),d=0;d<b.length;d++)c.cnode(b[d]),c.up();var e=c.tree();return this._connection.sendIQ(e,function(){},function(){})},createInstantRoom:function(a){var b=$iq({to:a,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"});return this._connection.sendIQ(b.tree(),function(){},function(){})},setTopic:function(a,b){var c=$msg({to:a,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(b);this._connection.send(c.tree())},modifyUser:function(a,b,c,d,e){var f={nick:Strophe.escapeNode(b)};null!==c&&(f.role=c),null!==d&&(f.affiliation=d);var g=$build("item",f);null!==e&&g.cnode(Strophe.xmlElement("reason",e));var h=$iq({to:a,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).cnode(g.tree());return this._connection.sendIQ(h.tree(),function(){},function(){})},changeNick:function(a,b){var c=this.test_append_nick(a,b),d=$pres({from:this._connection.jid,to:c}).c("x",{xmlns:Strophe.NS.MUC});this._connection.send(d.tree())},listRooms:function(a,b){var c=$iq({to:a,from:this._connection.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS});this._connection.sendIQ(c,b,function(){})},test_append_nick:function(a,b){var c=a;return b&&(c+="/"+Strophe.escapeNode(b)),c}});var Mustache=function(){var a=function(){};return a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){if(d||(this.context=b,this.buffer=[]),!this.includes("",a))return d?a:(this.send(a),void 0);a=this.render_pragmas(a);var e=this.render_section(a,b,c);return d?this.render_tags(e,b,c,d):(this.render_tags(e,b,c,d),void 0)},send:function(a){""!==a&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g");return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};if(b.pragmas[c]={},d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,c){if(a=this.trim(a),!c||void 0===c[a])throw{message:"unknown_partial '"+a+"'"};return"object"!=typeof b[a]?this.render(c[a],b,c,!0):this.render(c[a],b[a],c,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this,e=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return a.replace(e,function(a,e,f,g){var h=d.find(f,b);return"^"==e?!h||d.is_array(h)&&0===h.length?d.render(g,b,c,!0):"":"#"==e?d.is_array(h)?d.map(h,function(a){return d.render(g,d.create_context(a),c,!0)}).join(""):d.is_object(h)?d.render(g,d.create_context(h),c,!0):"function"==typeof h?h.call(b,g,function(a){return d.render(a,b,c,!0)}):h?d.render(g,b,c,!0):"":void 0})},render_tags:function(a,b,c,d){for(var e=this,f=function(){return new RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},g=f(),h=function(a,d,h){switch(d){case"!":return"";case"=":return e.set_delimiters(h),g=f(),"";case">":return e.render_partial(h,b,c);case"{":return e.find(h,b);default:return e.escape(e.find(h,b))}},i=a.split("\n"),j=0;j<i.length;j++)i[j]=i[j].replace(g,h,this),d||this.send(i[j]);return d?i.join("\n"):void 0},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]),this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function c(a){return a===!1||0===a||a}a=this.trim(a);var d;return c(b[a])?d=b[a]:c(this.context[a])&&(d=this.context[a]),"function"==typeof d?d.apply(b):void 0!==d?d:""},includes:function(a,b){return-1!=b.indexOf(this.otag+a)},escape:function(a){return a=String(null===a?"":a),a.replace(/&(?!\w+;)|["'<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return a}})},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&"object"==typeof a},is_array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=a.length,e=0;d>e;e++)c.push(b(a[e]));return c}},{name:"mustache.js",version:"0.3.1-dev",to_html:function(b,c,d,e){var f=new a;return e&&(f.send=e),f.render(b,c,d),e?void 0:f.buffer.join("\n")}}}();!function(a){a.i18n={dict:null,setDictionary:function(a){this.dict=a},_:function(a,b){var c=a;return this.dict&&this.dict[a]&&(c=this.dict[a]),this.printf(c,b)},toEntity:function(a){for(var b="",c=0;c<a.length;c++)b+=a.charCodeAt(c)>128?"&#"+a.charCodeAt(c)+";":a.charAt(c);return b},stripStr:function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},stripStrML:function(a){for(var b=a.split("\n"),c=0;c<b.length;c++)b[c]=stripStr(b[c]);return stripStr(b.join(" "))},printf:function(a,b){if(!b)return a;for(var c="",d=/%(\d+)\$s/g;result=d.exec(a);){var e=parseInt(result[1],10)-1;a=a.replace("%"+result[1]+"$s",b[e]),b.splice(e,1)}var f=a.split("%s");if(f.length>1)for(var g=0;g<b.length;g++)f[g].lastIndexOf("%")==f[g].length-1&&g!=b.length-1&&(f[g]+="s"+f.splice(g+1,1)[0]),c+=f[g]+b[g];return c+f[f.length-1]}},a.fn._t=function(b,c){return a(this).text(a.i18n._(b,c))}}(jQuery);var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(e,f,g){var h=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(f=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]),"UTC:"==f.slice(0,4)&&(f=f.slice(4),g=!0);var i=g?"getUTC":"get",j=e[i+"Date"](),k=e[i+"Day"](),l=e[i+"Month"](),m=e[i+"FullYear"](),n=e[i+"Hours"](),o=e[i+"Minutes"](),p=e[i+"Seconds"](),q=e[i+"Milliseconds"](),r=g?0:e.getTimezoneOffset(),s={d:j,dd:d(j),ddd:h.i18n.dayNames[k],dddd:h.i18n.dayNames[k+7],m:l+1,mm:d(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),M:o,MM:d(o),s:p,ss:d(p),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:12>n?"a":"p",tt:12>n?"am":"pm",T:12>n?"A":"P",TT:12>n?"AM":"PM",Z:g?"UTC":(String(e).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+d(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(10!=j%100-j%10)*j%10]};return f.replace(a,function(a){return a in s?s[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(a,b){return dateFormat(this,a,b)};var Candy=function(a,b){return a.about={name:"Candy",version:"1.0.9"},a.init=function(c,d){a.View.init(b("#candy"),d.view),a.Core.init(c,d.core)},a}(Candy||{},jQuery);Candy.Core=function(a,b,c){var d=null,e=null,f=null,g={},h=!1,i={autojoin:!0,debug:!1},j=function(a,c){b.addNamespace(a,c)},k=function(){j("PRIVATE","jabber:iq:private"),j("BOOKMARKS","storage:bookmarks"),j("PRIVACY","jabber:iq:privacy"),j("DELAY","jabber:x:delay")},l=function(){a.addHandler(a.Event.Jabber.Version,b.NS.VERSION,"iq"),a.addHandler(a.Event.Jabber.Presence,null,"presence"),a.addHandler(a.Event.Jabber.Message,null,"message"),a.addHandler(a.Event.Jabber.Bookmarks,b.NS.PRIVATE,"iq"),a.addHandler(a.Event.Jabber.Room.Disco,b.NS.DISCO_INFO,"iq"),a.addHandler(a.Event.Jabber.PrivacyList,b.NS.PRIVACY,"iq","result"),a.addHandler(a.Event.Jabber.PrivacyListError,b.NS.PRIVACY,"iq","error")};return a.init=function(f,g){e=f,c.extend(!0,i,g),i.debug&&(a.log=function(a){try{void 0!==typeof window.console&&void 0!==typeof window.console.log&&console.log(a)}catch(b){}},a.log("[Init] Debugging enabled")),k(),d=new b.Connection(e),d.rawInput=a.rawInput.bind(a),d.rawOutput=a.rawOutput.bind(a),window.onbeforeunload=a.onWindowUnload,c.browser.mozilla&&c(document).keydown(function(a){27===a.which&&a.preventDefault()})},a.connect=function(c,e,g){d.reset(),l(),h=h?!0:c&&c.indexOf("@")<0,c&&e?(d.connect(_getEscapedJidFromJid(c)+"/"+Candy.about.name,e,Candy.Core.Event.Strophe.Connect),f=new a.ChatUser(c,b.getNodeFromJid(c))):c&&g?(d.connect(_getEscapedJidFromJid(c)+"/"+Candy.about.name,null,Candy.Core.Event.Strophe.Connect),f=new a.ChatUser(null,g)):c?Candy.Core.Event.Login(c):Candy.Core.Event.Login()},_getEscapedJidFromJid=function(a){var c=b.getNodeFromJid(a),d=b.getDomainFromJid(a);return c?b.escapeNode(c)+"@"+d:d},a.attach=function(c,e,g){f=new a.ChatUser(c,b.getNodeFromJid(c)),l(),d.attach(c,e,g,Candy.Core.Event.Strophe.Connect)},a.disconnect=function(){d.connected&&(c.each(a.getRooms(),function(){Candy.Core.Action.Jabber.Room.Leave(this.getJid())}),d.disconnect())},a.addHandler=function(a,b,c,e,f,g,h){return d.addHandler(a,b,c,e,f,g,h)},a.getUser=function(){return f},a.setUser=function(a){f=a},a.getConnection=function(){return d},a.getRooms=function(){return g},a.isAnonymousConnection=function(){return h},a.getOptions=function(){return i},a.getRoom=function(a){return g[a]?g[a]:null},a.onWindowUnload=function(){d.sync=!0,a.disconnect(),d.flush()},a.rawInput=function(a){this.log("RECV: "+a)},a.rawOutput=function(a){this.log("SENT: "+a)},a.log=function(){},a}(Candy.Core||{},Strophe,jQuery),Candy.View=function(a,b){var c={container:null,roomJid:null},d={language:"en",resources:"res/",messages:{limit:2e3,remove:500},crop:{message:{nickname:15,body:1e3},roster:{nickname:15}}},e=function(c){b.i18n.setDictionary(a.Translation[c])},f=function(){Candy.Core.Event.addObserver(Candy.Core.Event.KEYS.CHAT,a.Observer.Chat),Candy.Core.Event.addObserver(Candy.Core.Event.KEYS.PRESENCE,a.Observer.Presence),Candy.Core.Event.addObserver(Candy.Core.Event.KEYS.PRESENCE_ERROR,a.Observer.PresenceError),Candy.Core.Event.addObserver(Candy.Core.Event.KEYS.MESSAGE,a.Observer.Message),Candy.Core.Event.addObserver(Candy.Core.Event.KEYS.LOGIN,a.Observer.Login)},g=function(){b.browser.msie&&!b.browser.version.toString().match("^9")?b(document).focusin(Candy.View.Pane.Window.onFocus).focusout(Candy.View.Pane.Window.onBlur):b(window).focus(Candy.View.Pane.Window.onFocus).blur(Candy.View.Pane.Window.onBlur),b(window).resize(Candy.View.Pane.Chat.fitTabs)},h=function(){b("#emoticons-icon").on("click",function(b){a.Pane.Chat.Context.showEmoticonsMenu(b.currentTarget),b.stopPropagation()}),b("#chat-autoscroll-control").click(Candy.View.Pane.Chat.Toolbar.onAutoscrollControlClick),b("#chat-sound-control").click(Candy.View.Pane.Chat.Toolbar.onSoundControlClick),Candy.Util.cookieExists("candy-nosound")&&b("#chat-sound-control").click(),b("#chat-statusmessage-control").click(Candy.View.Pane.Chat.Toolbar.onStatusMessageControlClick),Candy.Util.cookieExists("candy-nostatusmessages")&&b("#chat-statusmessage-control").click()},i=function(){b("body").delegate("li[data-tooltip]","mouseenter",Candy.View.Pane.Chat.Tooltip.show)};return a.init=function(a,j){b.extend(!0,d,j),e(d.language),Candy.Util.Parser.setEmoticonPath(this.getOptions().resources+"img/emoticons/"),c.container=a,c.container.html(Mustache.to_html(Candy.View.Template.Chat.pane,{tooltipEmoticons:b.i18n._("tooltipEmoticons"),tooltipSound:b.i18n._("tooltipSound"),tooltipAutoscroll:b.i18n._("tooltipAutoscroll"),tooltipStatusmessage:b.i18n._("tooltipStatusmessage"),tooltipAdministration:b.i18n._("tooltipAdministration"),tooltipUsercount:b.i18n._("tooltipUsercount"),resourcesPath:this.getOptions().resources},{tabs:Candy.View.Template.Chat.tabs,rooms:Candy.View.Template.Chat.rooms,modal:Candy.View.Template.Chat.modal,toolbar:Candy.View.Template.Chat.toolbar,soundcontrol:Candy.View.Template.Chat.soundcontrol})),g(),h(),f(),i()},a.getCurrent=function(){return c},a.getOptions=function(){return d},a}(Candy.View||{},jQuery),Candy.Util=function(a,b){return a.jidToId=function(a){return MD5.hexdigest(a)},a.escapeJid=function(a){var b=Strophe.escapeNode(Strophe.getNodeFromJid(a)),c=Strophe.getDomainFromJid(a),d=Strophe.getResourceFromJid(a);return a=b+"@"+c,d&&(a+="/"+Strophe.escapeNode(d)),a},a.unescapeJid=function(a){var b=Strophe.unescapeNode(Strophe.getNodeFromJid(a)),c=Strophe.getDomainFromJid(a),d=Strophe.getResourceFromJid(a);return a=b+"@"+c,d&&(a+="/"+Strophe.unescapeNode(d)),a},a.crop=function(a,b){return a.length>b&&(a=a.substr(0,b-3)+"..."),a},a.setCookie=function(a,b,c){var d=new Date;d.setDate((new Date).getDate()+c),document.cookie=a+"="+b+";expires="+d.toUTCString()+";path=/"},a.cookieExists=function(a){return document.cookie.indexOf(a)>-1},a.getCookie=function(a){if(document.cookie){var b=new RegExp(escape(a)+"=([^;]*)","gm"),c=b.exec(document.cookie);if(c)return c[1]}},a.deleteCookie=function(a){document.cookie=a+"=;expires=Thu, 01-Jan-70 00:00:01 GMT;path=/"},a.getPosLeftAccordingToWindowBounds=function(a,c){var d=b(document).width(),e=a.outerWidth(),f=e-a.outerWidth(!0),g="left";return c+e>=d&&(c-=e-f,g="right"),{px:c,backgroundPositionAlignment:g}},a.getPosTopAccordingToWindowBounds=function(a,c){var d=b(document).height(),e=a.outerHeight(),f=e-a.outerHeight(!0),g="top";return c+e>=d&&(c-=e-f,g="bottom"),{px:c,backgroundPositionAlignment:g}},a.localizedTime=function(c){if(void 0===c)return void 0;var d=a.iso8601toDate(c);return d.toDateString()===(new Date).toDateString()?d.format(b.i18n._("timeFormat")):d.format(b.i18n._("dateFormat"))},a.formatAMPM=function(a){var b=a.getHours(),c=a.getMinutes(),d=b>=12?"pm":"am";b%=12,b=b?b:12,c=10>c?"0"+c:c;var e=b+":"+c+" "+d;return e},a.iso8601toDate=function(a){var b=Date.parse(a),c=0;if(isNaN(b)){var d=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(a);if(d)return"Z"!==d[8]&&(c=60*+d[10]+ +d[11],"+"===d[9]&&(c=-c)),new Date(+d[1],+d[2]-1,+d[3],+d[4],+d[5]+c,+d[6],d[7]?+d[7].substr(0,3):0);b=Date.parse(a.replace(/^(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")+"Z")}return new Date(b)},a.isEmptyObject=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0},a.forceRedraw=function(a){a.css({display:"none"}),setTimeout(function(){this.css({display:"block"})}.bind(a),1)},a.Parser={_emoticonPath:"",setEmoticonPath:function(a){this._emoticonPath=a},emoticons:[{plain:":)",regex:/((\s):-?\)|:-?\)(\s|$))/gm,image:"Smiling.png"},{plain:";)",regex:/((\s);-?\)|;-?\)(\s|$))/gm,image:"Winking.png"},{plain:":D",regex:/((\s):-?D|:-?D(\s|$))/gm,image:"Grinning.png"},{plain:";D",regex:/((\s);-?D|;-?D(\s|$))/gm,image:"Grinning_Winking.png"},{plain:":(",regex:/((\s):-?\(|:-?\((\s|$))/gm,image:"Unhappy.png"},{plain:"^^",regex:/((\s)\^\^|\^\^(\s|$))/gm,image:"Happy_3.png"},{plain:":P",regex:/((\s):-?P|:-?P(\s|$))/gim,image:"Tongue_Out.png"},{plain:";P",regex:/((\s);-?P|;-?P(\s|$))/gim,image:"Tongue_Out_Winking.png"},{plain:":S",regex:/((\s):-?S|:-?S(\s|$))/gim,image:"Confused.png"},{plain:":/",regex:/((\s):-?\/|:-?\/(\s|$))/gm,image:"Uncertain.png"},{plain:"8)",regex:/((\s)8-?\)|8-?\)(\s|$))/gm,image:"Sunglasses.png"},{plain:"$)",regex:/((\s)\$-?\)|\$-?\)(\s|$))/gm,image:"Greedy.png"},{plain:"oO",regex:/((\s)oO|oO(\s|$))/gm,image:"Huh.png"},{plain:":x",regex:/((\s):x|:x(\s|$))/gm,image:"Lips_Sealed.png"},{plain:":666:",regex:/((\s):666:|:666:(\s|$))/gm,image:"Devil.png"},{plain:"<3",regex:/((\s)&lt;3|&lt;3(\s|$))/gm,image:"Heart.png"}],emotify:function(a){var b;for(b=this.emoticons.length-1;b>=0;b--)a=a.replace(this.emoticons[b].regex,'$2<img class="emoticon" alt="$1" src="'+this._emoticonPath+this.emoticons[b].image+'" />$3');return a},linkify:function(a){return a=a.replace(/(^|[^\/])(www\.[^\.]+\.[\S]+(\b|$))/gi,"$1http://$2"),a.replace(/(\b(https?|ftp|file):\/\/[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$1" target="_blank">$1</a>')},escape:function(a){return b("<div/>").text(a).html()},all:function(a){return a&&(a=this.escape(a),a=this.linkify(a),a=this.emotify(a)),a}},a}(Candy.Util||{},jQuery),Candy.Util.Observable=function(a){var b={};return a.addObserver=function(a,c){void 0===b[a]&&(b[a]=[]),b[a].push(c)},a.deleteObserver=function(a,c){delete b[a][c]},a.clearObservers=function(a){void 0!==a?b[a]=[]:b={}},a.notifyObservers=function(c,d){var e,f=b[c];for(e=f.length-1;e>=0;e--)f[e].update(a,d)},a}(Candy.Util.Observable||{}),Candy.Core.Action=function(a,b,c){return a.Jabber={Version:function(a){Candy.Core.getConnection().send($iq({type:"result",to:a.attr("from"),from:a.attr("to"),id:a.attr("id")}).c("query",{name:Candy.about.name,version:Candy.about.version,os:navigator.userAgent}))},Roster:function(){Candy.Core.getConnection().send($iq({type:"get",xmlns:b.NS.CLIENT}).c("query",{xmlns:b.NS.ROSTER}).tree())},Presence:function(a){Candy.Core.getConnection().send($pres(a).tree())},Services:function(){Candy.Core.getConnection().send($iq({type:"get",xmlns:b.NS.CLIENT}).c("query",{xmlns:b.NS.DISCO_ITEMS}).tree())},Autojoin:function(){Candy.Core.getOptions().autojoin===!0?Candy.Core.getConnection().send($iq({type:"get",xmlns:b.NS.CLIENT}).c("query",{xmlns:b.NS.PRIVATE}).c("storage",{xmlns:b.NS.BOOKMARKS}).tree()):c.isArray(Candy.Core.getOptions().autojoin)&&c.each(Candy.Core.getOptions().autojoin,function(){a.Jabber.Room.Join(this.valueOf())})},ResetIgnoreList:function(){Candy.Core.getConnection().send($iq({type:"set",from:Candy.Core.getUser().getJid(),id:"set1"}).c("query",{xmlns:b.NS.PRIVACY}).c("list",{name:"ignore"}).c("item",{action:"allow",order:"0"}).tree())},RemoveIgnoreList:function(){Candy.Core.getConnection().send($iq({type:"set",from:Candy.Core.getUser().getJid(),id:"remove1"}).c("query",{xmlns:b.NS.PRIVACY}).c("list",{name:"ignore"}).tree())},GetIgnoreList:function(){Candy.Core.getConnection().send($iq({type:"get",from:Candy.Core.getUser().getJid(),id:"get1"}).c("query",{xmlns:b.NS.PRIVACY}).c("list",{name:"ignore"}).tree())},SetIgnoreListActive:function(){Candy.Core.getConnection().send($iq({type:"set",from:Candy.Core.getUser().getJid(),id:"set2"}).c("query",{xmlns:b.NS.PRIVACY}).c("active",{name:"ignore"}).tree())},GetJidIfAnonymous:function(){Candy.Core.getUser().getJid()||(Candy.Core.log("[Jabber] Anonymous login"),Candy.Core.getUser().data.jid=Candy.Core.getConnection().jid)},Room:{Join:function(b,c){a.Jabber.Room.Disco(b),Candy.Core.getConnection().muc.join(b,Candy.Core.getUser().getNick(),null,null,c)},Leave:function(a){Candy.Core.getConnection().muc.leave(a,Candy.Core.getRoom(a).getUser().getNick(),function(){})},Disco:function(a){Candy.Core.getConnection().send($iq({type:"get",from:Candy.Core.getUser().getJid(),to:a,id:"disco3"}).c("query",{xmlns:b.NS.DISCO_INFO}).tree())},Message:function(a,b,d){return b=c.trim(b),""===b?!1:(Candy.Core.getConnection().muc.message(Candy.Util.escapeJid(a),void 0,b,d),!0)},IgnoreUnignore:function(a){Candy.Core.getUser().addToOrRemoveFromPrivacyList("ignore",a),Candy.Core.Action.Jabber.Room.UpdatePrivacyList()},UpdatePrivacyList:function(){var a=Candy.Core.getUser(),b=$iq({type:"set",from:a.getJid(),id:"edit1"}).c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"ignore"}),d=a.getPrivacyList("ignore");d.length>0?c.each(d,function(a,c){b.c("item",{type:"jid",value:Candy.Util.escapeJid(c),action:"deny",order:a}).c("message").up().up()}):b.c("item",{action:"allow",order:"0"}),Candy.Core.getConnection().send(b.tree())},Admin:{UserAction:function(a,c,d,e){var f,g={nick:b.escapeNode(b.getResourceFromJid(c))};switch(d){case"kick":f="kick1",g.role="none";break;case"ban":f="ban1",g.affiliation="outcast";break;default:return!1}return Candy.Core.getConnection().send($iq({type:"set",from:Candy.Core.getUser().getJid(),to:a,id:f}).c("query",{xmlns:b.NS.MUC_ADMIN}).c("item",g).c("reason").t(e).tree()),!0},SetSubject:function(a,b){Candy.Core.getConnection().muc.setTopic(a,b)}}}},a}(Candy.Core.Action||{},Strophe,jQuery),Candy.Core.ChatRoom=function(a){this.room={jid:a,name:null},this.user=null,this.roster=new Candy.Core.ChatRoster,this.setUser=function(a){this.user=a},this.getUser=function(){return this.user},this.getJid=function(){return this.room.jid},this.setName=function(a){this.room.name=a},this.getName=function(){return this.room.name},this.setRoster=function(a){this.roster=a},this.getRoster=function(){return this.roster}},Candy.Core.ChatRoster=function(){this.items={},this.add=function(a){this.items[a.getJid()]=a},this.remove=function(a){delete this.items[a]},this.get=function(a){return this.items[a]},this.getAll=function(){return this.items}},Candy.Core.ChatUser=function(a,b,c,d){this.ROLE_MODERATOR="moderator",this.AFFILIATION_OWNER="owner",this.data={jid:a,nick:Strophe.unescapeNode(b),affiliation:c,role:d,privacyLists:{},customData:{}},this.getJid=function(){return this.data.jid?Candy.Util.unescapeJid(this.data.jid):void 0},this.getEscapedJid=function(){return Candy.Util.escapeJid(this.data.jid)},this.getNick=function(){return Strophe.unescapeNode(this.data.nick)},this.getRole=function(){return this.data.role},this.getAffiliation=function(){return this.data.affiliation},this.isModerator=function(){return this.getRole()===this.ROLE_MODERATOR||this.getAffiliation()===this.AFFILIATION_OWNER},this.addToOrRemoveFromPrivacyList=function(a,b){this.data.privacyLists[a]||(this.data.privacyLists[a]=[]);var c=-1;return-1!==(c=this.data.privacyLists[a].indexOf(b))?this.data.privacyLists[a].splice(c,1):this.data.privacyLists[a].push(b),this.data.privacyLists[a]},this.getPrivacyList=function(a){return this.data.privacyLists[a]||(this.data.privacyLists[a]=[]),this.data.privacyLists[a]},this.isInPrivacyList=function(a,b){return this.data.privacyLists[a]?-1!==this.data.privacyLists[a].indexOf(b):!1},this.setCustomData=function(a){this.data.customData=a},this.getCustomData=function(){return this.data.customData}},Candy.Core.Event=function(a,b,c,d){var e;for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);return a.KEYS={CHAT:1,PRESENCE:2,MESSAGE:3,LOGIN:4,PRESENCE_ERROR:5},a.Strophe={Connect:function(c){switch(c){case b.Status.CONNECTED:Candy.Core.log("[Connection] Connected"),Candy.Core.Action.Jabber.GetJidIfAnonymous();case b.Status.ATTACHED:Candy.Core.log("[Connection] Attached"),Candy.Core.Action.Jabber.Presence(),Candy.Core.Action.Jabber.Autojoin(),Candy.Core.Action.Jabber.GetIgnoreList();break;case b.Status.DISCONNECTED:Candy.Core.log("[Connection] Disconnected");break;case b.Status.AUTHFAIL:Candy.Core.log("[Connection] Authentication failed");break;case b.Status.CONNECTING:Candy.Core.log("[Connection] Connecting");break;case b.Status.DISCONNECTING:Candy.Core.log("[Connection] Disconnecting");break;case b.Status.AUTHENTICATING:Candy.Core.log("[Connection] Authenticating");break;case b.Status.ERROR:case b.Status.CONNFAIL:Candy.Core.log("[Connection] Failed ("+c+")");break;default:Candy.Core.log("[Connection] What?!")}a.notifyObservers(a.KEYS.CHAT,{type:"connection",status:c})}},a.Login=function(b){a.notifyObservers(a.KEYS.LOGIN,{presetJid:b})},a.Jabber={Version:function(a){return Candy.Core.log("[Jabber] Version"),Candy.Core.Action.Jabber.Version(c(a)),!0},Presence:function(d){return Candy.Core.log("[Jabber] Presence"),d=c(d),d.children('x[xmlns^="'+b.NS.MUC+'"]').length>0&&("error"===d.attr("type")?a.Jabber.Room.PresenceError(d):a.Jabber.Room.Presence(d)),!0},Bookmarks:function(a){return Candy.Core.log("[Jabber] Bookmarks"),c("conference",a).each(function(){var a=c(this);a.attr("autojoin")&&Candy.Core.Action.Jabber.Room.Join(a.attr("jid"))}),!0},PrivacyList:function(a){Candy.Core.log("[Jabber] PrivacyList");var b=Candy.Core.getUser();return c('list[name="ignore"] item',a).each(function(){var a=c(this);"deny"===a.attr("action")&&b.addToOrRemoveFromPrivacyList("ignore",a.attr("value"))}),Candy.Core.Action.Jabber.SetIgnoreListActive(),!1},PrivacyListError:function(a){return Candy.Core.log("[Jabber] PrivacyListError"),c('error[code="404"][type="cancel"] item-not-found',a)&&(Candy.Core.Action.Jabber.ResetIgnoreList(),Candy.Core.Action.Jabber.SetIgnoreListActive()),!1},Message:function(d){Candy.Core.log("[Jabber] Message");var d=c(d),e=d.attr("from"),f=d.attr("type"),g=d.attr("to");return e===b.getDomainFromJid(e)||"groupchat"!==f&&"chat"!==f&&"error"!==f?g||e!==b.getDomainFromJid(e)?g&&e===b.getDomainFromJid(e)&&a.notifyObservers(a.KEYS.CHAT,{type:f||"message",subject:d.children("subject").text(),message:d.children("body").text()}):a.notifyObservers(a.KEYS.CHAT,{type:f||"message",message:d.children("body").text()}):a.Jabber.Room.Message(d),!0},Room:{Leave:function(d){Candy.Core.log("[Jabber:Room] Leave");var d=c(d),e=d.attr("from"),f=b.getBareJidFromJid(e);if(!Candy.Core.getRoom(f))return!1;var g,h,i=Candy.Core.getRoom(f).getName(),j=d.find("item"),k="leave";delete Candy.Core.getRooms()[f],"none"===j.attr("role")&&("307"===d.find("status").attr("code")?k="kick":"301"===d.find("status").attr("code")&&(k="ban"),g=j.find("reason").text(),h=j.find("actor").attr("jid"));var l=new Candy.Core.ChatUser(e,b.getResourceFromJid(e),j.attr("affiliation"),j.attr("role"));return a.notifyObservers(a.KEYS.PRESENCE,{roomJid:f,roomName:i,type:k,reason:g,actor:h,user:l}),!0},Disco:function(a){Candy.Core.log("[Jabber:Room] Disco");var a=c(a),d=b.getBareJidFromJid(a.attr("from"));Candy.Core.getRooms()[d]||(Candy.Core.getRooms()[d]=new Candy.Core.ChatRoom(d));var e=a.find("identity").attr("name"),f=Candy.Core.getRoom(d);return null===f.getName()&&f.setName(e),!0},Presence:function(c){Candy.Core.log("[Jabber:Room] Presence");var d=Candy.Util.unescapeJid(c.attr("from")),e=b.getBareJidFromJid(d),f=c.attr("type");if(b.getResourceFromJid(d)===Candy.Core.getUser().getNick()&&"unavailable"===f)return a.Jabber.Room.Leave(c),!0;var g=Candy.Core.getRoom(e);g||(Candy.Core.getRooms()[e]=new Candy.Core.ChatRoom(e),g=Candy.Core.getRoom(e));var h,i,j=g.getRoster(),k=c.find("item");if("unavailable"!==f){var l=b.getResourceFromJid(d);i=new Candy.Core.ChatUser(d,l,k.attr("affiliation"),k.attr("role")),null===g.getUser()&&Candy.Core.getUser().getNick()===l&&g.setUser(i),j.add(i),h="join"}else h="leave","none"===k.attr("role")&&("307"===c.find("status").attr("code")?h="kick":"301"===c.find("status").attr("code")&&(h="ban")),i=j.get(d),j.remove(d);return a.notifyObservers(a.KEYS.PRESENCE,{roomJid:e,roomName:g.getName(),user:i,action:h,currentUser:Candy.Core.getUser()}),!0},PresenceError:function(c){Candy.Core.log("[Jabber:Room] Presence Error");var d=Candy.Util.unescapeJid(c.attr("from")),e=b.getBareJidFromJid(d),f=Candy.Core.getRooms()[e],g=f.getName();delete f,a.notifyObservers(a.KEYS.PRESENCE_ERROR,{msg:c,type:c.children("error").children()[0].tagName.toLowerCase(),roomJid:e,roomName:g})},Message:function(c){Candy.Core.log("[Jabber:Room] Message");var d,e;if(c.children("subject").length>0)d=Candy.Util.unescapeJid(b.getBareJidFromJid(c.attr("from"))),e={name:b.getNodeFromJid(d),body:c.children("subject").text(),type:"subject"};else if("error"===c.attr("type")){var f=c.children("error");"500"===f.attr("code")&&f.children("text").length>0&&(d=c.attr("from"),e={type:"info",body:f.children("text").text()})
}else{if(!(c.children("body").length>0))return!0;if("chat"===c.attr("type")){d=Candy.Util.unescapeJid(c.attr("from"));var g=b.getBareJidFromJid(d),h=!Candy.Core.getRoom(g),i=h?b.getNodeFromJid(d):b.getResourceFromJid(d);e={name:i,body:c.children("body").text(),type:c.attr("type"),isNoConferenceRoomJid:h}}else{d=Candy.Util.unescapeJid(b.getBareJidFromJid(c.attr("from")));var j=b.getResourceFromJid(c.attr("from"));j?(j=b.unescapeNode(j),e={name:j,body:c.children("body").text(),type:c.attr("type")}):e={name:"",body:c.children("body").text(),type:"info"}}}var k=c.children("delay")?c.children("delay"):c.children('x[xmlns="'+b.NS.DELAY+'"]'),l=void 0!==k?k.attr("stamp"):null;return a.notifyObservers(a.KEYS.MESSAGE,{roomJid:d,message:e,timestamp:l}),!0}}},a}(Candy.Core.Event||{},Strophe,jQuery,Candy.Util.Observable),Candy.View.Event=function(a){return a.Chat={onAdminMessage:function(){},onDisconnect:function(){},onAuthfail:function(){}},a.Room={onAdd:function(){},onShow:function(){},onHide:function(){},onSubjectChange:function(){},onClose:function(){},onPresenceChange:function(){}},a.Roster={onUpdate:function(){},onContextMenu:function(){return{}},afterContextMenu:function(){}},a.Message={beforeShow:function(a){return a.message},onShow:function(){},beforeSend:function(a){return a}},a}(Candy.View.Event||{},jQuery),Candy.View.Observer=function(a,b){return a.Chat={update:function(a,c){if("connection"===c.type)switch(c.status){case Strophe.Status.CONNECTING:case Strophe.Status.AUTHENTICATING:Candy.View.Pane.Chat.Modal.show(b.i18n._("statusConnecting"),!1,!0);break;case Strophe.Status.ATTACHED:case Strophe.Status.CONNECTED:Candy.View.Pane.Chat.Modal.show(b.i18n._("statusConnected")),Candy.View.Pane.Chat.Modal.hide();break;case Strophe.Status.DISCONNECTING:Candy.View.Pane.Chat.Modal.show(b.i18n._("statusDisconnecting"),!1,!0);break;case Strophe.Status.DISCONNECTED:var d=Candy.Core.isAnonymousConnection()?Strophe.getDomainFromJid(Candy.Core.getUser().getJid()):null;Candy.View.Pane.Chat.Modal.showLoginForm(b.i18n._("statusDisconnected"),d),Candy.View.Event.Chat.onDisconnect();break;case Strophe.Status.AUTHFAIL:Candy.View.Pane.Chat.Modal.showLoginForm(b.i18n._("statusAuthfail")),Candy.View.Event.Chat.onAuthfail();break;default:Candy.View.Pane.Chat.Modal.show(b.i18n._("status",c.status))}else"message"===c.type?Candy.View.Pane.Chat.adminMessage(c.subject||"",c.message):("chat"===c.type||"groupchat"===c.type)&&Candy.View.Pane.Chat.onInfoMessage(Candy.View.getCurrent().roomJid,c.subject||"",c.message)}},a.Presence={update:function(c,d){if("leave"===d.type){var e=Candy.View.Pane.Room.getUser(d.roomJid);Candy.View.Pane.Room.close(d.roomJid),a.Presence.notifyPrivateChats(e,d.type)}else if("kick"===d.type||"ban"===d.type){var f,g=d.actor?Strophe.getNodeFromJid(d.actor):null,h=[d.roomName];switch(g&&h.push(g),d.type){case"kick":f=b.i18n._(g?"youHaveBeenKickedBy":"youHaveBeenKicked",h);break;case"ban":f=b.i18n._(g?"youHaveBeenBannedBy":"youHaveBeenBanned",h)}Candy.View.Pane.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.adminMessageReason,{reason:d.reason,_action:f,_reason:b.i18n._("reasonWas",[d.reason])})),setTimeout(function(){Candy.View.Pane.Chat.Modal.hide(function(){Candy.View.Pane.Room.close(d.roomJid),a.Presence.notifyPrivateChats(d.user,d.type)})},5e3),Candy.View.Event.Room.onPresenceChange({type:d.type,reason:d.reason,roomJid:d.roomJid,user:d.user})}else Candy.View.Pane.Chat.rooms[d.roomJid]||(Candy.View.Pane.Room.init(d.roomJid,d.roomName),Candy.View.Pane.Room.show(d.roomJid)),Candy.View.Pane.Roster.update(d.roomJid,d.user,d.action,d.currentUser),Candy.View.Pane.Chat.rooms[d.user.getJid()]&&(Candy.View.Pane.Roster.update(d.user.getJid(),d.user,d.action,d.currentUser),Candy.View.Pane.PrivateRoom.setStatus(d.user.getJid(),d.action))},notifyPrivateChats:function(a,b){Candy.Core.log("[View:Observer] notify Private Chats");var c;for(c in Candy.View.Pane.Chat.rooms)Candy.View.Pane.Chat.rooms.hasOwnProperty(c)&&Candy.View.Pane.Room.getUser(c)&&a.getJid()===Candy.View.Pane.Room.getUser(c).getJid()&&(Candy.View.Pane.Roster.update(c,a,b,a),Candy.View.Pane.PrivateRoom.setStatus(c,b))}},a.PresenceError={update:function(a,c){switch(c.type){case"not-authorized":var d;c.msg.children("x").children("password").length>0&&(d=b.i18n._("passwordEnteredInvalid",[c.roomName])),Candy.View.Pane.Chat.Modal.showEnterPasswordForm(c.roomJid,c.roomName,d);break;case"conflict":Candy.View.Pane.Chat.Modal.showNicknameConflictForm(c.roomJid);break;case"registration-required":Candy.View.Pane.Chat.Modal.showError("errorMembersOnly",[c.roomName]);break;case"service-unavailable":Candy.View.Pane.Chat.Modal.showError("errorMaxOccupantsReached",[c.roomName])}}},a.Message={update:function(a,b){"subject"===b.message.type?(Candy.View.Pane.Chat.rooms[b.roomJid]||(Candy.View.Pane.Room.init(b.roomJid,b.message.name),Candy.View.Pane.Room.show(b.roomJid)),Candy.View.Pane.Room.setSubject(b.roomJid,b.message.body)):"info"===b.message.type?Candy.View.Pane.Chat.infoMessage(b.roomJid,b.message.body):("chat"!==b.message.type||Candy.View.Pane.Chat.rooms[b.roomJid]||Candy.View.Pane.PrivateRoom.open(b.roomJid,b.message.name,!1,b.message.isNoConferenceRoomJid),Candy.View.Pane.Message.show(b.roomJid,b.message.name,b.message.body,b.timestamp))}},a.Login={update:function(a,b){Candy.View.Pane.Chat.Modal.showLoginForm(null,b.presetJid)}},a}(Candy.View.Observer||{},jQuery),Candy.View.Pane=function(a,b){return a.Window={_hasFocus:!0,_plainTitle:document.title,_unreadMessagesCount:0,autoscroll:!0,hasFocus:function(){return a.Window._hasFocus},increaseUnreadMessages:function(){a.Window.renderUnreadMessages(++a.Window._unreadMessagesCount)},reduceUnreadMessages:function(b){a.Window._unreadMessagesCount-=b,a.Window._unreadMessagesCount<=0?a.Window.clearUnreadMessages():a.Window.renderUnreadMessages(a.Window._unreadMessagesCount)},clearUnreadMessages:function(){a.Window._unreadMessagesCount=0,document.title=a.Window._plainTitle},renderUnreadMessages:function(){},onFocus:function(){a.Window._hasFocus=!0,Candy.View.getCurrent().roomJid&&(a.Room.setFocusToForm(Candy.View.getCurrent().roomJid),a.Chat.clearUnreadMessages(Candy.View.getCurrent().roomJid))},onBlur:function(){a.Window._hasFocus=!1}},a.Chat={rooms:[],addTab:function(c,d,e){var f=d||Strophe.getNodeFromJid(c);"Take65"===f&&(f="Contact List",userCount=!0);var g=Candy.Util.jidToId(c),h=Mustache.to_html(Candy.View.Template.Chat.tab,{roomJid:c,roomId:g,name:f,privateUserChat:function(){return"chat"===e},roomType:e,countClass:userCount?"chat-usercount":"chat-unread"}),i=b(h).appendTo("#chat-tabs");i.click(a.Chat.tabClick),b("a.close",i).click(a.Chat.tabClose),a.Chat.fitTabs()},getTab:function(a){return b("#chat-tabs").children('li[data-roomjid="'+a+'"]')},getRoster:function(a){return b("#chat-rooms .roomtype-groupchat .roster-pane .user").filter(function(){return b(this).data("jid")==a})},removeTab:function(b){a.Chat.getTab(b).remove(),a.Chat.fitTabs()},setActiveTab:function(a){b("#chat-tabs").children().each(function(){var c=b(this);c.attr("data-roomjid")===a?c.addClass("active"):c.removeClass("active")})},increaseUnreadMessages:function(b){var c=this.getRoster(b).find(".chat-unread");c.show(),""===c.text()?c.text(1):c.text(parseInt(c.text(),10)+1),"chat"===a.Chat.rooms[b].type&&a.Window.increaseUnreadMessages()},clearUnreadMessages:function(b){var c=this.getRoster(b).find(".chat-unread");a.Window.reduceUnreadMessages(c.text()),c.text("").hide()},tabClick:function(a){a.preventDefault()},tabClose:function(){var c=b(this).parent().attr("data-roomjid");return"chat"===a.Chat.rooms[c].type?a.Room.close(c):Candy.Core.Action.Jabber.Room.Leave(c),!1},allTabsClosed:function(){Candy.Core.disconnect(),a.Chat.Toolbar.hide()},fitTabs:function(){var a=b("#chat-tabs").innerWidth(),c=0,d=b("#chat-tabs").children();if(d.each(function(){c+=b(this).css({width:"auto",overflow:"visible"}).outerWidth(!0)}),c>a){var e=d.outerWidth(!0)-d.width(),f=Math.floor(a/d.length)-e;d.css({width:f,overflow:"hidden"})}},updateToolbar:function(c){b("#chat-toolbar").find(".context").click(function(b){a.Chat.Context.show(b.currentTarget,c),b.stopPropagation()}),Candy.View.Pane.Chat.Toolbar.updateUsercount(Candy.View.Pane.Chat.rooms[_chatRoom].usercount)},adminMessage:function(c,d){if(Candy.View.getCurrent().roomJid){var e=Mustache.to_html(Candy.View.Template.Chat.adminMessage,{subject:c,message:d,sender:b.i18n._("administratorMessageSubject"),time:Candy.Util.formatAMPM(new Date)});b("#chat-rooms").children().each(function(){a.Room.appendToMessagePane(b(this).attr("data-roomjid"),e)}),a.Room.scrollToBottom(Candy.View.getCurrent().roomJid),Candy.View.Event.Chat.onAdminMessage({subject:c,message:d})}},infoMessage:function(b,c,d){a.Chat.onInfoMessage(b,c,d)},onInfoMessage:function(c,d,e){if(Candy.View.getCurrent().roomJid){var f=Mustache.to_html(Candy.View.Template.Chat.infoMessage,{subject:d,message:b.i18n._(e),time:Candy.Util.formatAMPM(new Date)});a.Room.appendToMessagePane(c,f),Candy.View.getCurrent().roomJid===c&&a.Room.scrollToBottom(Candy.View.getCurrent().roomJid)}},Toolbar:{show:function(){},hide:function(){},playSound:function(){a.Chat.Toolbar.onPlaySound()},onPlaySound:function(){},onSoundControlClick:function(){var c=b("#chat-sound-control");c.hasClass("checked")?(a.Chat.Toolbar.playSound=function(){},Candy.Util.setCookie("candy-nosound","1",365)):(a.Chat.Toolbar.playSound=function(){a.Chat.Toolbar.onPlaySound()},Candy.Util.deleteCookie("candy-nosound")),c.toggleClass("checked")},onAutoscrollControlClick:function(){var c=b("#chat-autoscroll-control");c.hasClass("checked")?(a.Room.scrollToBottom=function(b){a.Room.onScrollToStoredPosition(b)},a.Window.autoscroll=!1):(a.Room.scrollToBottom=function(b){a.Room.onScrollToBottom(b)},a.Room.scrollToBottom(Candy.View.getCurrent().roomJid),a.Window.autoscroll=!0),c.toggleClass("checked")},onStatusMessageControlClick:function(){var c=b("#chat-statusmessage-control");c.hasClass("checked")?(a.Chat.infoMessage=function(){},Candy.Util.setCookie("candy-nostatusmessages","1",365)):(a.Chat.infoMessage=function(b,c,d){a.Chat.onInfoMessage(b,c,d)},Candy.Util.deleteCookie("candy-nostatusmessages")),c.toggleClass("checked")},updateUsercount:function(a){b(".chat-usercount").text(a-1)}},Modal:{show:function(c,d,e){d?a.Chat.Modal.showCloseControl():a.Chat.Modal.hideCloseControl(),e?a.Chat.Modal.showSpinner():a.Chat.Modal.hideSpinner(),b("#chat-modal").stop(!1,!0),b("#chat-modal-body").html(c),b("#chat-modal").fadeIn("fast"),b("#chat-modal-overlay").show()},hide:function(a){b("#chat-modal").fadeOut("fast",function(){b("#chat-modal-body").text(""),b("#chat-modal-overlay").hide()}),b(document).keydown(function(a){27===a.which&&a.preventDefault()}),a&&a()},showSpinner:function(){b("#chat-modal-spinner").show()},hideSpinner:function(){b("#chat-modal-spinner").hide()},showCloseControl:function(){b("#admin-message-cancel").show().click(function(b){a.Chat.Modal.hide(),b.preventDefault()}),b(document).keydown(function(b){27===b.which&&(a.Chat.Modal.hide(),b.preventDefault())})},hideCloseControl:function(){b("#admin-message-cancel").hide().click(function(){})},showLoginForm:function(c,d){a.Chat.Modal.show((c?c:"")+Mustache.to_html(Candy.View.Template.Login.form,{_labelUsername:b.i18n._("labelUsername"),_labelPassword:b.i18n._("labelPassword"),_loginSubmit:b.i18n._("loginSubmit"),displayPassword:!Candy.Core.isAnonymousConnection(),displayUsername:Candy.Core.isAnonymousConnection()||!d,presetJid:d?d:!1})),b("#login-form").children()[0].focus(),b("#login-form").submit(function(){var a=b("#username").val(),c=b("#password").val();if(Candy.Core.isAnonymousConnection())Candy.Core.connect(d,null,a);else{var e=Candy.Core.getUser()&&a.indexOf("@")<0?a+"@"+Strophe.getDomainFromJid(Candy.Core.getUser().getJid()):a;e.indexOf("@")<0&&!Candy.Core.getUser()?Candy.View.Pane.Chat.Modal.showLoginForm(b.i18n._("loginInvalid")):Candy.Core.connect(e,c)}return!1})},showEnterPasswordForm:function(c,d,e){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.PresenceError.enterPasswordForm,{roomName:d,_labelPassword:b.i18n._("labelPassword"),_label:e?e:b.i18n._("enterRoomPassword",[d]),_joinSubmit:b.i18n._("enterRoomPasswordSubmit")}),!0),b("#password").focus(),b("#enter-password-form").submit(function(){var d=b("#password").val();return a.Chat.Modal.hide(function(){Candy.Core.Action.Jabber.Room.Join(c,d)}),!1})},showNicknameConflictForm:function(c){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.PresenceError.nicknameConflictForm,{_labelNickname:b.i18n._("labelUsername"),_label:b.i18n._("nicknameConflict"),_loginSubmit:b.i18n._("loginSubmit")})),b("#nickname").focus(),b("#nickname-conflict-form").submit(function(){var d=b("#nickname").val();return a.Chat.Modal.hide(function(){Candy.Core.getUser().data.nick=d,Candy.Core.Action.Jabber.Room.Join(c)}),!1})},showError:function(c,d){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.PresenceError.displayError,{_error:b.i18n._(c,d)}),!0)}},Tooltip:{show:function(a,c){var d=b("#tooltip"),e=b(a.currentTarget);if(c||(c=e.attr("data-tooltip")),0===d.length){var f=Mustache.to_html(Candy.View.Template.Chat.tooltip);b("#chat-pane").append(f),d=b("#tooltip")}b("#context-menu").hide(),d.stop(!1,!0),d.children("div").html(c);var g=b("#candy").offset(),h=e.offset(),i=Candy.Util.getPosLeftAccordingToWindowBounds(d,h.left-g.left),j=Candy.Util.getPosTopAccordingToWindowBounds(d,h.top-g.top);d.css({left:i.px,top:j.px,backgroundPosition:i.backgroundPositionAlignment+" "+j.backgroundPositionAlignment}).fadeIn("fast"),e.mouseleave(function(a){a.stopPropagation(),b("#tooltip").stop(!1,!0).fadeOut("fast",function(){b(this).css({top:0,left:0})})})}},Context:{init:function(){if(0===b("#context-menu").length){var a=Mustache.to_html(Candy.View.Template.Chat.Context.menu);b("#chat-pane").append(a),b("#context-menu").mouseleave(function(){b(this).fadeOut("fast")})}},show:function(c,d,e){c=b(c);var f=a.Chat.rooms[d].id,g=b("#context-menu"),h=b("ul li",g);b("#tooltip").hide(),e||(e=Candy.Core.getUser()),h.remove();var i,j=this.getMenuLinks(d,e,c),k=function(a,c){return function(d){d.data.callback(d,a,c),b("#context-menu").hide()}};for(i in j)if(j.hasOwnProperty(i)){var l=j[i],m=Mustache.to_html(Candy.View.Template.Chat.Context.menulinks,{roomId:f,"class":l["class"],id:i,label:l.label});b("ul",g).append(m),b("#context-menu-"+i).bind("click",l,k(d,e))}if(i){var n=b("#candy").offset(),o=c.offset(),p=Candy.Util.getPosLeftAccordingToWindowBounds(g,o.left-n.left),q=Candy.Util.getPosTopAccordingToWindowBounds(g,o.top-n.top);return g.css({left:p.px,top:q.px,backgroundPosition:p.backgroundPositionAlignment+" "+q.backgroundPositionAlignment}),g.fadeIn("fast"),Candy.View.Event.Roster.afterContextMenu({roomJid:d,user:e,element:g}),!0}},getMenuLinks:function(c,d,e){var f,g=b.extend(this.initialMenuLinks(e),Candy.View.Event.Roster.onContextMenu({roomJid:c,user:d,elem:e}));for(f in g)g.hasOwnProperty(f)&&void 0!==g[f].requiredPermission&&!g[f].requiredPermission(d,a.Room.getUser(c),e)&&delete g[f];return g},initialMenuLinks:function(){return{"private":{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&Candy.Core.getRoom(Candy.View.getCurrent().roomJid)&&!Candy.Core.getUser().isInPrivacyList("ignore",a.getJid())},"class":"private",label:b.i18n._("privateActionLabel"),callback:function(a,c,d){b("#user-"+Candy.Util.jidToId(c)+"-"+Candy.Util.jidToId(d.getJid())).click()}},ignore:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&!Candy.Core.getUser().isInPrivacyList("ignore",a.getJid())},"class":"ignore",label:b.i18n._("ignoreActionLabel"),callback:function(a,b,c){Candy.View.Pane.Room.ignoreUser(b,c.getJid())}},unignore:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&Candy.Core.getUser().isInPrivacyList("ignore",a.getJid())},"class":"unignore",label:b.i18n._("unignoreActionLabel"),callback:function(a,b,c){Candy.View.Pane.Room.unignoreUser(b,c.getJid())}},kick:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&b.isModerator()&&!a.isModerator()},"class":"kick",label:b.i18n._("kickActionLabel"),callback:function(c,d,e){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.contextModalForm,{_label:b.i18n._("reason"),_submit:b.i18n._("kickActionLabel")}),!0),b("#context-modal-field").focus(),b("#context-modal-form").submit(function(){return Candy.Core.Action.Jabber.Room.Admin.UserAction(d,e.getJid(),"kick",b("#context-modal-field").val()),a.Chat.Modal.hide(),!1})}},ban:{requiredPermission:function(a,b){return b.getNick()!==a.getNick()&&b.isModerator()&&!a.isModerator()},"class":"ban",label:b.i18n._("banActionLabel"),callback:function(c,d,e){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.contextModalForm,{_label:b.i18n._("reason"),_submit:b.i18n._("banActionLabel")}),!0),b("#context-modal-field").focus(),b("#context-modal-form").submit(function(){return Candy.Core.Action.Jabber.Room.Admin.UserAction(d,e.getJid(),"ban",b("#context-modal-field").val()),a.Chat.Modal.hide(),!1})}},subject:{requiredPermission:function(a,b){return b.getNick()===a.getNick()&&b.isModerator()},"class":"subject",label:b.i18n._("setSubjectActionLabel"),callback:function(c,d){a.Chat.Modal.show(Mustache.to_html(Candy.View.Template.Chat.Context.contextModalForm,{_label:b.i18n._("subject"),_submit:b.i18n._("setSubjectActionLabel")}),!0),b("#context-modal-field").focus(),b("#context-modal-form").submit(function(c){Candy.Core.Action.Jabber.Room.Admin.SetSubject(d,b("#context-modal-field").val()),a.Chat.Modal.hide(),c.preventDefault()})}}}},showEmoticonsMenu:function(a){a=b(a);var c,d=a.offset(),e=b("#context-menu"),f=b("ul",e),g="";for(b("#tooltip").hide(),c=Candy.Util.Parser.emoticons.length-1;c>=0;c--)g='<img src="'+Candy.Util.Parser._emoticonPath+Candy.Util.Parser.emoticons[c].image+'" alt="'+Candy.Util.Parser.emoticons[c].plain+'" />'+g;f.html('<li class="emoticons">'+g+"</li>"),f.find("img").click(function(){var a=Candy.View.Pane.Room.getPane(Candy.View.getCurrent().roomJid,".message-form").children(".field"),c=a.val(),d=b(this).attr("alt")+" ";a.val(c?c+" "+d:d).focus()});var h=b("#candy").offset(),i=Candy.Util.getPosLeftAccordingToWindowBounds(e,d.left-h.left-e.width()+20),j=Candy.Util.getPosTopAccordingToWindowBounds(e,d.top-h.top-e.height()-35);return e.css({left:i.px,top:j.px,backgroundPosition:"bottom right"}),e.fadeIn("fast"),!0}}},a.Room={init:function(c,d,e){e=e||"groupchat",Candy.Util.isEmptyObject(a.Chat.rooms)&&a.Chat.Toolbar.show();var f=Candy.Util.jidToId(c);return a.Chat.rooms[c]={id:f,usercount:0,name:d,type:e,messageCount:0,scrollPosition:-1},b("#chat-rooms").append(Mustache.to_html(Candy.View.Template.Room.pane,{roomId:f,roomJid:c,roomType:e,form:{_messageSubmit:b.i18n._("messageSubmit")},roster:{_userOnline:b.i18n._("userOnline")}},{roster:Candy.View.Template.Roster.pane,messages:Candy.View.Template.Message.pane,form:Candy.View.Template.Room.form})),a.Chat.addTab(c,d,e),a.Room.getPane(c,".message-form").submit(a.Message.submit),Candy.View.Event.Room.onAdd({roomJid:c,type:e,element:a.Room.getPane(c)}),f},show:function(c){var d=a.Chat.rooms[c].id;b(".room-pane").each(function(){var e=b(this);e.attr("id")==="chat-room-"+d?(e.show(),Candy.View.getCurrent().roomJid=c,a.Chat.updateToolbar(c),a.Chat.setActiveTab(c),a.Chat.clearUnreadMessages(c),a.Room.setFocusToForm(c),a.Room.scrollToBottom(c),Candy.View.Event.Room.onShow({roomJid:c,element:e})):e.hasClass("roomtype-chat")&&(e.hide(),Candy.View.Event.Room.onHide({roomJid:c,element:e}))})},setSubject:function(c,d){var e=Mustache.to_html(Candy.View.Template.Room.subject,{subject:d,roomName:a.Chat.rooms[c].name,_roomSubject:b.i18n._("roomSubject"),time:Candy.Util.localizedTime((new Date).toGMTString())});a.Room.appendToMessagePane(c,e),a.Room.scrollToBottom(c),Candy.View.Event.Room.onSubjectChange({roomJid:c,element:a.Room.getPane(c),subject:d})},close:function(c){a.Chat.removeTab(c),a.Window.clearUnreadMessages(),a.Room.getPane(c).remove();var d=b("#chat-rooms").children();Candy.View.getCurrent().roomJid===c&&(Candy.View.getCurrent().roomJid=null,0===d.length?a.Chat.allTabsClosed():a.Room.show(d.last().attr("data-roomjid"))),delete a.Chat.rooms[c],Candy.View.Event.Room.onClose({roomJid:c})},appendToMessagePane:function(b,c){a.Room.getPane(b,".message-pane").append(c),a.Chat.rooms[b].messageCount++,a.Room.sliceMessagePane(b)},sliceMessagePane:function(b){if(a.Window.autoscroll){var c=Candy.View.getOptions().messages;a.Chat.rooms[b].messageCount>c.limit&&(a.Room.getPane(b,".message-pane").children().slice(0,2*c.remove).remove(),a.Chat.rooms[b].messageCount-=c.remove)}},scrollToBottom:function(b){a.Room.onScrollToBottom(b)},onScrollToBottom:function(b){var c=a.Room.getPane(b,".message-pane-wrapper");c.scrollTop(c.prop("scrollHeight"))},onScrollToStoredPosition:function(b){if(a.Chat.rooms[b].scrollPosition>-1){var c=a.Room.getPane(b,".message-pane-wrapper");c.scrollTop(a.Chat.rooms[b].scrollPosition),a.Chat.rooms[b].scrollPosition=-1}},setFocusToForm:function(b){var c=a.Room.getPane(b,".message-form");if(c)try{c.children(".field")[0].focus()}catch(d){}},setUser:function(c,d){a.Chat.rooms[c].user=d;var e=a.Room.getPane(c),f=b("#chat-pane");e.attr("data-userjid",d.getJid()),d.isModerator()?(d.getRole()===d.ROLE_MODERATOR&&f.addClass("role-moderator"),d.getAffiliation()===d.AFFILIATION_OWNER&&f.addClass("affiliation-owner")):f.removeClass("role-moderator affiliation-owner"),a.Chat.Context.init()},getUser:function(b){return a.Chat.rooms[b].user},ignoreUser:function(a,b){Candy.Core.Action.Jabber.Room.IgnoreUnignore(b),Candy.View.Pane.Room.addIgnoreIcon(a,b)},unignoreUser:function(a,b){Candy.Core.Action.Jabber.Room.IgnoreUnignore(b),Candy.View.Pane.Room.removeIgnoreIcon(a,b)},addIgnoreIcon:function(a,c){Candy.View.Pane.Chat.rooms[c]&&b("#user-"+Candy.View.Pane.Chat.rooms[c].id+"-"+Candy.Util.jidToId(c)).addClass("status-ignored"),Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)]&&b("#user-"+Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)].id+"-"+Candy.Util.jidToId(c)).addClass("status-ignored")},removeIgnoreIcon:function(a,c){Candy.View.Pane.Chat.rooms[c]&&b("#user-"+Candy.View.Pane.Chat.rooms[c].id+"-"+Candy.Util.jidToId(c)).removeClass("status-ignored"),Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)]&&b("#user-"+Candy.View.Pane.Chat.rooms[Strophe.getBareJidFromJid(a)].id+"-"+Candy.Util.jidToId(c)).removeClass("status-ignored")},getPane:function(c,d){return a.Chat.rooms[c]?d?a.Chat.rooms[c]["pane-"+d]?a.Chat.rooms[c]["pane-"+d]:(a.Chat.rooms[c]["pane-"+d]=b("#chat-room-"+a.Chat.rooms[c].id).find(d),a.Chat.rooms[c]["pane-"+d]):b("#chat-room-"+a.Chat.rooms[c].id):void 0}},a.PrivateRoom={open:function(c,d,e,f){var g=f?Candy.Core.getUser():a.Room.getUser(Strophe.getBareJidFromJid(c));return Candy.Core.getUser().isInPrivacyList("ignore",c)?!1:(a.Chat.rooms[c]||a.Room.init(c,d,"chat"),e&&a.Room.show(c),a.Roster.update(c,new Candy.Core.ChatUser(c,d),"join",g),a.Roster.update(c,g,"join",g),a.PrivateRoom.setStatus(c,"join"),f&&a.Chat.infoMessage(c,b.i18n._("presenceUnknownWarningSubject"),b.i18n._("presenceUnknownWarning")),Candy.View.Event.Room.onAdd({roomJid:c,type:"chat",element:a.Room.getPane(c)}),void 0)},setStatus:function(b,c){var d=a.Room.getPane(b,".message-form");"join"===c?(a.Chat.getTab(b).addClass("online").removeClass("offline"),d.children(".field").removeAttr("disabled"),d.children(".submit").removeAttr("disabled"),a.Chat.getTab(b)):(a.Chat.getTab(b).addClass("offline").removeClass("online"),d.children(".field").attr("disabled",!0),d.children(".submit").attr("disabled",!0))}},a.Roster={update:function(c,d,e,f){var g=a.Chat.rooms[c].id,h=Candy.Util.jidToId(d.getJid()),i=-1;if("join"===e){i=1;var j=Mustache.to_html(Candy.View.Template.Roster.user,{roomId:g,userId:h,userJid:d.getJid(),nick:d.getNick(),displayNick:Candy.Util.crop(d.getNick(),Candy.View.getOptions().crop.roster.nickname),role:d.getRole(),affiliation:d.getAffiliation(),me:void 0!==f&&d.getNick()===f.getNick(),tooltipRole:b.i18n._("tooltipRole"),tooltipIgnored:b.i18n._("tooltipIgnored")}),k=b("#user-"+g+"-"+h);if(k.length<1){var l=!1,m=a.Room.getPane(c,".roster-pane");if(m.children().length>0){var n=d.getNick().toUpperCase();m.children().each(function(){var a=b(this);return a.attr("data-nick").toUpperCase()>n?(a.before(j),l=!0,!1):!0})}l||m.append(j),a.Roster.joinAnimation("user-"+g+"-"+h),void 0!==f&&d.getNick()!==f.getNick()&&a.Room.getUser(c)&&("chat"===a.Chat.rooms[c].type?a.Chat.onInfoMessage(c,b.i18n._("userJoinedRoom",[d.getNick()])):a.Chat.infoMessage(c,b.i18n._("userJoinedRoom",[d.getNick()])))}else i=0,k.replaceWith(j),b("#user-"+g+"-"+h).css({opacity:1}).show();void 0!==f&&f.getNick()===d.getNick()?a.Room.setUser(c,d):b("#user-"+g+"-"+h).click(a.Roster.userClick),b("#user-"+g+"-"+h+" .context").click(function(b){a.Chat.Context.show(b.currentTarget,c,d),b.stopPropagation()}),void 0!==f&&f.isInPrivacyList("ignore",d.getJid())&&Candy.View.Pane.Room.addIgnoreIcon(c,d.getJid())}else"leave"===e?(a.Roster.leaveAnimation("user-"+g+"-"+h),"chat"===a.Chat.rooms[c].type?a.Chat.onInfoMessage(c,b.i18n._("userLeftRoom",[d.getNick()])):a.Chat.infoMessage(c,b.i18n._("userLeftRoom",[d.getNick()]))):"kick"===e?(a.Roster.leaveAnimation("user-"+g+"-"+h),a.Chat.onInfoMessage(c,b.i18n._("userHasBeenKickedFromRoom",[d.getNick()]))):"ban"===e&&(a.Roster.leaveAnimation("user-"+g+"-"+h),a.Chat.onInfoMessage(c,b.i18n._("userHasBeenBannedFromRoom",[d.getNick()])));Candy.View.Pane.Chat.rooms[c].usercount+=i,c===Candy.View.getCurrent().roomJid&&Candy.View.Pane.Chat.Toolbar.updateUsercount(Candy.View.Pane.Chat.rooms[_chatRoom].usercount),Candy.View.Event.Roster.onUpdate({roomJid:c,user:d,action:e,element:b("#user-"+g+"-"+h)})},userClick:function(){var c=b(this);b(".user.active").removeClass("active"),c.addClass("active"),b("#chat-toolbar").addClass("active"),a.PrivateRoom.open(c.attr("data-jid"),c.attr("data-nick"),!0),a.Room.getPane(c.attr("data-jid"),".message-pane-wrapper").css({display:"block"}),a.Room.getPane(c.attr("data-jid"),".message-form").css({display:"block"})},joinAnimation:function(a){b("#"+a).stop(!0).slideDown("normal",function(){b(this).animate({opacity:1})})},leaveAnimation:function(a){b("#"+a).stop(!0).attr("id","#"+a+"-leaving").animate({opacity:0},{complete:function(){b(this).slideUp("normal",function(){b(this).remove()})}})}},a.Message={submit:function(c){var d=Candy.View.Pane.Chat.rooms[Candy.View.getCurrent().roomJid].type,e=b(this).children(".field").val().substring(0,Candy.View.getOptions().crop.message.body);e=Candy.View.Event.Message.beforeSend(e),Candy.Core.Action.Jabber.Room.Message(Candy.View.getCurrent().roomJid,e,d),"chat"===d&&e&&a.Message.show(Candy.View.getCurrent().roomJid,a.Room.getUser(Candy.View.getCurrent().roomJid).getNick(),e),b(this).children(".field").val("").focus(),c.preventDefault()},show:function(b,c,d,e){if(d=Candy.Util.Parser.all(d.substring(0,Candy.View.getOptions().crop.message.body)),d=Candy.View.Event.Message.beforeShow({roomJid:b,nick:c,message:d})){var f=Mustache.to_html(Candy.View.Template.Message.item,{name:c,displayName:Candy.Util.crop(c,Candy.View.getOptions().crop.message.nickname),message:d,me:c===Candy.Core.getUser().getNick(),time:Candy.Util.formatAMPM(e?new Date(e):new Date)});a.Room.appendToMessagePane(b,f);var g=a.Room.getPane(b,".message-pane").children().last();g.find("a.name").click(function(d){d.preventDefault(),c!==a.Room.getUser(Candy.View.getCurrent().roomJid).getNick()&&Candy.Core.getRoom(b).getRoster().get(b+"/"+c)&&Candy.View.Pane.PrivateRoom.open(b+"/"+c,c,!0)}),Candy.View.getCurrent().roomJid===b&&a.Window.hasFocus()||(a.Chat.increaseUnreadMessages(b),"chat"!==Candy.View.Pane.Chat.rooms[b].type||a.Window.hasFocus()||a.Chat.Toolbar.playSound()),Candy.View.getCurrent().roomJid===b&&a.Room.scrollToBottom(b),Candy.View.Event.Message.onShow({roomJid:b,element:g,nick:c,message:d})}}},a}(Candy.View.Pane||{},jQuery),Candy.View.Template=function(a){return a.Window={unreadmessages:"({{count}}) {{title}}"},a.Chat={pane:'<div id="chat-pane">{{> tabs}}{{> toolbar}}{{> rooms}}</div>{{> modal}}',rooms:'<div id="chat-rooms" class="rooms"></div>',tabs:'<ul id="chat-tabs"></ul>',tab:'<li class="roomtype-{{roomType}}" data-roomjid="{{roomJid}}" data-roomtype="{{roomType}}"><a href="#" class="label">{{#privateUserChat}}@{{/privateUserChat}}{{name}}</a><small class="{{countClass}}"></small></li>',modal:'<div id="chat-modal"><a id="admin-message-cancel" class="close" href="#"></a><span id="chat-modal-body"></span><img src="{{resourcesPath}}img/modal-spinner.gif" id="chat-modal-spinner" /></div><div id="chat-modal-overlay"></div>',adminMessage:'<dt><span class="label">{{sender}}</span> ({{time}}):</dt><dd class="adminmessage">{{subject}} {{message}}</dd>',infoMessage:'<dt>{{time}}</dt><dd class="infomessage">{{subject}} {{message}}</dd>',toolbar:'<ul id="chat-toolbar"><li id="emoticons-icon" data-tooltip="{{tooltipEmoticons}}"></li></ul>',soundcontrol:'<script type="text/javascript">var audioplayerListener = new Object(); audioplayerListener.onInit = function() { };</script><object id="chat-sound-player" type="application/x-shockwave-flash" data="{{resourcesPath}}audioplayer.swf" width="0" height="0"><param name="movie" value="{{resourcesPath}}audioplayer.swf" /><param name="AllowScriptAccess" value="always" /><param name="FlashVars" value="listener=audioplayerListener&amp;mp3={{resourcesPath}}notify.mp3" /></object>',Context:{menu:'<div id="context-menu"><ul></ul></div>',menulinks:'<li class="{{class}}" id="context-menu-{{id}}">{{label}}</li>',contextModalForm:'<form action="#" id="context-modal-form"><label for="context-modal-label">{{_label}}</label><input type="text" name="contextModalField" id="context-modal-field" /><input type="submit" class="button" name="send" value="{{_submit}}" /></form>',adminMessageReason:'<a id="admin-message-cancel" class="close" href="#"></a><p>{{_action}}</p>{{#reason}}<p>{{_reason}}</p>{{/reason}}'},tooltip:'<div id="tooltip"><div></div></div>'},a.Room={pane:'<div class="room-pane roomtype-{{roomType}}" id="chat-room-{{roomId}}" data-roomjid="{{roomJid}}" data-roomtype="{{roomType}}">{{> roster}}{{> messages}}{{> form}}</div>',subject:'<dt>{{time}}</dt><dd class="subject"><span class="label">{{roomName}}</span>{{_roomSubject}} {{subject}}</dd>',form:'<form method="post" class="message-form"><input name="message" class="field" type="text" autocomplete="off" maxlength="1000" /><input type="submit" class="submit" name="submit" value="{{_messageSubmit}}" /></form>',toolbar:""},a.Roster={pane:'<div class="roster-pane"></div>',user:'<div class="user role-{{role}} affiliation-{{affiliation}}{{#me}} me{{/me}}" id="user-{{roomId}}-{{userId}}" data-jid="{{userJid}}" data-nick="{{nick}}" data-role="{{role}}" data-affiliation="{{affiliation}}"><div class="label">{{displayNick}}</div><small class="chat-unread"></small><ul><li class="context" id="context-{{roomId}}-{{userId}}"></li><li class="role role-{{role}} affiliation-{{affiliation}}" data-tooltip="{{tooltipRole}}"></li><li class="ignore" data-tooltip="{{tooltipIgnored}}"></li></ul></div>'},a.Message={pane:'<div class="message-pane-wrapper"><dl class="message-pane"></dl></div>',item:'<dt{{#me}} class="me"{{/me}}><a href="#" class="name">{{displayName}}</a> ({{time}}):</dt><dd><span class="label"></span>{{{message}}}</dd>'},a.Login={form:'<form method="post" id="login-form" class="login-form">{{#displayUsername}}<label for="username">{{_labelUsername}}</label><input type="text" id="username" name="username"/>{{/displayUsername}}{{#presetJid}}<input type="hidden" id="username" name="username" value="{{presetJid}}"/>{{/presetJid}}{{#displayPassword}}<label for="password">{{_labelPassword}}</label><input type="password" id="password" name="password" />{{/displayPassword}}<input type="submit" class="button" value="{{_loginSubmit}}" /></form>'},a.PresenceError={enterPasswordForm:'<strong>{{_label}}</strong><form method="post" id="enter-password-form" class="enter-password-form"><label for="password">{{_labelPassword}}</label><input type="password" id="password" name="password" /><input type="submit" class="button" value="{{_joinSubmit}}" /></form>',nicknameConflictForm:'<strong>{{_label}}</strong><form method="post" id="nickname-conflict-form" class="nickname-conflict-form"><label for="nickname">{{_labelNickname}}</label><input type="text" id="nickname" name="nickname" /><input type="submit" class="button" value="{{_loginSubmit}}" /></form>',displayError:"<strong>{{_error}}</strong>"},a
}(Candy.View.Template||{}),Candy.View.Translation={en:{status:"Status: %s",statusConnecting:"Connecting...",statusConnected:"Connected",statusDisconnecting:"Disconnecting...",statusDisconnected:"Disconnected",statusAuthfail:"Authentication failed",roomSubject:"Subject:",messageSubmit:"Send",labelUsername:"Username:",labelPassword:"Password:",loginSubmit:"Login",loginInvalid:"Invalid JID",reason:"Reason:",subject:"Subject:",reasonWas:"Reason was: %s.",kickActionLabel:"Kick",youHaveBeenKickedBy:"You have been kicked from %2$s by %1$s",youHaveBeenKicked:"You have been kicked from %s",banActionLabel:"Ban",youHaveBeenBannedBy:"You have been banned from %1$s by %2$s",youHaveBeenBanned:"You have been banned from %s",privateActionLabel:"Private chat",ignoreActionLabel:"Ignore",unignoreActionLabel:"Unignore",setSubjectActionLabel:"Change Subject",administratorMessageSubject:"Administrator",userJoinedRoom:"%s joined the room.",userLeftRoom:"%s left the room.",userHasBeenKickedFromRoom:"%s has been kicked from the room.",userHasBeenBannedFromRoom:"%s has been banned from the room.",presenceUnknownWarningSubject:"Notice:",presenceUnknownWarning:"This user might be offline. We can't track his presence.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"You ignore this user",tooltipEmoticons:"Emoticons",tooltipSound:"Play sound for new private messages",tooltipAutoscroll:"Autoscroll",tooltipStatusmessage:"Display status messages",tooltipAdministration:"Room Administration",tooltipUsercount:"Room Occupants",enterRoomPassword:'Room "%s" is password protected.',enterRoomPasswordSubmit:"Join room",passwordEnteredInvalid:'Invalid password for room "%s".',nicknameConflict:"Username already in use. Please choose another one.",errorMembersOnly:'You can\'t join room "%s": Insufficient rights.',errorMaxOccupantsReached:'You can\'t join room "%s": Too many occupants.',antiSpamMessage:"Please do not spam. You have been blocked for a short-time."},de:{status:"Status: %s",statusConnecting:"Verbinden...",statusConnected:"Verbunden",statusDisconnecting:"Verbindung trennen...",statusDisconnected:"Verbindung getrennt",statusAuthfail:"Authentifizierung fehlgeschlagen",roomSubject:"Thema:",messageSubmit:"Senden",labelUsername:"Benutzername:",labelPassword:"Passwort:",loginSubmit:"Anmelden",loginInvalid:"Ungltige JID",reason:"Begrndung:",subject:"Titel:",reasonWas:"Begrndung: %s.",kickActionLabel:"Kick",youHaveBeenKickedBy:"Du wurdest soeben aus dem Raum %1$s gekickt (%2$s)",youHaveBeenKicked:"Du wurdest soeben aus dem Raum %s gekickt",banActionLabel:"Ban",youHaveBeenBannedBy:"Du wurdest soeben aus dem Raum %1$s verbannt (%2$s)",youHaveBeenBanned:"Du wurdest soeben aus dem Raum %s verbannt",privateActionLabel:"Privater Chat",ignoreActionLabel:"Ignorieren",unignoreActionLabel:"Nicht mehr ignorieren",setSubjectActionLabel:"Thema ndern",administratorMessageSubject:"Administrator",userJoinedRoom:"%s hat soeben den Raum betreten.",userLeftRoom:"%s hat soeben den Raum verlassen.",userHasBeenKickedFromRoom:"%s ist aus dem Raum gekickt worden.",userHasBeenBannedFromRoom:"%s ist aus dem Raum verbannt worden.",presenceUnknownWarningSubject:"Hinweis:",presenceUnknownWarning:"Dieser Benutzer knnte bereits abgemeldet sein. Wir knnen seine Anwesenheit nicht verfolgen.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"Du ignorierst diesen Benutzer",tooltipEmoticons:"Smileys",tooltipSound:"Ton abspielen bei neuen privaten Nachrichten",tooltipAutoscroll:"Autoscroll",tooltipStatusmessage:"Statusnachrichten anzeigen",tooltipAdministration:"Raum Administration",tooltipUsercount:"Anzahl Benutzer im Raum",enterRoomPassword:'Raum "%s" ist durch ein Passwort geschtzt.',enterRoomPasswordSubmit:"Raum betreten",passwordEnteredInvalid:'Inkorrektes Passwort fr Raum "%s".',nicknameConflict:"Der Benutzername wird bereits verwendet. Bitte whle einen anderen.",errorMembersOnly:'Du kannst den Raum "%s" nicht betreten: Ungengende Rechte.',errorMaxOccupantsReached:'Du kannst den Raum "%s" nicht betreten: Benutzerlimit erreicht.',antiSpamMessage:"Bitte nicht spammen. Du wurdest fr eine kurze Zeit blockiert."},fr:{status:"Status: %s",statusConnecting:"Connecter...",statusConnected:"Connect.",statusDisconnecting:"Dconnecter....",statusDisconnected:"Dconnect.",statusAuthfail:"Authentification a chou",roomSubject:"Sujet:",messageSubmit:"Envoyer",labelUsername:"Nom d'utilisateur:",labelPassword:"Mot de passe:",loginSubmit:"Inscription",loginInvalid:"JID invalide",reason:"Justification:",subject:"Titre:",reasonWas:"Justification: %s.",kickActionLabel:"Kick",youHaveBeenKickedBy:"Tu as t expuls de le salon %1$s (%2$s)",youHaveBeenKicked:"Tu as t expuls de le salon %s",banActionLabel:"Ban",youHaveBeenBannedBy:"Tu as t banni de le salon %1$s (%2$s)",youHaveBeenBanned:"Tu as t banni de le salon %s",privateActionLabel:"Chat priv",ignoreActionLabel:"Ignorer",unignoreActionLabel:"Ne plus ignorer",setSubjectActionLabel:"Changer le sujet",administratorMessageSubject:"Administrateur",userJoinedRoom:"%s vient d'entrer dans le salon.",userLeftRoom:"%s vient de quitter le salon.",userHasBeenKickedFromRoom:"%s a t expuls du salon.",userHasBeenBannedFromRoom:"%s a t banni du salon.",presenceUnknownWarningSubject:"Note:",presenceUnknownWarning:"Cet utilisateur n'est malheureusement plus connect, le message ne sera pas envoy.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Modrateur",tooltipIgnored:"Tu ignores cette personne",tooltipEmoticons:"Smileys",tooltipSound:"Jouer un son lorsque tu reois de nouveaux messages privs",tooltipAutoscroll:"Auto-defilement",tooltipStatusmessage:"Messages d'tat",tooltipAdministration:"Administrer le salon",tooltipUsercount:"Nombre d'utilisateurs dans le salon",enterRoomPassword:'Le salon "%s" est protg par un mot de passe.',enterRoomPasswordSubmit:"Entrer dans le salon",passwordEnteredInvalid:'Le mot de passe four le salon "%s" est invalide.',nicknameConflict:"Le nom d'utilisateur est dj utilis. Choisi un autre.",errorMembersOnly:'Tu ne peut pas entrer de le salon "%s": droits insuffisants.',errorMaxOccupantsReached:'Tu ne peut pas entrer de le salon "%s": Limite d\'utilisateur atteint.',antiSpamMessage:"S'il te plat, pas de spam. Tu as t bloqu pendant une courte priode.."},nl:{status:"Status: %s",statusConnecting:"Verbinding maken...",statusConnected:"Verbinding is gereed",statusDisconnecting:"Verbinding verbreken...",statusDisconnected:"Verbinding is verbroken",statusAuthfail:"Authenticatie is mislukt",roomSubject:"Onderwerp:",messageSubmit:"Verstuur",labelUsername:"Gebruikersnaam:",labelPassword:"Wachtwoord:",loginSubmit:"Inloggen",loginInvalid:"JID is onjuist",reason:"Reden:",subject:"Onderwerp:",reasonWas:"De reden was: %s.",kickActionLabel:"Verwijderen",youHaveBeenKickedBy:"Je bent verwijderd van %1$s door %2$s",youHaveBeenKicked:"Je bent verwijderd van %s",banActionLabel:"Blokkeren",youHaveBeenBannedBy:"Je bent geblokkeerd van %1$s door %2$s",youHaveBeenBanned:"Je bent geblokkeerd van %s",privateActionLabel:"Prive gesprek",ignoreActionLabel:"Negeren",unignoreActionLabel:"Niet negeren",setSubjectActionLabel:"Onderwerp wijzigen",administratorMessageSubject:"Beheerder",userJoinedRoom:"%s komt de chat binnen.",userLeftRoom:"%s heeft de chat verlaten.",userHasBeenKickedFromRoom:"%s is verwijderd.",userHasBeenBannedFromRoom:"%s is geblokkeerd.",presenceUnknownWarningSubject:"Mededeling:",presenceUnknownWarning:"Deze gebruiker is waarschijnlijk offline, we kunnen zijn/haar aanwezigheid niet vaststellen.",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderator",tooltipIgnored:"Je negeert deze gebruiker",tooltipEmoticons:"Emotie-iconen",tooltipSound:"Speel een geluid af bij nieuwe priv berichten.",tooltipAutoscroll:"Automatisch scrollen",tooltipStatusmessage:"Statusberichten weergeven",tooltipAdministration:"Instellingen",tooltipUsercount:"Gebruikers",enterRoomPassword:'De Chatroom "%s" is met een wachtwoord beveiligd.',enterRoomPasswordSubmit:"Ga naar Chatroom",passwordEnteredInvalid:'Het wachtwoord voor de Chatroom "%s" is onjuist.',nicknameConflict:"De gebruikersnaam is reeds in gebruik. Probeer a.u.b. een andere gebruikersnaam.",errorMembersOnly:'Je kunt niet deelnemen aan de Chatroom "%s": Je hebt onvoldoende rechten.',errorMaxOccupantsReached:'Je kunt niet deelnemen aan de Chatroom "%s": Het maximum aantal gebruikers is bereikt.',antiSpamMessage:"Het is niet toegestaan om veel berichten naar de server te versturen. Je bent voor een korte periode geblokkeerd."},es:{status:"Estado: %s",statusConnecting:"Conectando...",statusConnected:"Conectado",statusDisconnecting:"Desconectando...",statusDisconnected:"Desconectado",statusAuthfail:"Fall la autenticacin",roomSubject:"Asunto:",messageSubmit:"Enviar",labelUsername:"Usuario:",labelPassword:"Clave:",loginSubmit:"Entrar",loginInvalid:"JID no vlido",reason:"Razn:",subject:"Asunto:",reasonWas:"La razn fue: %s.",kickActionLabel:"Expulsar",youHaveBeenKickedBy:"Has sido expulsado de %1$s por %2$s",youHaveBeenKicked:"Has sido expulsado de %s",banActionLabel:"Prohibir",youHaveBeenBannedBy:"Has sido expulsado permanentemente de %1$s por %2$s",youHaveBeenBanned:"Has sido expulsado permanentemente de %s",privateActionLabel:"Chat privado",ignoreActionLabel:"Ignorar",unignoreActionLabel:"No ignorar",setSubjectActionLabel:"Cambiar asunto",administratorMessageSubject:"Administrador",userJoinedRoom:"%s se ha unido a la sala.",userLeftRoom:"%s ha dejado la sala.",userHasBeenKickedFromRoom:"%s ha sido expulsado de la sala.",userHasBeenBannedFromRoom:"%s ha sido expulsado permanentemente de la sala.",presenceUnknownWarningSubject:"Atencin:",presenceUnknownWarning:"ste usuario podra estar desconectado..",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"Moderador",tooltipIgnored:"Ignoras a ste usuario",tooltipEmoticons:"Emoticonos",tooltipSound:"Reproducir un sonido para nuevos mensajes privados",tooltipAutoscroll:"Desplazamiento automtico",tooltipStatusmessage:"Mostrar mensajes de estado",tooltipAdministration:"Administracin de la sala",tooltipUsercount:"Usuarios en la sala",enterRoomPassword:'La sala "%s" est protegida mediante contrasea.',enterRoomPasswordSubmit:"Unirse a la sala",passwordEnteredInvalid:'Contrasea incorrecta para la sala "%s".',nicknameConflict:"El nombre de usuario ya est siendo utilizado. Por favor elija otro.",errorMembersOnly:'No se puede unir a la sala "%s": no tiene privilegios suficientes.',errorMaxOccupantsReached:'No se puede unir a la sala "%s": demasiados participantes.',antiSpamMessage:"Por favor, no hagas spam. Has sido bloqueado temporalmente."},cn:{status:": %s",statusConnecting:"...",statusConnected:"",statusDisconnecting:"...",statusDisconnected:"",statusAuthfail:"",roomSubject:":",messageSubmit:"",labelUsername:":",labelPassword:":",loginSubmit:"",loginInvalid:"",reason:":",subject:":",reasonWas:": %s.",kickActionLabel:"",youHaveBeenKickedBy:" %1$s  %2$s ",banActionLabel:"",youHaveBeenBannedBy:" %1$s  %2$s ",privateActionLabel:"",ignoreActionLabel:"",unignoreActionLabel:"",setSubjectActionLabel:"",administratorMessageSubject:"",userJoinedRoom:"%s ",userLeftRoom:"%s ",userHasBeenKickedFromRoom:"%s ",userHasBeenBannedFromRoom:"%s ",presenceUnknownWarningSubject:":",presenceUnknownWarning:"",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"",tooltipIgnored:"",tooltipEmoticons:"",tooltipSound:"",tooltipAutoscroll:"",tooltipStatusmessage:"",tooltipAdministration:"",tooltipUsercount:"",enterRoomPassword:' "%s" .',enterRoomPasswordSubmit:"",passwordEnteredInvalid:' "%s" ',nicknameConflict:"",errorMembersOnly:' "%s" ',errorMaxOccupantsReached:' "%s" ',antiSpamMessage:" "},ja:{status:": %s",statusConnecting:"",statusConnected:"",statusDisconnecting:"",statusDisconnected:"",statusAuthfail:"",roomSubject:"",messageSubmit:"",labelUsername:"",labelPassword:"",loginSubmit:"",loginInvalid:"",reason:"",subject:"",reasonWas:": %s",kickActionLabel:"",youHaveBeenKickedBy:"%2$s%1$s",youHaveBeenKicked:"%s",banActionLabel:"",youHaveBeenBannedBy:"%2$s%1$s",youHaveBeenBanned:"%s",privateActionLabel:"",ignoreActionLabel:"",unignoreActionLabel:"",setSubjectActionLabel:"",administratorMessageSubject:"",userJoinedRoom:"%s",userLeftRoom:"%s",userHasBeenKickedFromRoom:"%s",userHasBeenBannedFromRoom:"%s",presenceUnknownWarningSubject:"",presenceUnknownWarning:"",dateFormat:"dd.mm.yyyy",timeFormat:"HH:MM:ss",tooltipRole:"",tooltipIgnored:"",tooltipEmoticons:"",tooltipSound:"",tooltipAutoscroll:"",tooltipStatusmessage:"",tooltipAdministration:"",tooltipUsercount:"",enterRoomPassword:'"%s"',enterRoomPasswordSubmit:"",passwordEnteredInvalid:'"%s"',nicknameConflict:"",errorMembersOnly:'"%s": ',errorMaxOccupantsReached:'"%s": ',antiSpamMessage:""}},!function(a){var b={},c={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};a.fn.bxSlider=function(d){if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).bxSlider(d)}),this;var e={},f=this;b.el=this;var g=a(window).width(),h=a(window).height(),j=function(){e.settings=a.extend({},c,d),e.settings.slideWidth=parseInt(e.settings.slideWidth),e.children=f.children(e.settings.slideSelector),e.children.length<e.settings.minSlides&&(e.settings.minSlides=e.children.length),e.children.length<e.settings.maxSlides&&(e.settings.maxSlides=e.children.length),e.settings.randomStart&&(e.settings.startSlide=Math.floor(Math.random()*e.children.length)),e.active={index:e.settings.startSlide},e.carousel=e.settings.minSlides>1||e.settings.maxSlides>1,e.carousel&&(e.settings.preloadImages="all"),e.minThreshold=e.settings.minSlides*e.settings.slideWidth+(e.settings.minSlides-1)*e.settings.slideMargin,e.maxThreshold=e.settings.maxSlides*e.settings.slideWidth+(e.settings.maxSlides-1)*e.settings.slideMargin,e.working=!1,e.controls={},e.interval=null,e.animProp="vertical"==e.settings.mode?"top":"left",e.usingCSS=e.settings.useCSS&&"fade"!=e.settings.mode&&function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return e.cssPrefix=b[c].replace("Perspective","").toLowerCase(),e.animProp="-"+e.cssPrefix+"-transform",!0;return!1}(),"vertical"==e.settings.mode&&(e.settings.maxSlides=e.settings.minSlides),f.data("origStyle",f.attr("style")),f.children(e.settings.slideSelector).each(function(){a(this).data("origStyle",a(this).attr("style"))}),k()},k=function(){f.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),e.viewport=f.parent(),e.loader=a('<div class="bx-loading" />'),e.viewport.prepend(e.loader),f.css({width:"horizontal"==e.settings.mode?100*e.children.length+215+"%":"auto",position:"relative"}),e.usingCSS&&e.settings.easing?f.css("-"+e.cssPrefix+"-transition-timing-function",e.settings.easing):e.settings.easing||(e.settings.easing="swing"),q(),e.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),e.viewport.parent().css({maxWidth:o()}),e.settings.pager||e.viewport.parent().css({margin:"0 auto 0px"}),e.children.css({"float":"horizontal"==e.settings.mode?"left":"none",listStyle:"none",position:"relative"}),e.children.css("width",p()),"horizontal"==e.settings.mode&&e.settings.slideMargin>0&&e.children.css("marginRight",e.settings.slideMargin),"vertical"==e.settings.mode&&e.settings.slideMargin>0&&e.children.css("marginBottom",e.settings.slideMargin),"fade"==e.settings.mode&&(e.children.css({position:"absolute",zIndex:0,display:"none"}),e.children.eq(e.settings.startSlide).css({zIndex:50,display:"block"})),e.controls.el=a('<div class="bx-controls" />'),e.settings.captions&&z(),e.active.last=e.settings.startSlide==r()-1,e.settings.video&&f.fitVids();var b=e.children.eq(e.settings.startSlide);"all"==e.settings.preloadImages&&(b=e.children),e.settings.ticker?e.settings.pager=!1:(e.settings.pager&&w(),e.settings.controls&&x(),e.settings.auto&&e.settings.autoControls&&y(),(e.settings.controls||e.settings.autoControls||e.settings.pager)&&e.viewport.after(e.controls.el)),l(b,m)},l=function(b,c){var d=b.find("img, iframe").length;if(0==d)return c(),void 0;var e=0;b.find("img, iframe").each(function(){a(this).one("load",function(){++e==d&&c()}).each(function(){this.complete&&a(this).load()})})},m=function(){if(e.settings.infiniteLoop&&"fade"!=e.settings.mode&&!e.settings.ticker){var b="vertical"==e.settings.mode?e.settings.minSlides:e.settings.maxSlides,c=e.children.slice(0,b).clone().addClass("bx-clone"),d=e.children.slice(-b).clone().addClass("bx-clone");f.append(c).prepend(d)}e.loader.remove(),t(),"vertical"==e.settings.mode&&(e.settings.adaptiveHeight=!0),e.viewport.height(n()),f.redrawSlider(),e.settings.onSliderLoad(e.active.index),e.initialized=!0,e.settings.responsive&&a(window).bind("resize",Q),e.settings.auto&&e.settings.autoStart&&J(),e.settings.ticker&&K(),e.settings.pager&&F(e.settings.startSlide),e.settings.controls&&I(),e.settings.touchEnabled&&!e.settings.ticker&&M()},n=function(){var b=0,c=a();if("vertical"==e.settings.mode||e.settings.adaptiveHeight)if(e.carousel){var d=1==e.settings.moveSlides?e.active.index:e.active.index*s();for(c=e.children.eq(d),i=1;i<=e.settings.maxSlides-1;i++)c=d+i>=e.children.length?c.add(e.children.eq(i-1)):c.add(e.children.eq(d+i))}else c=e.children.eq(e.active.index);else c=e.children;return"vertical"==e.settings.mode?(c.each(function(){b+=a(this).outerHeight()}),e.settings.slideMargin>0&&(b+=e.settings.slideMargin*(e.settings.minSlides-1))):b=Math.max.apply(Math,c.map(function(){return a(this).outerHeight(!1)}).get()),b},o=function(){var a="100%";return e.settings.slideWidth>0&&(a="horizontal"==e.settings.mode?e.settings.maxSlides*e.settings.slideWidth+(e.settings.maxSlides-1)*e.settings.slideMargin:e.settings.slideWidth),a},p=function(){var a=e.settings.slideWidth,b=e.viewport.width();return 0==e.settings.slideWidth||e.settings.slideWidth>b&&!e.carousel||"vertical"==e.settings.mode?a=b:e.settings.maxSlides>1&&"horizontal"==e.settings.mode&&(b>e.maxThreshold||b<e.minThreshold&&(a=(b-e.settings.slideMargin*(e.settings.minSlides-1))/e.settings.minSlides)),a},q=function(){var a=1;if("horizontal"==e.settings.mode&&e.settings.slideWidth>0)if(e.viewport.width()<e.minThreshold)a=e.settings.minSlides;else if(e.viewport.width()>e.maxThreshold)a=e.settings.maxSlides;else{var b=e.children.first().width();a=Math.floor(e.viewport.width()/b)}else"vertical"==e.settings.mode&&(a=e.settings.minSlides);return a},r=function(){var a=0;if(e.settings.moveSlides>0)if(e.settings.infiniteLoop)a=e.children.length/s();else for(var b=0,c=0;b<e.children.length;)++a,b=c+q(),c+=e.settings.moveSlides<=q()?e.settings.moveSlides:q();else a=Math.ceil(e.children.length/q());return a},s=function(){return e.settings.moveSlides>0&&e.settings.moveSlides<=q()?e.settings.moveSlides:q()},t=function(){if(e.children.length>e.settings.maxSlides&&e.active.last&&!e.settings.infiniteLoop){if("horizontal"==e.settings.mode){var a=e.children.last(),b=a.position();u(-(b.left-(e.viewport.width()-a.width())),"reset",0)}else if("vertical"==e.settings.mode){var c=e.children.length-e.settings.minSlides,b=e.children.eq(c).position();u(-b.top,"reset",0)}}else{var b=e.children.eq(e.active.index*s()).position();e.active.index==r()-1&&(e.active.last=!0),void 0!=b&&("horizontal"==e.settings.mode?u(-b.left,"reset",0):"vertical"==e.settings.mode&&u(-b.top,"reset",0))}},u=function(a,b,c,d){if(e.usingCSS){var g="vertical"==e.settings.mode?"translate3d(0, "+a+"px, 0)":"translate3d("+a+"px, 0, 0)";f.css("-"+e.cssPrefix+"-transition-duration",c/1e3+"s"),"slide"==b?(f.css(e.animProp,g),f.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),G()})):"reset"==b?f.css(e.animProp,g):"ticker"==b&&(f.css("-"+e.cssPrefix+"-transition-timing-function","linear"),f.css(e.animProp,g),f.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),u(d.resetValue,"reset",0),L()}))}else{var h={};h[e.animProp]=a,"slide"==b?f.animate(h,c,e.settings.easing,function(){G()}):"reset"==b?f.css(e.animProp,a):"ticker"==b&&f.animate(h,speed,"linear",function(){u(d.resetValue,"reset",0),L()})}},v=function(){for(var b="",c=r(),d=0;c>d;d++){var f="";e.settings.buildPager&&a.isFunction(e.settings.buildPager)?(f=e.settings.buildPager(d),e.pagerEl.addClass("bx-custom-pager")):(f=d+1,e.pagerEl.addClass("bx-default-pager")),b+='<div class="bx-pager-item"><a href="" data-slide-index="'+d+'" class="bx-pager-link">'+f+"</a></div>"}e.pagerEl.html(b)},w=function(){e.settings.pagerCustom?e.pagerEl=a(e.settings.pagerCustom):(e.pagerEl=a('<div class="bx-pager" />'),e.settings.pagerSelector?a(e.settings.pagerSelector).html(e.pagerEl):e.controls.el.addClass("bx-has-pager").append(e.pagerEl),v()),e.pagerEl.delegate("a","click",E)},x=function(){e.controls.next=a('<a class="bx-next" href="">'+e.settings.nextText+"</a>"),e.controls.prev=a('<a class="bx-prev" href="">'+e.settings.prevText+"</a>"),e.controls.next.bind("click",A),e.controls.prev.bind("click",B),e.settings.nextSelector&&a(e.settings.nextSelector).append(e.controls.next),e.settings.prevSelector&&a(e.settings.prevSelector).append(e.controls.prev),e.settings.nextSelector||e.settings.prevSelector||(e.controls.directionEl=a('<div class="bx-controls-direction" />'),e.controls.directionEl.append(e.controls.prev).append(e.controls.next),e.controls.el.addClass("bx-has-controls-direction").append(e.controls.directionEl))},y=function(){e.controls.start=a('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+e.settings.startText+"</a></div>"),e.controls.stop=a('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+e.settings.stopText+"</a></div>"),e.controls.autoEl=a('<div class="bx-controls-auto" />'),e.controls.autoEl.delegate(".bx-start","click",C),e.controls.autoEl.delegate(".bx-stop","click",D),e.settings.autoControlsCombine?e.controls.autoEl.append(e.controls.start):e.controls.autoEl.append(e.controls.start).append(e.controls.stop),e.settings.autoControlsSelector?a(e.settings.autoControlsSelector).html(e.controls.autoEl):e.controls.el.addClass("bx-has-controls-auto").append(e.controls.autoEl),H(e.settings.autoStart?"stop":"start")},z=function(){e.children.each(function(){var b=a(this).find("img:first").attr("title");void 0!=b&&(""+b).length&&a(this).append('<div class="bx-caption"><span>'+b+"</span></div>")})},A=function(a){e.settings.auto&&f.stopAuto(),f.goToNextSlide(),a.preventDefault()},B=function(a){e.settings.auto&&f.stopAuto(),f.goToPrevSlide(),a.preventDefault()},C=function(a){f.startAuto(),a.preventDefault()},D=function(a){f.stopAuto(),a.preventDefault()},E=function(b){e.settings.auto&&f.stopAuto();var c=a(b.currentTarget),d=parseInt(c.attr("data-slide-index"));d!=e.active.index&&f.goToSlide(d),b.preventDefault()},F=function(b){var c=e.children.length;return"short"==e.settings.pagerType?(e.settings.maxSlides>1&&(c=Math.ceil(e.children.length/e.settings.maxSlides)),e.pagerEl.html(b+1+e.settings.pagerShortSeparator+c),void 0):(e.pagerEl.find("a").removeClass("active"),e.pagerEl.each(function(c,d){a(d).find("a").eq(b).addClass("active")}),void 0)},G=function(){if(e.settings.infiniteLoop){var a="";0==e.active.index?a=e.children.eq(0).position():e.active.index==r()-1&&e.carousel?a=e.children.eq((r()-1)*s()).position():e.active.index==e.children.length-1&&(a=e.children.eq(e.children.length-1).position()),"horizontal"==e.settings.mode?u(-a.left,"reset",0):"vertical"==e.settings.mode&&u(-a.top,"reset",0)}e.working=!1,e.settings.onSlideAfter(e.children.eq(e.active.index),e.oldIndex,e.active.index)},H=function(a){e.settings.autoControlsCombine?e.controls.autoEl.html(e.controls[a]):(e.controls.autoEl.find("a").removeClass("active"),e.controls.autoEl.find("a:not(.bx-"+a+")").addClass("active"))},I=function(){1==r()?(e.controls.prev.addClass("disabled"),e.controls.next.addClass("disabled")):!e.settings.infiniteLoop&&e.settings.hideControlOnEnd&&(0==e.active.index?(e.controls.prev.addClass("disabled"),e.controls.next.removeClass("disabled")):e.active.index==r()-1?(e.controls.next.addClass("disabled"),e.controls.prev.removeClass("disabled")):(e.controls.prev.removeClass("disabled"),e.controls.next.removeClass("disabled")))},J=function(){e.settings.autoDelay>0?setTimeout(f.startAuto,e.settings.autoDelay):f.startAuto(),e.settings.autoHover&&f.hover(function(){e.interval&&(f.stopAuto(!0),e.autoPaused=!0)},function(){e.autoPaused&&(f.startAuto(!0),e.autoPaused=null)})},K=function(){var b=0;if("next"==e.settings.autoDirection)f.append(e.children.clone().addClass("bx-clone"));else{f.prepend(e.children.clone().addClass("bx-clone"));var c=e.children.first().position();b="horizontal"==e.settings.mode?-c.left:-c.top}u(b,"reset",0),e.settings.pager=!1,e.settings.controls=!1,e.settings.autoControls=!1,e.settings.tickerHover&&!e.usingCSS&&e.viewport.hover(function(){f.stop()},function(){var b=0;e.children.each(function(){b+="horizontal"==e.settings.mode?a(this).outerWidth(!0):a(this).outerHeight(!0)});var c=e.settings.speed/b,d="horizontal"==e.settings.mode?"left":"top",g=c*(b-Math.abs(parseInt(f.css(d))));L(g)}),L()},L=function(a){speed=a?a:e.settings.speed;var b={left:0,top:0},c={left:0,top:0};"next"==e.settings.autoDirection?b=f.find(".bx-clone").first().position():c=e.children.first().position();var d="horizontal"==e.settings.mode?-b.left:-b.top,g="horizontal"==e.settings.mode?-c.left:-c.top,h={resetValue:g};u(d,"ticker",speed,h)},M=function(){e.touch={start:{x:0,y:0},end:{x:0,y:0}},e.viewport.bind("touchstart",N)},N=function(a){if(e.working)a.preventDefault();else{e.touch.originalPos=f.position();var b=a.originalEvent;e.touch.start.x=b.changedTouches[0].pageX,e.touch.start.y=b.changedTouches[0].pageY,e.viewport.bind("touchmove",O),e.viewport.bind("touchend",P)}},O=function(a){var b=a.originalEvent,c=Math.abs(b.changedTouches[0].pageX-e.touch.start.x),d=Math.abs(b.changedTouches[0].pageY-e.touch.start.y);if(3*c>d&&e.settings.preventDefaultSwipeX?a.preventDefault():3*d>c&&e.settings.preventDefaultSwipeY&&a.preventDefault(),"fade"!=e.settings.mode&&e.settings.oneToOneTouch){var f=0;if("horizontal"==e.settings.mode){var g=b.changedTouches[0].pageX-e.touch.start.x;f=e.touch.originalPos.left+g}else{var g=b.changedTouches[0].pageY-e.touch.start.y;f=e.touch.originalPos.top+g}u(f,"reset",0)}},P=function(a){e.viewport.unbind("touchmove",O);var b=a.originalEvent,c=0;if(e.touch.end.x=b.changedTouches[0].pageX,e.touch.end.y=b.changedTouches[0].pageY,"fade"==e.settings.mode){var d=Math.abs(e.touch.start.x-e.touch.end.x);d>=e.settings.swipeThreshold&&(e.touch.start.x>e.touch.end.x?f.goToNextSlide():f.goToPrevSlide(),f.stopAuto())}else{var d=0;"horizontal"==e.settings.mode?(d=e.touch.end.x-e.touch.start.x,c=e.touch.originalPos.left):(d=e.touch.end.y-e.touch.start.y,c=e.touch.originalPos.top),!e.settings.infiniteLoop&&(0==e.active.index&&d>0||e.active.last&&0>d)?u(c,"reset",200):Math.abs(d)>=e.settings.swipeThreshold?(0>d?f.goToNextSlide():f.goToPrevSlide(),f.stopAuto()):u(c,"reset",200)}e.viewport.unbind("touchend",P)},Q=function(){var b=a(window).width(),c=a(window).height();(g!=b||h!=c)&&(g=b,h=c,f.redrawSlider())};return f.goToSlide=function(b,c){if(!e.working&&e.active.index!=b)if(e.working=!0,e.oldIndex=e.active.index,e.active.index=0>b?r()-1:b>=r()?0:b,e.settings.onSlideBefore(e.children.eq(e.active.index),e.oldIndex,e.active.index),"next"==c?e.settings.onSlideNext(e.children.eq(e.active.index),e.oldIndex,e.active.index):"prev"==c&&e.settings.onSlidePrev(e.children.eq(e.active.index),e.oldIndex,e.active.index),e.active.last=e.active.index>=r()-1,e.settings.pager&&F(e.active.index),e.settings.controls&&I(),"fade"==e.settings.mode)e.settings.adaptiveHeight&&e.viewport.height()!=n()&&e.viewport.animate({height:n()},e.settings.adaptiveHeightSpeed),e.children.filter(":visible").fadeOut(e.settings.speed).css({zIndex:0}),e.children.eq(e.active.index).css("zIndex",51).fadeIn(e.settings.speed,function(){a(this).css("zIndex",50),G()});else{e.settings.adaptiveHeight&&e.viewport.height()!=n()&&e.viewport.animate({height:n()},e.settings.adaptiveHeightSpeed);var d=0,g={left:0,top:0};if(!e.settings.infiniteLoop&&e.carousel&&e.active.last)if("horizontal"==e.settings.mode){var h=e.children.eq(e.children.length-1);g=h.position(),d=e.viewport.width()-h.outerWidth()}else{var i=e.children.length-e.settings.minSlides;g=e.children.eq(i).position()}else if(e.carousel&&e.active.last&&"prev"==c){var j=1==e.settings.moveSlides?e.settings.maxSlides-s():(r()-1)*s()-(e.children.length-e.settings.maxSlides),h=f.children(".bx-clone").eq(j);g=h.position()}else if("next"==c&&0==e.active.index)g=f.find("> .bx-clone").eq(e.settings.maxSlides).position(),e.active.last=!1;else if(b>=0){var k=b*s();g=e.children.eq(k).position()}if("undefined"!=typeof g){var l="horizontal"==e.settings.mode?-(g.left-d):-g.top;u(l,"slide",e.settings.speed)}}},f.goToNextSlide=function(){if(e.settings.infiniteLoop||!e.active.last){var a=parseInt(e.active.index)+1;f.goToSlide(a,"next")}},f.goToPrevSlide=function(){if(e.settings.infiniteLoop||0!=e.active.index){var a=parseInt(e.active.index)-1;f.goToSlide(a,"prev")}},f.startAuto=function(a){e.interval||(e.interval=setInterval(function(){"next"==e.settings.autoDirection?f.goToNextSlide():f.goToPrevSlide()},e.settings.pause),e.settings.autoControls&&1!=a&&H("stop"))},f.stopAuto=function(a){e.interval&&(clearInterval(e.interval),e.interval=null,e.settings.autoControls&&1!=a&&H("start"))},f.getCurrentSlide=function(){return e.active.index},f.getSlideCount=function(){return e.children.length},f.redrawSlider=function(){e.children.add(f.find(".bx-clone")).outerWidth(p()),e.viewport.css("height",n()),e.settings.ticker||t(),e.active.last&&(e.active.index=r()-1),e.active.index>=r()&&(e.active.last=!0),e.settings.pager&&!e.settings.pagerCustom&&(v(),F(e.active.index))},f.destroySlider=function(){e.initialized&&(e.initialized=!1,a(".bx-clone",this).remove(),e.children.each(function(){void 0!=a(this).data("origStyle")?a(this).attr("style",a(this).data("origStyle")):a(this).removeAttr("style")}),void 0!=a(this).data("origStyle")?this.attr("style",a(this).data("origStyle")):a(this).removeAttr("style"),a(this).unwrap().unwrap(),e.controls.el&&e.controls.el.remove(),e.controls.next&&e.controls.next.remove(),e.controls.prev&&e.controls.prev.remove(),e.pagerEl&&e.pagerEl.remove(),a(".bx-caption",this).remove(),e.controls.autoEl&&e.controls.autoEl.remove(),clearInterval(e.interval),e.settings.responsive&&a(window).unbind("resize",Q))
},f.reloadSlider=function(a){void 0!=a&&(d=a),f.destroySlider(),j()},j(),this}}(jQuery),function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=_+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(a){var b=y.length,c=(Q+a)%b;return 0>c?b+c:c}function g(a,b){return Math.round((/%/.test(a)?("x"===b?z.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.photo||a.photoRegex.test(b)}function i(a,b){return a.retinaUrl&&c.devicePixelRatio>1?b.replace(a.photoRegex,a.retinaSuffix):b}function j(a){"contains"in r[0]&&!r[0].contains(a.target)&&(a.stopPropagation(),r.focus())}function k(){var b,c=a.data(P,$);null==c?(K=a.extend({},Z),console&&console.log&&console.log("Error: cboxElement missing settings object")):K=a.extend({},c);for(b in K)a.isFunction(K[b])&&"on"!==b.slice(0,2)&&(K[b]=K[b].call(P));K.rel=K.rel||P.rel||a(P).data("rel")||"nofollow",K.href=K.href||a(P).attr("href"),K.title=K.title||P.title,"string"==typeof K.href&&(K.href=a.trim(K.href))}function l(c,d){a(b).trigger(c),hb.triggerHandler(c),a.isFunction(d)&&d.call(P)}function m(c){U||(P=c,k(),y=a(P),Q=0,"nofollow"!==K.rel&&(y=a("."+ab).filter(function(){var b,c=a.data(this,$);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===K.rel}),Q=y.index(P),-1===Q&&(y=y.add(P),Q=y.length-1)),q.css({opacity:parseFloat(K.opacity),cursor:K.overlayClose?"pointer":"auto",visibility:"visible"}).show(),X&&r.add(q).removeClass(X),K.className&&r.add(q).addClass(K.className),X=K.className,K.closeButton?I.html(K.close).appendTo(t):I.appendTo("<div/>"),S||(S=T=!0,r.css({visibility:"hidden",display:"block"}),A=d(ib,"LoadedContent","width:0; height:0; overflow:hidden"),t.css({width:"",height:""}).append(A),L=u.height()+x.height()+t.outerHeight(!0)-t.height(),M=v.width()+w.width()+t.outerWidth(!0)-t.width(),N=A.outerHeight(!0),O=A.outerWidth(!0),K.w=g(K.initialWidth,"x"),K.h=g(K.initialHeight,"y"),A.css({width:"",height:K.h}),W.position(),l(bb,K.onOpen),J.add(D).hide(),r.focus(),K.trapFocus&&b.addEventListener&&(b.addEventListener("focus",j,!0),hb.one(fb,function(){b.removeEventListener("focus",j,!0)})),K.returnFocus&&hb.one(fb,function(){a(P).focus()})),p())}function n(){!r&&b.body&&(Y=!1,z=a(c),r=d(ib).attr({id:$,"class":a.support.opacity===!1?_+"IE":"",role:"dialog",tabindex:"-1"}).hide(),q=d(ib,"Overlay").hide(),C=a([d(ib,"LoadingOverlay")[0],d(ib,"LoadingGraphic")[0]]),s=d(ib,"Wrapper"),t=d(ib,"Content").append(D=d(ib,"Title"),E=d(ib,"Current"),H=a('<button type="button"/>').attr({id:_+"Previous"}),G=a('<button type="button"/>').attr({id:_+"Next"}),F=d("button","Slideshow"),C),I=a('<button type="button"/>').attr({id:_+"Close"}),s.append(d(ib).append(d(ib,"TopLeft"),u=d(ib,"TopCenter"),d(ib,"TopRight")),d(ib,!1,"clear:left").append(v=d(ib,"MiddleLeft"),t,w=d(ib,"MiddleRight")),d(ib,!1,"clear:left").append(d(ib,"BottomLeft"),x=d(ib,"BottomCenter"),d(ib,"BottomRight"))).find("div div").css({"float":"left"}),B=d(ib,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),J=G.add(H).add(E).add(F),a(b.body).append(q,r.append(s,B)))}function o(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey||(a.preventDefault(),m(this))}return r?(Y||(Y=!0,G.click(function(){W.next()}),H.click(function(){W.prev()}),I.click(function(){W.close()}),q.click(function(){K.overlayClose&&W.close()}),a(b).bind("keydown."+_,function(a){var b=a.keyCode;S&&K.escKey&&27===b&&(a.preventDefault(),W.close()),S&&K.arrowKey&&y[1]&&!a.altKey&&(37===b?(a.preventDefault(),H.click()):39===b&&(a.preventDefault(),G.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+_,"."+ab,c):a("."+ab).live("click."+_,c)),!0):!1}function p(){var e,f,j,m=W.prep,n=++jb;T=!0,R=!1,P=y[Q],k(),l(gb),l(cb,K.onLoad),K.h=K.height?g(K.height,"y")-N-L:K.innerHeight&&g(K.innerHeight,"y"),K.w=K.width?g(K.width,"x")-O-M:K.innerWidth&&g(K.innerWidth,"x"),K.mw=K.w,K.mh=K.h,K.maxWidth&&(K.mw=g(K.maxWidth,"x")-O-M,K.mw=K.w&&K.w<K.mw?K.w:K.mw),K.maxHeight&&(K.mh=g(K.maxHeight,"y")-N-L,K.mh=K.h&&K.h<K.mh?K.h:K.mh),e=K.href,V=setTimeout(function(){C.show()},100),K.inline?(j=d(ib).hide().insertBefore(a(e)[0]),hb.one(gb,function(){j.replaceWith(A.children())}),m(a(e))):K.iframe?m(" "):K.html?m(K.html):h(K,e)?(e=i(K,e),R=b.createElement("img"),a(R).addClass(_+"Photo").bind("error",function(){K.title=!1,m(d(ib,"Error").html(K.imgError))}).one("load",function(){var b;n===jb&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(P).attr(c)||a(P).attr("data-"+c);d&&R.setAttribute(c,d)}),K.retinaImage&&c.devicePixelRatio>1&&(R.height=R.height/c.devicePixelRatio,R.width=R.width/c.devicePixelRatio),K.scalePhotos&&(f=function(){R.height-=R.height*b,R.width-=R.width*b},K.mw&&R.width>K.mw&&(b=(R.width-K.mw)/R.width,f()),K.mh&&R.height>K.mh&&(b=(R.height-K.mh)/R.height,f())),K.h&&(R.style.marginTop=Math.max(K.mh-R.height,0)/2+"px"),y[1]&&(K.loop||y[Q+1])&&(R.style.cursor="pointer",R.onclick=function(){W.next()}),R.style.width=R.width+"px",R.style.height=R.height+"px",setTimeout(function(){m(R)},1))}),setTimeout(function(){R.src=e},1)):e&&B.load(e,K.data,function(b,c){n===jb&&m("error"===c?d(ib,"Error").html(K.xhrError):a(this).contents())})}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,scrollTop:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},$="colorbox",_="cbox",ab=_+"Element",bb=_+"_open",cb=_+"_load",db=_+"_complete",eb=_+"_cleanup",fb=_+"_closed",gb=_+"_purge",hb=a("<a/>"),ib="div",jb=0,kb={},lb=function(){function a(){clearTimeout(g)}function b(){(K.loop||y[Q+1])&&(a(),g=setTimeout(W.next,K.slideshowSpeed))}function c(){F.html(K.slideshowStop).unbind(i).one(i,d),hb.bind(db,b).bind(cb,a),r.removeClass(h+"off").addClass(h+"on")}function d(){a(),hb.unbind(db,b).unbind(cb,a),F.html(K.slideshowStart).unbind(i).one(i,function(){W.next(),c()}),r.removeClass(h+"on").addClass(h+"off")}function e(){f=!1,F.hide(),a(),hb.unbind(db,b).unbind(cb,a),r.removeClass(h+"off "+h+"on")}var f,g,h=_+"Slideshow_",i="click."+_;return function(){f?K.slideshow||(hb.unbind(eb,e),e()):K.slideshow&&y[1]&&(f=!0,hb.one(eb,e),K.slideshowAuto?c():d(),F.show())}}();a.colorbox||(a(n),W=a.fn[$]=a[$]=function(b,c){var d=this;if(b=b||{},n(),o()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c),d.each(function(){a.data(this,$,a.extend({},a.data(this,$)||Z,b))}).addClass(ab),(a.isFunction(b.open)&&b.open.call(d)||b.open)&&m(d[0])}return d},W.position=function(b,c){function d(){u[0].style.width=x[0].style.width=t[0].style.width=parseInt(r[0].style.width,10)-M+"px",t[0].style.height=v[0].style.height=w[0].style.height=parseInt(r[0].style.height,10)-L+"px"}var f,h,i,j=0,k=0,l=r.offset();if(z.unbind("resize."+_),r.css({top:-9e4,left:-9e4}),h=z.scrollTop(),i=z.scrollLeft(),K.fixed?(l.top-=h,l.left-=i,r.css({position:"fixed"})):(j=h,k=i,r.css({position:"absolute"})),k+=K.right!==!1?Math.max(z.width()-K.w-O-M-g(K.right,"x"),0):K.left!==!1?g(K.left,"x"):Math.round(Math.max(z.width()-K.w-O-M,0)/2),j+=K.bottom!==!1?Math.max(e()-K.h-N-L-g(K.bottom,"y"),0):K.top!==!1?g(K.top,"y"):Math.round(Math.max(e()-K.h-N-L,0)/2),r.css({top:l.top,left:l.left,visibility:"visible"}),s[0].style.width=s[0].style.height="9999px",f={width:K.w+O+M,height:K.h+N+L,top:j,left:k},K.scrollTop&&delete f.top,b){var m=0;a.each(f,function(a){return f[a]!==kb[a]?(m=b,void 0):void 0}),b=m}kb=f,b||r.css(f),r.dequeue().animate(f,{duration:b||0,complete:function(){d(),T=!1,s[0].style.width=K.w+O+M+"px",s[0].style.height=K.h+N+L+"px",K.reposition&&setTimeout(function(){z.bind("resize."+_,W.position)},1),c&&c()},step:d})},W.resize=function(a){var b;S=!0,S&&(a=a||{},a.width&&(K.w=g(a.width,"x")-O-M),a.innerWidth&&(K.w=g(a.innerWidth,"x")),A.css({width:K.w}),a.height&&(K.h=g(a.height,"y")-N-L),a.innerHeight&&(K.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=A.scrollTop(),A.css({height:"auto"}),K.h=A.height()),A.css({height:K.h}),b&&A.scrollTop(b),W.position("none"===K.transition?0:K.speed))},W.prep=function(c){function e(){return K.w=K.w||A.width(),K.w=K.mw&&K.mw<K.w?K.mw:K.w,K.w}function g(){return K.h=K.h||A.height(),K.h=K.mh&&K.mh<K.h?K.mh:K.h,K.h}if(S){var j,k="none"===K.transition?0:K.speed;A.empty().remove(),A=d(ib,"LoadedContent").append(c),A.hide().appendTo(B.show()).css({width:e(),overflow:K.scrolling?"auto":"hidden"}).css({height:g()}).prependTo(t),B.hide(),a(R).css({"float":"none"}),j=function(){function c(){a.support.opacity===!1&&r[0].style.removeAttribute("filter")}var e,g,j=y.length,m="frameBorder",n="allowTransparency";S&&(g=function(){clearTimeout(V),C.hide(),l(db,K.onComplete)},D.html(K.title).add(A).show(),j>1?("string"==typeof K.current&&E.html(K.current.replace("{current}",Q+1).replace("{total}",j)).show(),G[K.loop||j-1>Q?"show":"hide"]().html(K.next),H[K.loop||Q?"show":"hide"]().html(K.previous),lb(),K.preloading&&a.each([f(-1),f(1)],function(){var c,d,e=y[this],f=a.data(e,$);f&&f.href?(c=f.href,a.isFunction(c)&&(c=c.call(e))):c=a(e).attr("href"),c&&h(f,c)&&(c=i(f,c),d=b.createElement("img"),d.src=c)})):J.hide(),K.iframe?(e=d("iframe")[0],m in e&&(e[m]=0),n in e&&(e[n]="true"),K.scrolling||(e.scrolling="no"),a(e).attr({src:K.href,name:(new Date).getTime(),"class":_+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",g).appendTo(A),hb.one(gb,function(){e.src="//about:blank"}),K.fastIframe&&a(e).trigger("load")):g(),"fade"===K.transition?r.fadeTo(k,1,c):c())},"fade"===K.transition?r.fadeTo(k,0,function(){W.position(0,j)}):W.position(k,j)}},W.next=function(){!T&&y[1]&&(K.loop||y[Q+1])&&(Q=f(1),m(y[Q]))},W.prev=function(){!T&&y[1]&&(K.loop||Q)&&(Q=f(-1),m(y[Q]))},W.close=function(){S&&!U&&(U=!0,S=!1,l(eb,K.onCleanup),z.unbind("."+_),q.fadeTo(K.fadeOut||0,0),r.stop().fadeTo(K.fadeOut||0,0,function(){r.add(q).css({opacity:1,cursor:"auto"}).hide(),l(gb),A.empty().remove(),setTimeout(function(){U=!1,l(fb,K.onClosed)},1)}))},W.remove=function(){r&&(r.stop(),a.colorbox.close(),r.stop().remove(),q.remove(),U=!1,r=null,a("."+ab).removeData($).removeClass(ab),a(b).unbind("click."+_))},W.element=function(){return a(P)},W.settings=Z)}(jQuery,document,window),function(a){function b(a){return(a||"").toLowerCase()}var c="20131003";a.fn.cycle=function(c){var d;return 0!==this.length||a.isReady?this.each(function(){var d,e,f,g,h=a(this),i=a.fn.cycle.log;if(!h.data("cycle.opts")){(h.data("cycle-log")===!1||c&&c.log===!1||e&&e.log===!1)&&(i=a.noop),i("--c2 init--"),d=h.data();for(var j in d)d.hasOwnProperty(j)&&/^cycle[A-Z]+/.test(j)&&(g=d[j],f=j.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,b),i(f+":",g,"("+typeof g+")"),d[f]=g);e=a.extend({},a.fn.cycle.defaults,d,c||{}),e.timeoutId=0,e.paused=e.paused||!1,e.container=h,e._maxZ=e.maxZ,e.API=a.extend({_container:h},a.fn.cycle.API),e.API.log=i,e.API.trigger=function(a,b){return e.container.trigger(a,b),e.API},h.data("cycle.opts",e),h.data("cycle.API",e.API),e.API.trigger("cycle-bootstrap",[e,e.API]),e.API.addInitialSlides(),e.API.preInitSlideshow(),e.slides.length&&e.API.initSlideshow()}}):(d={s:this.selector,c:this.context},a.fn.cycle.log("requeuing slideshow (dom not ready)"),a(function(){a(d.s,d.c).cycle(c)}),this)},a.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var b=this.opts(),c=b.slides;b.slideCount=0,b.slides=a(),c=c.jquery?c:b.container.find(c),b.random&&c.sort(function(){return Math.random()-.5}),b.API.add(c)},preInitSlideshow:function(){var b=this.opts();b.API.trigger("cycle-pre-initialize",[b]);var c=a.fn.cycle.transitions[b.fx];c&&a.isFunction(c.preInit)&&c.preInit(b),b._preInitialized=!0},postInitSlideshow:function(){var b=this.opts();b.API.trigger("cycle-post-initialize",[b]);var c=a.fn.cycle.transitions[b.fx];c&&a.isFunction(c.postInit)&&c.postInit(b)},initSlideshow:function(){var b,c=this.opts(),d=c.container;c.API.calcFirstSlide(),"static"==c.container.css("position")&&c.container.css("position","relative"),a(c.slides[c.currSlide]).css("opacity",1).show(),c.API.stackSlides(c.slides[c.currSlide],c.slides[c.nextSlide],!c.reverse),c.pauseOnHover&&(c.pauseOnHover!==!0&&(d=a(c.pauseOnHover)),d.hover(function(){c.API.pause(!0)},function(){c.API.resume(!0)})),c.timeout&&(b=c.API.getSlideOpts(c.currSlide),c.API.queueTransition(b,b.timeout+c.delay)),c._initialized=!0,c.API.updateView(!0),c.API.trigger("cycle-initialized",[c]),c.API.postInitSlideshow()},pause:function(b){var c=this.opts(),d=c.API.getSlideOpts(),e=c.hoverPaused||c.paused;b?c.hoverPaused=!0:c.paused=!0,e||(c.container.addClass("cycle-paused"),c.API.trigger("cycle-paused",[c]).log("cycle-paused"),d.timeout&&(clearTimeout(c.timeoutId),c.timeoutId=0,c._remainingTimeout-=a.now()-c._lastQueue,(c._remainingTimeout<0||isNaN(c._remainingTimeout))&&(c._remainingTimeout=void 0)))},resume:function(a){var b=this.opts(),c=!b.hoverPaused&&!b.paused;a?b.hoverPaused=!1:b.paused=!1,c||(b.container.removeClass("cycle-paused"),0===b.slides.filter(":animated").length&&b.API.queueTransition(b.API.getSlideOpts(),b._remainingTimeout),b.API.trigger("cycle-resumed",[b,b._remainingTimeout]).log("cycle-resumed"))},add:function(b,c){var d,e=this.opts(),f=e.slideCount,g=!1;"string"==a.type(b)&&(b=a.trim(b)),a(b).each(function(){var b,d=a(this);c?e.container.prepend(d):e.container.append(d),e.slideCount++,b=e.API.buildSlideOpts(d),e.slides=c?a(d).add(e.slides):e.slides.add(d),e.API.initSlide(b,d,--e._maxZ),d.data("cycle.opts",b),e.API.trigger("cycle-slide-added",[e,b,d])}),e.API.updateView(!0),g=e._preInitialized&&2>f&&e.slideCount>=1,g&&(e._initialized?e.timeout&&(d=e.slides.length,e.nextSlide=e.reverse?d-1:1,e.timeoutId||e.API.queueTransition(e)):e.API.initSlideshow())},calcFirstSlide:function(){var a,b=this.opts();a=parseInt(b.startingSlide||0,10),(a>=b.slides.length||0>a)&&(a=0),b.currSlide=a,b.reverse?(b.nextSlide=a-1,b.nextSlide<0&&(b.nextSlide=b.slides.length-1)):(b.nextSlide=a+1,b.nextSlide==b.slides.length&&(b.nextSlide=0))},calcNextSlide:function(){var a,b=this.opts();b.reverse?(a=b.nextSlide-1<0,b.nextSlide=a?b.slideCount-1:b.nextSlide-1,b.currSlide=a?0:b.nextSlide+1):(a=b.nextSlide+1==b.slides.length,b.nextSlide=a?0:b.nextSlide+1,b.currSlide=a?b.slides.length-1:b.nextSlide-1)},calcTx:function(b,c){var d,e=b;return c&&e.manualFx&&(d=a.fn.cycle.transitions[e.manualFx]),d||(d=a.fn.cycle.transitions[e.fx]),d||(d=a.fn.cycle.transitions.fade,e.API.log('Transition "'+e.fx+'" not found.  Using fade.')),d},prepareTx:function(a,b){var c,d,e,f,g,h=this.opts();return h.slideCount<2?(h.timeoutId=0,void 0):(!a||h.busy&&!h.manualTrump||(h.API.stopTransition(),h.busy=!1,clearTimeout(h.timeoutId),h.timeoutId=0),h.busy||(0!==h.timeoutId||a)&&(d=h.slides[h.currSlide],e=h.slides[h.nextSlide],f=h.API.getSlideOpts(h.nextSlide),g=h.API.calcTx(f,a),h._tx=g,a&&void 0!==f.manualSpeed&&(f.speed=f.manualSpeed),h.nextSlide!=h.currSlide&&(a||!h.paused&&!h.hoverPaused&&h.timeout)?(h.API.trigger("cycle-before",[f,d,e,b]),g.before&&g.before(f,d,e,b),c=function(){h.busy=!1,h.container.data("cycle.opts")&&(g.after&&g.after(f,d,e,b),h.API.trigger("cycle-after",[f,d,e,b]),h.API.queueTransition(f),h.API.updateView(!0))},h.busy=!0,g.transition?g.transition(f,d,e,b,c):h.API.doTransition(f,d,e,b,c),h.API.calcNextSlide(),h.API.updateView()):h.API.queueTransition(f)),void 0)},doTransition:function(b,c,d,e,f){var g=b,h=a(c),i=a(d),j=function(){i.animate(g.animIn||{opacity:1},g.speed,g.easeIn||g.easing,f)};i.css(g.cssBefore||{}),h.animate(g.animOut||{},g.speed,g.easeOut||g.easing,function(){h.css(g.cssAfter||{}),g.sync||j()}),g.sync&&j()},queueTransition:function(b,c){var d=this.opts(),e=void 0!==c?c:b.timeout;return 0===d.nextSlide&&0===--d.loop?(d.API.log("terminating; loop=0"),d.timeout=0,e?setTimeout(function(){d.API.trigger("cycle-finished",[d])},e):d.API.trigger("cycle-finished",[d]),d.nextSlide=d.currSlide,void 0):(e&&(d._lastQueue=a.now(),void 0===c&&(d._remainingTimeout=b.timeout),d.paused||d.hoverPaused||(d.timeoutId=setTimeout(function(){d.API.prepareTx(!1,!d.reverse)},e))),void 0)},stopTransition:function(){var a=this.opts();a.slides.filter(":animated").length&&(a.slides.stop(!1,!0),a.API.trigger("cycle-transition-stopped",[a])),a._tx&&a._tx.stopTransition&&a._tx.stopTransition(a)},advanceSlide:function(a){var b=this.opts();return clearTimeout(b.timeoutId),b.timeoutId=0,b.nextSlide=b.currSlide+a,b.nextSlide<0?b.nextSlide=b.slides.length-1:b.nextSlide>=b.slides.length&&(b.nextSlide=0),b.API.prepareTx(!0,a>=0),!1},buildSlideOpts:function(c){var d,e,f=this.opts(),g=c.data()||{};for(var h in g)g.hasOwnProperty(h)&&/^cycle[A-Z]+/.test(h)&&(d=g[h],e=h.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,b),f.API.log("["+(f.slideCount-1)+"]",e+":",d,"("+typeof d+")"),g[e]=d);g=a.extend({},a.fn.cycle.defaults,f,g),g.slideNum=f.slideCount;try{delete g.API,delete g.slideCount,delete g.currSlide,delete g.nextSlide,delete g.slides}catch(i){}return g},getSlideOpts:function(b){var c=this.opts();void 0===b&&(b=c.currSlide);var d=c.slides[b],e=a(d).data("cycle.opts");return a.extend({},c,e)},initSlide:function(b,c,d){var e=this.opts();c.css(b.slideCss||{}),d>0&&c.css("zIndex",d),isNaN(b.speed)&&(b.speed=a.fx.speeds[b.speed]||a.fx.speeds._default),b.sync||(b.speed=b.speed/2),c.addClass(e.slideClass)},updateView:function(a,b){var c=this.opts();if(c._initialized){var d=c.API.getSlideOpts(),e=c.slides[c.currSlide];!a&&b!==!0&&(c.API.trigger("cycle-update-view-before",[c,d,e]),c.updateView<0)||(c.slideActiveClass&&c.slides.removeClass(c.slideActiveClass).eq(c.currSlide).addClass(c.slideActiveClass),a&&c.hideNonActive&&c.slides.filter(":not(."+c.slideActiveClass+")").hide(),0===c.updateView&&setTimeout(function(){c.API.trigger("cycle-update-view",[c,d,e,a])},d.speed/(c.sync?2:1)),0!==c.updateView&&c.API.trigger("cycle-update-view",[c,d,e,a]),a&&c.API.trigger("cycle-update-view-after",[c,d,e]))}},getComponent:function(b){var c=this.opts(),d=c[b];return"string"==typeof d?/^\s*[\>|\+|~]/.test(d)?c.container.find(d):a(d):d.jquery?d:a(d)},stackSlides:function(b,c,d){var e=this.opts();b||(b=e.slides[e.currSlide],c=e.slides[e.nextSlide],d=!e.reverse),a(b).css("zIndex",e.maxZ);var f,g=e.maxZ-2,h=e.slideCount;if(d){for(f=e.currSlide+1;h>f;f++)a(e.slides[f]).css("zIndex",g--);for(f=0;f<e.currSlide;f++)a(e.slides[f]).css("zIndex",g--)}else{for(f=e.currSlide-1;f>=0;f--)a(e.slides[f]).css("zIndex",g--);for(f=h-1;f>e.currSlide;f--)a(e.slides[f]).css("zIndex",g--)}a(c).css("zIndex",e.maxZ-1)},getSlideIndex:function(a){return this.opts().slides.index(a)}},a.fn.cycle.log=function(){},a.fn.cycle.version=function(){return"Cycle2: "+c},a.fn.cycle.transitions={custom:{},none:{before:function(a,b,c,d){a.API.stackSlides(c,b,d),a.cssBefore={opacity:1,display:"block"}}},fade:{before:function(b,c,d,e){var f=b.API.getSlideOpts(b.nextSlide).slideCss||{};b.API.stackSlides(c,d,e),b.cssBefore=a.extend(f,{opacity:0,display:"block"}),b.animIn={opacity:1},b.animOut={opacity:0}}},fadeout:{before:function(b,c,d,e){var f=b.API.getSlideOpts(b.nextSlide).slideCss||{};b.API.stackSlides(c,d,e),b.cssBefore=a.extend(f,{opacity:1,display:"block"}),b.animOut={opacity:0}}},scrollHorz:{before:function(a,b,c,d){a.API.stackSlides(b,c,d);var e=a.container.css("overflow","hidden").width();a.cssBefore={left:d?e:-e,top:0,opacity:1,display:"block"},a.cssAfter={zIndex:a._maxZ-2,left:0},a.animIn={left:0},a.animOut={left:d?-e:e}}}},a.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},a(document).ready(function(){a(a.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function(a){function b(b,d){var e,f,g,h=d.autoHeight;if("container"==h)f=a(d.slides[d.currSlide]).outerHeight(),d.container.height(f);else if(d._autoHeightRatio)d.container.height(d.container.width()/d._autoHeightRatio);else if("calc"===h||"number"==a.type(h)&&h>=0){if(g="calc"===h?c(b,d):h>=d.slides.length?0:h,g==d._sentinelIndex)return;d._sentinelIndex=g,d._sentinel&&d._sentinel.remove(),e=a(d.slides[g].cloneNode(!0)),e.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),e.css({position:"static",visibility:"hidden",display:"block"}).prependTo(d.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),e.find("*").css("visibility","hidden"),d._sentinel=e}}function c(b,c){var d=0,e=-1;return c.slides.each(function(b){var c=a(this).height();c>e&&(e=c,d=b)}),d}function d(b,c,d,e){var f=a(e).outerHeight(),g=c.sync?c.speed/2:c.speed;c.container.animate({height:f},g)}function e(c,f){f._autoHeightOnResize&&(a(window).off("resize orientationchange",f._autoHeightOnResize),f._autoHeightOnResize=null),f.container.off("cycle-slide-added cycle-slide-removed",b),f.container.off("cycle-destroyed",e),f.container.off("cycle-before",d),f._sentinel&&(f._sentinel.remove(),f._sentinel=null)}a.extend(a.fn.cycle.defaults,{autoHeight:0}),a(document).on("cycle-initialized",function(c,f){function g(){b(c,f)}var h,i=f.autoHeight,j=a.type(i),k=null;("string"===j||"number"===j)&&(f.container.on("cycle-slide-added cycle-slide-removed",b),f.container.on("cycle-destroyed",e),"container"==i?f.container.on("cycle-before",d):"string"===j&&/\d+\:\d+/.test(i)&&(h=i.match(/(\d+)\:(\d+)/),h=h[1]/h[2],f._autoHeightRatio=h),"number"!==j&&(f._autoHeightOnResize=function(){clearTimeout(k),k=setTimeout(g,50)},a(window).on("resize orientationchange",f._autoHeightOnResize)),setTimeout(g,30))})}(jQuery),function(a){a.extend(a.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),a(document).on("cycle-update-view",function(b,c,d,e){"caption"===c.captionModule&&a.each(["caption","overlay"],function(){var a=this,b=d[a+"Template"],f=c.API.getComponent(a);f.length&&b?(f.html(c.API.tmpl(b,d,c,e)),f.show()):f.hide()})}),a(document).on("cycle-destroyed",function(b,c){var d;a.each(["caption","overlay"],function(){var a=this,b=c[a+"Template"];c[a]&&b&&(d=c.API.getComponent("caption"),d.empty())})})}(jQuery),function(a){var b=a.fn.cycle;a.fn.cycle=function(c){var d,e,f,g=a.makeArray(arguments);return"number"==a.type(c)?this.cycle("goto",c):"string"==a.type(c)?this.each(function(){var h;return d=c,f=a(this).data("cycle.opts"),void 0===f?(b.log('slideshow must be initialized before sending commands; "'+d+'" ignored'),void 0):(d="goto"==d?"jump":d,e=f.API[d],a.isFunction(e)?(h=a.makeArray(g),h.shift(),e.apply(f.API,h)):(b.log("unknown command: ",d),void 0))}):b.apply(this,arguments)},a.extend(a.fn.cycle,b),a.extend(b.API,{next:function(){var a=this.opts();if(!a.busy||a.manualTrump){var b=a.reverse?-1:1;a.allowWrap===!1&&a.currSlide+b>=a.slideCount||(a.API.advanceSlide(b),a.API.trigger("cycle-next",[a]).log("cycle-next"))}},prev:function(){var a=this.opts();if(!a.busy||a.manualTrump){var b=a.reverse?1:-1;a.allowWrap===!1&&a.currSlide+b<0||(a.API.advanceSlide(b),a.API.trigger("cycle-prev",[a]).log("cycle-prev"))}},destroy:function(){this.stop();var b=this.opts(),c=a.isFunction(a._data)?a._data:a.noop;clearTimeout(b.timeoutId),b.timeoutId=0,b.API.stop(),b.API.trigger("cycle-destroyed",[b]).log("cycle-destroyed"),b.container.removeData(),c(b.container[0],"parsedAttrs",!1),b.retainStylesOnDestroy||(b.container.removeAttr("style"),b.slides.removeAttr("style"),b.slides.removeClass(b.slideActiveClass)),b.slides.each(function(){a(this).removeData(),c(this,"parsedAttrs",!1)})},jump:function(a){var b,c=this.opts();if(!c.busy||c.manualTrump){var d=parseInt(a,10);if(isNaN(d)||0>d||d>=c.slides.length)return c.API.log("goto: invalid slide index: "+d),void 0;if(d==c.currSlide)return c.API.log("goto: skipping, already on slide",d),void 0;c.nextSlide=d,clearTimeout(c.timeoutId),c.timeoutId=0,c.API.log("goto: ",d," (zero-index)"),b=c.currSlide<c.nextSlide,c.API.prepareTx(!0,b)}},stop:function(){var b=this.opts(),c=b.container;clearTimeout(b.timeoutId),b.timeoutId=0,b.API.stopTransition(),b.pauseOnHover&&(b.pauseOnHover!==!0&&(c=a(b.pauseOnHover)),c.off("mouseenter mouseleave")),b.API.trigger("cycle-stopped",[b]).log("cycle-stopped")},reinit:function(){var a=this.opts();a.API.destroy(),a.container.cycle()},remove:function(b){for(var c,d,e=this.opts(),f=[],g=1,h=0;h<e.slides.length;h++)c=e.slides[h],h==b?d=c:(f.push(c),a(c).data("cycle.opts").slideNum=g,g++);d&&(e.slides=a(f),e.slideCount--,a(d).remove(),b==e.currSlide?e.API.advanceSlide(1):b<e.currSlide?e.currSlide--:e.currSlide++,e.API.trigger("cycle-slide-removed",[e,b,d]).log("cycle-slide-removed"),e.API.updateView())}}),a(document).on("click.cycle","[data-cycle-cmd]",function(b){b.preventDefault();var c=a(this),d=c.data("cycle-cmd"),e=c.data("cycle-context")||".cycle-slideshow";a(e).cycle(d,c.data("cycle-arg"))})}(jQuery),function(a){function b(b,c){var d;return b._hashFence?(b._hashFence=!1,void 0):(d=window.location.hash.substring(1),b.slides.each(function(e){if(a(this).data("cycle-hash")==d){if(c===!0)b.startingSlide=e;else{var f=b.currSlide<e;b.nextSlide=e,b.API.prepareTx(!0,f)}return!1}}),void 0)}a(document).on("cycle-pre-initialize",function(c,d){b(d,!0),d._onHashChange=function(){b(d,!1)},a(window).on("hashchange",d._onHashChange)}),a(document).on("cycle-update-view",function(a,b,c){c.hash&&"#"+c.hash!=window.location.hash&&(b._hashFence=!0,window.location.hash=c.hash)}),a(document).on("cycle-destroyed",function(b,c){c._onHashChange&&a(window).off("hashchange",c._onHashChange)})}(jQuery),function(a){a.extend(a.fn.cycle.defaults,{loader:!1}),a(document).on("cycle-bootstrap",function(b,c){function d(b,d){function f(b){var f;"wait"==c.loader?(h.push(b),0===j&&(h.sort(g),e.apply(c.API,[h,d]),c.container.removeClass("cycle-loading"))):(f=a(c.slides[c.currSlide]),e.apply(c.API,[b,d]),f.show(),c.container.removeClass("cycle-loading"))}function g(a,b){return a.data("index")-b.data("index")}var h=[];if("string"==a.type(b))b=a.trim(b);else if("array"===a.type(b))for(var i=0;i<b.length;i++)b[i]=a(b[i])[0];b=a(b);var j=b.length;j&&(c.eventualSlideCount=c.slideCount+j,b.hide().appendTo("body").each(function(b){function g(){0===--i&&(--j,f(k))}var i=0,k=a(this),l=k.is("img")?k:k.find("img");return k.data("index",b),l=l.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])'),l.length?(i=l.length,l.each(function(){this.complete?g():a(this).load(function(){g()}).error(function(){0===--i&&(c.API.log("slide skipped; img not loaded:",this.src),0===--j&&"wait"==c.loader&&e.apply(c.API,[h,d]))})}),void 0):(--j,h.push(k),void 0)}),j&&c.container.addClass("cycle-loading"))}var e;c.loader&&(e=c.API.add,c.API.add=d)})}(jQuery),function(a){function b(b,c,d){var e,f=b.API.getComponent("pager");f.each(function(){var f=a(this);if(c.pagerTemplate){var g=b.API.tmpl(c.pagerTemplate,c,b,d[0]);e=a(g).appendTo(f)}else e=f.children().eq(b.slideCount-1);e.on(b.pagerEvent,function(a){a.preventDefault(),b.API.page(f,a.currentTarget)})})}function c(a,b){var c=this.opts();if(!c.busy||c.manualTrump){var d=a.children().index(b),e=d,f=c.currSlide<e;c.currSlide!=e&&(c.nextSlide=e,c.API.prepareTx(!0,f),c.API.trigger("cycle-pager-activated",[c,a,b]))}}a.extend(a.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"}),a(document).on("cycle-bootstrap",function(a,c,d){d.buildPagerLink=b}),a(document).on("cycle-slide-added",function(a,b,d,e){b.pager&&(b.API.buildPagerLink(b,d,e),b.API.page=c)}),a(document).on("cycle-slide-removed",function(b,c,d){if(c.pager){var e=c.API.getComponent("pager");e.each(function(){var b=a(this);a(b.children()[d]).remove()})}}),a(document).on("cycle-update-view",function(b,c){var d;c.pager&&(d=c.API.getComponent("pager"),d.each(function(){a(this).children().removeClass(c.pagerActiveClass).eq(c.currSlide).addClass(c.pagerActiveClass)}))}),a(document).on("cycle-destroyed",function(a,b){var c=b.API.getComponent("pager");c&&(c.children().off(b.pagerEvent),b.pagerTemplate&&c.empty())})}(jQuery),function(a){a.extend(a.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),a(document).on("cycle-initialized",function(a,b){if(b.API.getComponent("next").on(b.nextEvent,function(a){a.preventDefault(),b.API.next()}),b.API.getComponent("prev").on(b.prevEvent,function(a){a.preventDefault(),b.API.prev()}),b.swipe){var c=b.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",d=b.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";b.container.on(c,function(){b.API.next()}),b.container.on(d,function(){b.API.prev()})}}),a(document).on("cycle-update-view",function(a,b){if(!b.allowWrap){var c=b.disabledClass,d=b.API.getComponent("next"),e=b.API.getComponent("prev"),f=b._prevBoundry||0,g=void 0!==b._nextBoundry?b._nextBoundry:b.slideCount-1;b.currSlide==g?d.addClass(c).prop("disabled",!0):d.removeClass(c).prop("disabled",!1),b.currSlide===f?e.addClass(c).prop("disabled",!0):e.removeClass(c).prop("disabled",!1)}}),a(document).on("cycle-destroyed",function(a,b){b.API.getComponent("prev").off(b.nextEvent),b.API.getComponent("next").off(b.prevEvent),b.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function(a){a.extend(a.fn.cycle.defaults,{progressive:!1}),a(document).on("cycle-pre-initialize",function(b,c){if(c.progressive){var d,e,f=c.API,g=f.next,h=f.prev,i=f.prepareTx,j=a.type(c.progressive);if("array"==j)d=c.progressive;else if(a.isFunction(c.progressive))d=c.progressive(c);else if("string"==j){if(e=a(c.progressive),d=a.trim(e.html()),!d)return;if(/^(\[)/.test(d))try{d=a.parseJSON(d)}catch(k){return f.log("error parsing progressive slides",k),void 0}else d=d.split(new RegExp(e.data("cycle-split")||"\n")),d[d.length-1]||d.pop()}i&&(f.prepareTx=function(a,b){var e,f;return a||0===d.length?(i.apply(c.API,[a,b]),void 0):(b&&c.currSlide==c.slideCount-1?(f=d[0],d=d.slice(1),c.container.one("cycle-slide-added",function(a,b){setTimeout(function(){b.API.advanceSlide(1)},50)}),c.API.add(f)):b||0!==c.currSlide?i.apply(c.API,[a,b]):(e=d.length-1,f=d[e],d=d.slice(0,e),c.container.one("cycle-slide-added",function(a,b){setTimeout(function(){b.currSlide=1,b.API.advanceSlide(-1)},50)}),c.API.add(f,!0)),void 0)}),g&&(f.next=function(){var a=this.opts();if(d.length&&a.currSlide==a.slideCount-1){var b=d[0];d=d.slice(1),a.container.one("cycle-slide-added",function(a,b){g.apply(b.API),b.container.removeClass("cycle-loading")}),a.container.addClass("cycle-loading"),a.API.add(b)}else g.apply(a.API)}),h&&(f.prev=function(){var a=this.opts();if(d.length&&0===a.currSlide){var b=d.length-1,c=d[b];d=d.slice(0,b),a.container.one("cycle-slide-added",function(a,b){b.currSlide=1,b.API.advanceSlide(-1),b.container.removeClass("cycle-loading")}),a.container.addClass("cycle-loading"),a.API.add(c,!0)}else h.apply(a.API)
})}})}(jQuery),function(a){a.extend(a.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),a.extend(a.fn.cycle.API,{tmpl:function(b,c){var d=new RegExp(c.tmplRegex||a.fn.cycle.defaults.tmplRegex,"g"),e=a.makeArray(arguments);return e.shift(),b.replace(d,function(b,c){var d,f,g,h,i=c.split(".");for(d=0;d<e.length;d++)if(g=e[d]){if(i.length>1)for(h=g,f=0;f<i.length;f++)g=h,h=h[i[f]]||c;else h=g[c];if(a.isFunction(h))return h.apply(g,e);if(void 0!==h&&null!==h&&h!=c)return h}return c})}})}(jQuery),function(a){a(document).on("cycle-bootstrap",function(a,b,c){"carousel"===b.fx&&(c.getSlideIndex=function(a){var b=this.opts()._carouselWrap.children(),c=b.index(a);return c%b.length},c.next=function(){var a=b.reverse?-1:1;b.allowWrap===!1&&b.currSlide+a>b.slideCount-b.carouselVisible||(b.API.advanceSlide(a),b.API.trigger("cycle-next",[b]).log("cycle-next"))})}),a.fn.cycle.transitions.carousel={preInit:function(b){b.hideNonActive=!1,b.container.on("cycle-destroyed",a.proxy(this.onDestroy,b.API)),b.API.stopTransition=this.stopTransition;for(var c=0;c<b.startingSlide;c++)b.container.append(b.slides[0])},postInit:function(b){var c,d,e,f,g=b.carouselVertical;b.carouselVisible&&b.carouselVisible>b.slideCount&&(b.carouselVisible=b.slideCount-1);var h=b.carouselVisible||b.slides.length,i={display:g?"block":"inline-block",position:"static"};if(b.container.css({position:"relative",overflow:"hidden"}),b.slides.css(i),b._currSlide=b.currSlide,f=a('<div class="cycle-carousel-wrap"></div>').prependTo(b.container).css({margin:0,padding:0,top:0,left:0,position:"absolute"}).append(b.slides),b._carouselWrap=f,g||f.css("white-space","nowrap"),b.allowWrap!==!1){for(d=0;d<(void 0===b.carouselVisible?2:1);d++){for(c=0;c<b.slideCount;c++)f.append(b.slides[c].cloneNode(!0));for(c=b.slideCount;c--;)f.prepend(b.slides[c].cloneNode(!0))}f.find(".cycle-slide-active").removeClass("cycle-slide-active"),b.slides.eq(b.startingSlide).addClass("cycle-slide-active")}b.pager&&b.allowWrap===!1&&(e=b.slideCount-h,a(b.pager).children().filter(":gt("+e+")").hide()),b._nextBoundry=b.slideCount-b.carouselVisible,this.prepareDimensions(b)},prepareDimensions:function(b){var c,d,e,f=b.carouselVertical,g=b.carouselVisible||b.slides.length;if(b.carouselFluid&&b.carouselVisible?b._carouselResizeThrottle||this.fluidSlides(b):b.carouselVisible&&b.carouselSlideDimension?(c=g*b.carouselSlideDimension,b.container[f?"height":"width"](c)):b.carouselVisible&&(c=g*a(b.slides[0])[f?"outerHeight":"outerWidth"](!0),b.container[f?"height":"width"](c)),d=b.carouselOffset||0,b.allowWrap!==!1)if(b.carouselSlideDimension)d-=(b.slideCount+b.currSlide)*b.carouselSlideDimension;else{e=b._carouselWrap.children();for(var h=0;h<b.slideCount+b.currSlide;h++)d-=a(e[h])[f?"outerHeight":"outerWidth"](!0)}b._carouselWrap.css(f?"top":"left",d)},fluidSlides:function(b){function c(){clearTimeout(e),e=setTimeout(d,20)}function d(){b._carouselWrap.stop(!1,!0);var a=b.container.width()/b.carouselVisible;a=Math.ceil(a-g),b._carouselWrap.children().width(a),b._sentinel&&b._sentinel.width(a),h(b)}var e,f=b.slides.eq(0),g=f.outerWidth()-f.width(),h=this.prepareDimensions;a(window).on("resize",c),b._carouselResizeThrottle=c,d()},transition:function(b,c,d,e,f){var g,h={},i=b.nextSlide-b.currSlide,j=b.carouselVertical,k=b.speed;if(b.allowWrap===!1){e=i>0;var l=b._currSlide,m=b.slideCount-b.carouselVisible;i>0&&b.nextSlide>m&&l==m?i=0:i>0&&b.nextSlide>m?i=b.nextSlide-l-(b.nextSlide-m):0>i&&b.currSlide>m&&b.nextSlide>m?i=0:0>i&&b.currSlide>m?i+=b.currSlide-m:l=b.currSlide,g=this.getScroll(b,j,l,i),b.API.opts()._currSlide=b.nextSlide>m?m:b.nextSlide}else e&&0===b.nextSlide?(g=this.getDim(b,b.currSlide,j),f=this.genCallback(b,e,j,f)):e||b.nextSlide!=b.slideCount-1?g=this.getScroll(b,j,b.currSlide,i):(g=this.getDim(b,b.currSlide,j),f=this.genCallback(b,e,j,f));h[j?"top":"left"]=e?"-="+g:"+="+g,b.throttleSpeed&&(k=g/a(b.slides[0])[j?"height":"width"]()*b.speed),b._carouselWrap.animate(h,k,b.easing,f)},getDim:function(b,c,d){var e=a(b.slides[c]);return e[d?"outerHeight":"outerWidth"](!0)},getScroll:function(a,b,c,d){var e,f=0;if(d>0)for(e=c;c+d>e;e++)f+=this.getDim(a,e,b);else for(e=c;e>c+d;e--)f+=this.getDim(a,e,b);return f},genCallback:function(b,c,d,e){return function(){var c=a(b.slides[b.nextSlide]).position(),f=0-c[d?"top":"left"]+(b.carouselOffset||0);b._carouselWrap.css(b.carouselVertical?"top":"left",f),e()}},stopTransition:function(){var a=this.opts();a.slides.stop(!1,!0),a._carouselWrap.stop(!1,!0)},onDestroy:function(){var b=this.opts();b._carouselResizeThrottle&&a(window).off("resize",b._carouselResizeThrottle),b.slides.prependTo(b.container),b._carouselWrap.remove()}}}(jQuery),function(a){a.event.special.swipe=a.event.special.swipe||{scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var b=a(this);b.bind("touchstart",function(c){function d(b){if(g){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b;e={time:(new Date).getTime(),coords:[c.pageX,c.pageY]},Math.abs(g.coords[0]-e.coords[0])>a.event.special.swipe.scrollSupressionThreshold&&b.preventDefault()}}var e,f=c.originalEvent.touches?c.originalEvent.touches[0]:c,g={time:(new Date).getTime(),coords:[f.pageX,f.pageY],origin:a(c.target)};b.bind("touchmove",d).one("touchend",function(){b.unbind("touchmove",d),g&&e&&e.time-g.time<a.event.special.swipe.durationThreshold&&Math.abs(g.coords[0]-e.coords[0])>a.event.special.swipe.horizontalDistanceThreshold&&Math.abs(g.coords[1]-e.coords[1])<a.event.special.swipe.verticalDistanceThreshold&&g.origin.trigger("swipe").trigger(g.coords[0]>e.coords[0]?"swipeleft":"swiperight"),g=e=void 0})})}},a.event.special.swipeleft=a.event.special.swipeleft||{setup:function(){a(this).bind("swipe",a.noop)}},a.event.special.swiperight=a.event.special.swiperight||a.event.special.swipeleft}(jQuery);var styleForm=function(){return{init:function(a,b){return this.select(a.find("select").not(b)),a.find("button[type=reset], .btn-reset").click(function(b){b.preventDefault(),a[0].reset(),styleForm.reloadSelect(a)}),this},file:function(a){$aFile=new Array,a.each(function(a){$aFile[a]=$(this).css("opacity",0),$aFile[a].upload=$('<div class="file-input"></div>'),$aFile[a].uploadFeedback=$('<span class="file-input-feedback" aria-hidden="true">No file selected...</span>').appendTo($aFile[a].upload),$aFile[a].uploadButton=$('<span class="file-input-button" aria-hidden="true">Browse</span>').appendTo($aFile[a].upload),$aFile[a].upload.insertAfter($aFile[a]),$aFile[a].appendTo($aFile[a].upload),$aFile[a].addClass("file-input").focus(function(){$aFile[a].upload.addClass("file-input-focus"),$aFile[a].data("val",$aFile[a].val())}).blur(function(){$aFile[a].removeClass("file-input"),$(this).trigger("checkChange")}).bind("checkChange",function(){$aFile[a].val()&&$aFile[a].val()!=$aFile[a].data("val")&&$aFile[a].trigger("change")}).bind("change",function(){var b=$(this).val().split(/\\/).pop(),c="file-input-ext-"+b.split(".").pop().toLowerCase();$aFile[a].uploadFeedback.text(b).removeClass($aFile[a].uploadFeedback.data("fileExt")||"").addClass(c).data("fileExt",c).addClass("file-input-feedback-populated"),$aFile[a].uploadButton.text("Change")}).click(function(){$aFile[a].data("val",$aFile[a].val()),setTimeout(function(){$aFile[a].trigger("checkChange")},100)})})},checkbox:function(a){var b,c,d,e,f=new Array,g=new Array;a.each(function(a){e=$(this),f[a]=e,c="sCheckbox ",c+="undefined"!=e.attr("class")?e.attr("class"):"",c+=e.is(":checked")?" checked":"",e.hide(0),b=$('<div class="'+c+'" id="'+e.attr("name").replace(/$/gi,"_")+'"><span class="check"></span></div>'),g[a]=b,e.before(b);var h=$('label[for="'+e.attr("id")+'"]');$click=e.parent().is("label")?e.parent():h.length>0?$(h).add(b):b,$click.on("click toggleCheck",function(b){b.preventDefault(),d=f[a].is(":checked")?!1:!0,f[a].trigger("click").attr("checked",d),d?g[a].addClass("checked"):g[a].removeClass("checked")}),f[a].on({checked:function(b,c){f[a].prop("checked",c),g[a].removeClass("checked")},toggleCheck:function(){d=f[a].is(":checked")?!1:!0,f[a].trigger("click").attr("checked",d),d?g[a].addClass("checked"):g[a].removeClass("checked")}})})},radio:function(a){var b=new Array,c=new Array;a.each(function(d){b[d]=$(this),className="sRadio "+b[d].attr("name").replace(/\$/gi,"_")+" ",className+="undefined"!=b[d].attr("class")?b[d].attr("class"):"",className+=b[d].is(":checked")?" checked":"",b[d].hide(0),$html=$('<div class="'+className+'" id="'+b[d].attr("name").replace(/\$/gi,"_")+d+'"><span class="check"></span></div>'),c[d]=$html,b[d].before($html).trigger("onclick"),$click=b[d].parent().is("label")||b[d].parent().find("label").length>0?b[d].parent():$html,$click.on({click:function(e){e.preventDefault(),a.attr("checked",!1),$("."+b[d].attr("name").replace(/\$/gi,"_")).removeClass("checked"),b[d].attr("checked",!0),c[d].addClass("checked")},"mouseover focus":function(){c[d].toggleClass("hover")},"mouseout focusout":function(){c[d].toggleClass("hover")}})})},select:function(a){var b=new Array,c=new Array,d=a.length;a.each(function(a){b[a]=$(this).hide();var e=b[a].find("option:checked").length>0?b[a].find("option:checked"):b[a].find("option").eq(0),f=!1;className="sSelect ",className+="undefined"!=b[a].attr("class")?b[a].attr("class"):"",className+=b[a].attr("disabled")?" disabled":"",c[a]=$("<div class='"+className+"' id='"+b[a].attr("name")+"' style='z-index: "+(d-a)+"'>"+"   <div class='select-arrow'></div>"+"	<a href='#'>"+"		<span class='select'>"+e.text()+"</span>"+"		<span class='options'></span>"+"	</a>"+"</div>"),b[a].find("option").each(function(){c[a].find(".options").css("display","none").append($("<span>"+$(this).text()+"</span>").attr("data-value",$(this).val()).addClass($(this).val()==e.val()?"selected":""))}),b[a].before(c[a]),c[a].find("a").css("width",c[a].width()),c[a].css("width").indexOf("%")>0&&(f=!0),c[a].on({mouseover:function(){$(this).addClass("hover")},mouseout:function(){$(this).removeClass("hover")},click:function(b){b.preventDefault();var d=$(this),e=$(this).find(".selected").next();d.hasClass("disabled")||(f&&c[a].find("a").css("width",c[a].width()-2*parseFloat(c[a].css("padding-left"))),console.log(c[a].width(),2*parseFloat(c[a].css("padding-left"))),d.addClass("open").find(".options").slideDown(500,function(){$(document).one("click",function(){c[a].removeClass("open").find(".options").hide()}),d.find(".options").scrollTop(e.index()*e.height())}))},disabled:function(){$(this).addClass("disabled"),b[a].attr("disabled","disabled")},enabled:function(){$(this).removeClass("disabled"),b[a].removeAttr("disabled")}}),c[a].find(".options span").on("click select",function(){var d=$(this);b[a].val(d.data("value")).trigger("change"),c[a].find(".selected").removeClass("selected").end().find("span.select").text(d.addClass("selected").text())}),c[a].find(".options")[0].draggable=!1,c[a].find(".options")[0].onmousedown=function(){return!1}})},reloadSelect:function(a){a.find("select").each(function(){var a=$(this);newSelected=a.find("option:checked").length>0?a.find("option:checked").text():a.find("option").eq(0).text(),$("#"+a.attr("name")).find(".select").text(newSelected)})},reformSelect:function(a){a.find(".sSelect").remove(),this.select(a.find("select"))}}}();!function(a){function b(b){return b[0]&&a.isPlainObject(b[0])?this.data=b[0]:this.el=b,this.isCoords=!0,this.coords={},this.init(),this}var c=b.prototype;c.init=function(){this.set(),this.original_coords=this.get()},c.set=function(a,b){var c=this.el;if(c&&!a&&(this.data=c.offset(),this.data.width=c.width(),this.data.height=c.height()),c&&a&&!b){var d=c.offset();this.data.top=d.top,this.data.left=d.left}var e=this.data;return this.coords.x1=e.left,this.coords.y1=e.top,this.coords.x2=e.left+e.width,this.coords.y2=e.top+e.height,this.coords.cx=e.left+e.width/2,this.coords.cy=e.top+e.height/2,this.coords.width=e.width,this.coords.height=e.height,this.coords.el=c||!1,this},c.update=function(b){if(!b&&!this.el)return this;if(b){var c=a.extend({},this.data,b);return this.data=c,this.set(!0,!0)}return this.set(!0),this},c.get=function(){return this.coords},a.fn.coords=function(){if(this.data("coords"))return this.data("coords");var a=new b(this,arguments[0]);return this.data("coords",a),a}}(jQuery,window,document),function(a,b,c){function d(b,c,d){this.options=a.extend(e,d),this.$element=b,this.last_colliders=[],this.last_colliders_coords=[],"string"==typeof c||c instanceof jQuery?this.$colliders=a(c,this.options.colliders_context).not(this.$element):this.colliders=a(c),this.init()}var e={colliders_context:c.body},f=d.prototype;f.init=function(){this.find_collisions()},f.overlaps=function(a,b){var c=!1,d=!1;return(b.x1>=a.x1&&b.x1<=a.x2||b.x2>=a.x1&&b.x2<=a.x2||a.x1>=b.x1&&a.x2<=b.x2)&&(c=!0),(b.y1>=a.y1&&b.y1<=a.y2||b.y2>=a.y1&&b.y2<=a.y2||a.y1>=b.y1&&a.y2<=b.y2)&&(d=!0),c&&d},f.detect_overlapping_region=function(a,b){var c="",d="";return a.y1>b.cy&&a.y1<b.y2&&(c="N"),a.y2>b.y1&&a.y2<b.cy&&(c="S"),a.x1>b.cx&&a.x1<b.x2&&(d="W"),a.x2>b.x1&&a.x2<b.cx&&(d="E"),c+d||"C"},f.calculate_overlapped_area_coords=function(b,c){var d=Math.max(b.x1,c.x1),e=Math.max(b.y1,c.y1),f=Math.min(b.x2,c.x2),g=Math.min(b.y2,c.y2);return a({left:d,top:e,width:f-d,height:g-e}).coords().get()},f.calculate_overlapped_area=function(a){return a.width*a.height},f.manage_colliders_start_stop=function(b,c,d){for(var e=this.last_colliders_coords,f=0,g=e.length;g>f;f++)-1===a.inArray(e[f],b)&&c.call(this,e[f]);for(var h=0,i=b.length;i>h;h++)-1===a.inArray(b[h],e)&&d.call(this,b[h])},f.find_collisions=function(b){for(var c=this,d=[],e=[],f=this.colliders||this.$colliders,g=f.length,h=c.$element.coords().update(b||!1).get();g--;){var i=c.$colliders?a(f[g]):f[g],j=i.isCoords?i:i.coords(),k=j.get(),l=c.overlaps(h,k);if(l){var m=c.detect_overlapping_region(h,k);if("C"===m){var n=c.calculate_overlapped_area_coords(h,k),o=c.calculate_overlapped_area(n),p={area:o,area_coords:n,region:m,coords:k,player_coords:h,el:i};c.options.on_overlap&&c.options.on_overlap.call(this,p),d.push(j),e.push(p)}}}return(c.options.on_overlap_stop||c.options.on_overlap_start)&&this.manage_colliders_start_stop(d,c.options.on_overlap_start,c.options.on_overlap_stop),this.last_colliders_coords=d,e},f.get_closest_colliders=function(a){var b=this.find_collisions(a);return b.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:a.area<b.area?1:1}),b},a.fn.collision=function(a,b){return new d(this,a,b)}}(jQuery,window,document),function(a){a.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},a.throttle=function(a,b){var c,d,e,f,g,h,i=debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}}}(window),function(a,b,c){function d(b,d){this.options=a.extend({},e,d),this.$body=a(c.body),this.$container=a(b),this.$dragitems=a(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var e={items:".gs_w",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null},f=a(b),g=!!("ontouchstart"in b),h={start:g?"touchstart":"mousedown.draggable",move:g?"touchmove":"mousemove.draggable",end:g?"touchend":"mouseup.draggable"},i=d.prototype;i.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),this.on_window_resize=throttle(a.proxy(this.calculate_positions,this),200),a(b).bind("resize",this.on_window_resize)},i.events=function(){this.proxied_on_select_start=a.proxy(this.on_select_start,this),this.$container.on("selectstart",this.proxied_on_select_start),this.proxied_drag_handler=a.proxy(this.drag_handler,this),this.$container.on(h.start,this.options.items,this.proxied_drag_handler),this.proxied_pointer_events_end=a.proxy(function(a){this.is_dragging=!1,this.disabled||(this.$body.off(h.move),this.drag_start&&this.on_dragstop(a))},this),this.$body.on(h.end,this.proxied_pointer_events_end)},i.get_actual_pos=function(a){var b=a.position();return b},i.get_mouse_pos=function(a){if(g){var b=a.originalEvent;a=b.touches.length?b.touches[0]:b.changedTouches[0]}return{left:a.clientX,top:a.clientY}},i.get_offset=function(a){a.preventDefault();var b=this.get_mouse_pos(a),c=Math.round(b.left-this.mouse_init_pos.left),d=Math.round(b.top-this.mouse_init_pos.top),e=Math.round(this.el_init_offset.left+c-this.baseX),f=Math.round(this.el_init_offset.top+d-this.baseY+this.scrollOffset);return this.options.limit&&(e>this.player_max_left?e=this.player_max_left:e<this.player_min_left&&(e=this.player_min_left)),{left:e,top:f,mouse_left:b.left,mouse_top:b.top}},i.manage_scroll=function(a){var b,c=f.scrollTop(),d=c,e=d+this.window_height,g=e-50,h=d+50;a.mouse_left;var i=d+a.mouse_top,j=this.doc_height-this.window_height+this.player_height;i>=g&&(b=c+30,j>b&&(f.scrollTop(b),this.scrollOffset=this.scrollOffset+30)),h>=i&&(b=c-30,b>0&&(f.scrollTop(b),this.scrollOffset=this.scrollOffset-30))},i.calculate_positions=function(){this.window_height=f.height()},i.drag_handler=function(b){if(b.target.nodeName,!this.disabled&&(1===b.which||g)&&!this.ignore_drag(b)){var c=this,d=!0;return this.$player=a(b.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(b),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.on_pointer_events_move=function(a){var b=c.get_mouse_pos(a),e=Math.abs(b.left-c.mouse_init_pos.left),f=Math.abs(b.top-c.mouse_init_pos.top);return e>c.options.distance||f>c.options.distance?d?(d=!1,c.on_dragstart.call(c,a),!1):(c.is_dragging===!0&&c.on_dragmove.call(c,a),!1):!1},this.$body.on(h.move,this.on_pointer_events_move),!1}},i.on_dragstart=function(b){b.preventDefault(),this.drag_start=!0,this.is_dragging=!0;var d=this.$container.offset();return this.baseX=Math.round(d.left),this.baseY=Math.round(d.top),this.doc_height=a(c).height(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.player_max_left=this.$container.width()-this.player_width+this.options.offset_left,this.options.start&&this.options.start.call(this.$player,b,{helper:this.helper?this.$helper:this.$player}),!1},i.on_dragmove=function(a){var b=this.get_offset(a);this.options.autoscroll&&this.manage_scroll(b),(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.left,top:b.top});var c={position:{left:b.left,top:b.top}};return this.options.drag&&this.options.drag.call(this.$player,a,c),!1},i.on_dragstop=function(a){var b=this.get_offset(a);this.drag_start=!1;var c={position:{left:b.left,top:b.top}};return this.options.stop&&this.options.stop.call(this.$player,a,c),this.helper&&this.$helper.remove(),!1},i.on_select_start=function(a){return this.disabled||this.ignore_drag(a)?void 0:!1},i.enable=function(){this.disabled=!1},i.disable=function(){this.disabled=!0},i.destroy=function(){this.disable(),this.$container.off("selectstart",this.proxied_on_select_start),this.$container.off(h.start,this.proxied_drag_handler),this.$body.off(h.end,this.proxied_pointer_events_end),this.$body.off(h.move,this.on_pointer_events_move),a(b).unbind("resize",this.on_window_resize),a.removeData(this.$container,"drag")},i.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.inArray(b.target.nodeName,this.options.ignore_dragging)>=0},a.fn.dragg=function(b){return this.each(function(){a.data(this,"drag")||a.data(this,"drag",new d(this,b))})}}(jQuery,window,document),function(a,b,c){function d(b,c){this.options=a.extend(!0,e,c),this.$el=a(b),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs_w"),this.widgets=[],this.$changed=a([]),this.w_queue={},this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.$style_tags=a([]),this.init()}var e={namespace:"",widget_selector:"li",static_class:"static",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:60,min_rows:15,max_rows:15,max_size_x:6,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,shift_larger_widgets_down:!0,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{distance:4,items:".gs_w:not(.static)"}};d.generated_stylesheets=[];var f=d.prototype;f.init=function(){this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.$wrapper.addClass("ready"),this.draggable(),a(b).bind("resize",throttle(a.proxy(this.recalculate_faux_grid,this),200))},f.destroyRemove=function(c){return this.$el.removeData("gridster"),a(b).unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.remove_style_tags(),c&&this.$el.remove(),this},f.remove_style_tags=function(){var b=d.generated_stylesheets,c=this.generated_stylesheets;this.$style_tags.remove(),d.generated_stylesheets=a.map(b,function(b){return-1===a.inArray(b,c)?b:void 0})},f.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},f.enable=function(){return this.drag_api.enable(),this},f.add_widget=function(b,c,d,e,f){var g;c||(c=1),d||(d=1),!e&!f?g=this.next_position(c,d):(g={col:e,row:f},this.empty_cells(e,f,c,d));var h=a(b).attr({"data-col":g.col,"data-row":g.row,"data-sizex":c,"data-sizey":d}).addClass("gs_w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(h),this.$changed=this.$changed.add(h),this.register_widget(h),this.add_faux_rows(g.size_y),this.set_dom_grid_height(),h.fadeIn()},f.resize_widget=function(b,c,d){var e=b.coords().grid;c||(c=e.size_x),d||(d=e.size_y),c>this.cols&&(c=this.cols);var f=this.get_cells_occupied(e),g=e.size_x,h=e.size_y,i=e.col,j=i;if(i+c-1>this.cols){var k=i+(c-1)-this.cols,l=i-k;j=Math.max(1,l)}var m={col:j,row:e.row,size_x:c,size_y:d},n=this.get_cells_occupied(m),o=[];a.each(f.cols,function(b,c){-1===a.inArray(c,n.cols)&&o.push(c)});var p=[];a.each(n.cols,function(b,c){-1===a.inArray(c,f.cols)&&p.push(c)});var q=[];a.each(f.rows,function(b,c){-1===a.inArray(c,n.rows)&&q.push(c)});var r=[];if(a.each(n.rows,function(b,c){-1===a.inArray(c,f.rows)&&r.push(c)}),this.remove_from_gridmap(e),p.length){var s=[j,e.row,c,Math.min(h,d),b];this.empty_cells.apply(this,s)}if(r.length){var t=[j,e.row,c,d,b];this.empty_cells.apply(this,t)}if(e.col=j,e.size_x=c,e.size_y=d,this.add_to_gridmap(m,b),b.data("coords").update({width:c*this.options.widget_base_dimensions[0]+2*(c-1)*this.options.widget_margins[0],height:d*this.options.widget_base_dimensions[1]+2*(d-1)*this.options.widget_margins[1]}),d>h&&this.add_faux_rows(d-h),c>g&&this.add_faux_cols(c-g),b.attr({"data-col":j,"data-sizex":c,"data-sizey":d}),o.length){var u=[o[0],e.row,o.length,Math.min(h,d),b];this.remove_empty_cells.apply(this,u)}if(q.length){var v=[j,e.row,c,d,b];this.remove_empty_cells.apply(this,v)}return b},f.empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c-e,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,d){var f=a(d).coords().grid;if(f.row<=c+e-1){var g=c+e-f.row;this.move_widget_down(a(d),g)}},this)),this.set_dom_grid_height(),this},f.remove_empty_cells=function(a,b,c,d){return this.widgets_below({col:a,row:b,size_x:c,size_y:d}),this.set_dom_grid_height(),this},f.next_position=function(a,b){a||(a=1),b||(b=1);for(var c,d=this.gridmap,e=d.length,f=[],g=1;e>g;g++){c=d[g].length;for(var h=1;c>=h;h++){var i=this.can_move_to({size_x:a,size_y:b},g,h);i&&f.push({col:g,row:h,size_y:b,size_x:a})}}return f.length?this.sort_by_row_and_col_asc(f)[0]:!1},f.remove_by_grid=function(a,b){var c=this.is_widget(a,b);c&&this.remove_widget(c)},f.remove_widget=function(b,c,d){var e=b instanceof jQuery?b:a(b),f=e.coords().grid;a.isFunction(c)&&(d=c,c=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(e);var g=this.widgets_below(e);this.remove_from_gridmap(f),e.fadeOut(a.proxy(function(){e.remove(),c||g.each(a.proxy(function(b,c){this.move_widget_up(a(c),f.size_y)},this)),this.set_dom_grid_height(),d&&d.call(this,b)},this))},f.remove_all_widgets=function(b){return this.$widgets.each(a.proxy(function(a,c){this.remove_widget(c,!0,b)},this)),this},f.serialize=function(b){b||(b=this.$widgets);var c=[];return b.each(a.proxy(function(b,d){"undefined"!=typeof a(d).coords().grid&&c.push(this.options.serialize_params(a(d),a(d).coords().grid))},this)),c},f.serialize_changed=function(){return this.serialize(this.$changed)},f.register_widget=function(a){var b={col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10),size_y:parseInt(a.attr("data-sizey"),10),el:a};return this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:b.size_x,size_y:b.size_y},b.col,b.row)&&(b=this.next_position(b.size_x,b.size_y),b.el=a,a.attr({"data-col":b.col,"data-row":b.row,"data-sizex":b.size_x,"data-sizey":b.size_y})),a.data("coords",a.coords()),a.data("coords").grid=b,this.add_to_gridmap(b,a),this},f.update_widget_position=function(a,b){return this.for_each_cell_occupied(a,function(a,c){return this.gridmap[a]?(this.gridmap[a][c]=b,void 0):this}),this},f.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)},f.add_to_gridmap=function(a,b){this.update_widget_position(a,b||a.el)},f.draggable=function(){var b=this,c=a.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],start:function(c,d){b.$widgets.filter(".player-revert").removeClass("player-revert"),b.$player=a(this),b.$helper="clone"===b.options.draggable.helper?a(d.helper):b.$player,b.helper=!b.$helper.is(b.$player),b.on_start_drag.call(b,c,d),b.$el.trigger("gridster:dragstart")},stop:function(a,c){b.on_stop_drag.call(b,a,c),b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,c){b.on_drag.call(b,a,c),b.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.dragg(c).data("drag"),this},f.on_start_drag=function(b,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=a.extend({},this.player_grid_data),this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var d=this.faux_grid,e=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(d,this.options.collision),this.$preview_holder=a("<li />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:e.width,height:e.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,b,c)},f.on_drag=function(a,b){if(null===this.$player)return!1;var c={left:b.position.left+this.baseX,top:b.position.top+this.baseY};this.colliders_data=this.collision_api.get_closest_colliders(c),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)},f.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),b.position.left=b.position.left+this.baseX,b.position.top=b.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(b.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.w_queue={},this.set_dom_grid_height()},f.on_overlapped_column_change=function(b,c){if(this.colliders_data.length){var d,e=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_cols)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_cols[d],e)&&(c||a.noop).call(this,this.last_cols[d]);return this.last_cols=e,this}},f.on_overlapped_row_change=function(b,c){if(this.colliders_data.length){var d,e=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_rows)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_rows[d],e)&&(c||a.noop).call(this,this.last_rows[d]);this.last_rows=e}},f.set_player=function(b,c,d){var e=this,f=!1;d||this.empty_cells_player_occupies();var g=d?{col:b}:e.colliders_data[0].el.data,h=g.col,i=g.row||c;this.player_grid_data={col:h,row:i,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);var j=this.get_widgets_overlapped(this.player_grid_data),k=this.player_grid_data.size_y,l=this.player_grid_data.size_x,m=this.cells_occupied_by_placeholder,n=this;if(j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid;e.col=parseInt(e.col),e.row=parseInt(e.row),e.size_x=parseInt(e.size_x),e.size_y=parseInt(e.size_y),l=parseInt(l),k=parseInt(k);var g=m.cols[0]+l-1,o=m.rows[0]+k-1;if(d.hasClass(n.options.static_class))return!0;if(e.size_x<=l&&e.size_y<=k)if(n.is_swap_occupied(m.cols[0],e.row,e.size_x,e.size_y)||n.is_player_in(m.cols[0],e.row)||n.is_in_queue(m.cols[0],e.row,d))if(n.is_swap_occupied(g,e.row,e.size_x,e.size_y)||n.is_player_in(g,e.row)||n.is_in_queue(g,e.row,d))if(n.is_swap_occupied(e.col,m.rows[0],e.size_x,e.size_y)||n.is_player_in(e.col,m.rows[0])||n.is_in_queue(e.col,m.rows[0],d))if(n.is_swap_occupied(e.col,o,e.size_x,e.size_y)||n.is_player_in(e.col,o)||n.is_in_queue(e.col,o,d))if(n.is_swap_occupied(m.cols[0],m.rows[0],e.size_x,e.size_y)||n.is_player_in(m.cols[0],m.rows[0])||n.is_in_queue(m.cols[0],m.rows[0],d))for(var p=0;l>p;p++)for(var q=0;k>q;q++){var r=m.cols[0]+p,s=m.rows[0]+q;if(!n.is_swap_occupied(r,s,e.size_x,e.size_y)&&!n.is_player_in(r,s)&&!n.is_in_queue(r,s,d)){f=n.queue_widget(r,s,d),p=l;break}}else f=n.queue_widget(m.cols[0],m.rows[0],d);else f=n.queue_widget(e.col,o,d);else f=n.queue_widget(e.col,m.rows[0],d);else f=n.queue_widget(g,e.row,d);else f=n.queue_widget(m.cols[0],e.row,d);else n.options.shift_larger_widgets_down&&!f&&j.each(a.proxy(function(b,c){var d=a(c);d.coords().grid,n.can_go_down(d)&&(n.move_widget_down(d,n.player_grid_data.size_y),n.set_placeholder(h,i))
}));n.clean_up_changed()})),f&&this.can_placeholder_be_set(h,i,l,k)){for(var o in this.w_queue){var b=parseInt(o.split("_")[0]),c=parseInt(o.split("_")[1]);"full"!=this.w_queue[o]&&this.new_move_widget_to(this.w_queue[o],b,c)}this.set_placeholder(h,i)}if(!j.length){var p=this.can_go_player_up(this.player_grid_data);p!==!1&&(i=p),this.can_placeholder_be_set(h,i,l,k)&&this.set_placeholder(h,i)}return this.w_queue={},{col:h,row:i}},f.is_swap_occupied=function(a,b,c,d){for(var e=!1,f=0;c>f;f++)for(var g=0;d>g;g++){var h=a+f,i=b+g,j=h+"_"+i;if(this.is_occupied(h,i))e=!0;else if(j in this.w_queue){if("full"==this.w_queue[j]){e=!0;continue}$tw=this.w_queue[j],tgd=$tw.coords().grid,this.is_widget_under_player(tgd.col,tgd.row)||delete this.w_queue[j]}i>parseInt(this.options.max_rows)&&(e=!0),h>parseInt(this.options.max_cols)&&(e=!0),this.is_player_in(h,i)&&(e=!0)}return e},f.can_placeholder_be_set=function(a,b,c,d){for(var e=!0,f=0;c>f;f++)for(var g=0;d>g;g++){var h=a+f,i=b+g,j=this.is_widget(h,i);i>parseInt(this.options.max_rows)&&(e=!1),h>parseInt(this.options.max_cols)&&(e=!1),this.is_occupied(h,i)&&!this.is_widget_queued_and_can_move(j)&&(e=!1)}return e},f.queue_widget=function(a,b,c){var d=c,e=d.coords().grid,f=a+"_"+b;if(f in this.w_queue)return!1;this.w_queue[f]=d;for(var g=0;g<e.size_x;g++)for(var h=0;h<e.size_y;h++){var i=a+g,j=b+h,k=i+"_"+j;k!=f&&(this.w_queue[k]="full")}return!0},f.is_widget_queued_and_can_move=function(a){var b=!1;if(a===!1)return!1;for(var c in this.w_queue)if("full"!=this.w_queue[c]&&this.w_queue[c].attr("data-col")==a.attr("data-col")&&this.w_queue[c].attr("data-row")==a.attr("data-row")){b=!0;for(var d=this.w_queue[c],e=parseInt(c.split("_")[0]),f=parseInt(c.split("_")[1]),g=d.coords().grid,h=0;h<g.size_x;h++)for(var i=0;i<g.size_y;i++){var j=e+h,k=f+i;this.is_player_in(j,k)&&(b=!1)}}return b},f.is_in_queue=function(a,b,c){var d=!1,e=a+"_"+b;return e in this.w_queue&&("full"==this.w_queue[e]?d=!0:($tw=this.w_queue[e],tgd=$tw.coords().grid,this.is_widget_under_player(tgd.col,tgd.row)?this.w_queue[e].attr("data-col")==c.attr("data-col")&&this.w_queue[e].attr("data-row")==c.attr("data-row")?(delete this.w_queue[e],d=!1):d=!0:(delete this.w_queue[e],d=!1))),d},f.widgets_constraints=function(b){var c,d=a([]),e=[],f=[];return b.each(a.proxy(function(b,c){var g=a(c),h=g.coords().grid;this.can_go_widget_up(h)?(d=d.add(g),e.push(h)):f.push(h)},this)),c=b.not(d),{can_go_up:this.sort_by_row_asc(e),can_not_go_up:this.sort_by_row_desc(f)}},f.sort_by_row_asc=function(b){return b=b.sort(function(b,c){return b.row||(b=a(b).coords().grid,c=a(c).coords().grid),b.row>c.row?1:-1})},f.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})},f.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})},f.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})},f.manage_movements=function(b,c,d){return a.each(b,a.proxy(function(a,b){var e=b,f=e.el,g=this.can_go_widget_up(e);if(g)this.move_widget_to(f,g),this.set_placeholder(c,g+e.size_y);else{var h=this.can_go_player_up(this.player_grid_data);if(!h){var i=d+this.player_grid_data.size_y-e.row;this.can_go_down(f)&&(console.log("In Move Down!"),this.move_widget_down(f,i),this.set_placeholder(c,d))}}},this)),this},f.is_player=function(a,b){if(b&&!this.gridmap[a])return!1;var c=b?this.gridmap[a][b]:a;return c&&(c.is(this.$player)||c.is(this.$helper))},f.is_player_in=function(b,c){var d=this.cells_occupied_by_player||{};return a.inArray(b,d.cols)>=0&&a.inArray(c,d.rows)>=0},f.is_placeholder_in=function(b,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(c,d.rows)>=0},f.is_placeholder_in_col=function(b){var c=this.cells_occupied_by_placeholder||[];return a.inArray(b,c.cols)>=0},f.is_empty=function(a,b){return"undefined"!=typeof this.gridmap[a]&&"undefined"!=typeof this.gridmap[a][b]&&this.gridmap[a][b]===!1?!0:!1},f.is_occupied=function(a,b){return this.gridmap[a]?this.gridmap[a][b]?!0:!1:!1},f.is_widget=function(a,b){var c=this.gridmap[a];return c?(c=c[b],c?c:!1):!1},f.is_static=function(a,b){var c=this.gridmap[a];return c?(c=c[b],c&&c.hasClass(this.options.static_class)?!0:!1):!1},f.is_widget_under_player=function(a,b){return this.is_widget(a,b)?this.is_player_in(a,b):!1},f.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var c=a([]);return a.each(b.cols,a.proxy(function(d,e){a.each(b.rows,a.proxy(function(a,b){this.is_widget(e,b)&&(c=c.add(this.gridmap[e][b]))},this))},this)),c},f.set_placeholder=function(b,c){var d=a.extend({},this.placeholder_grid_data),e=this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,size_x:d.size_x}),f=b+parseInt(d.size_x)-1;f>this.cols&&(b-=f-b);var g=this.placeholder_grid_data.row<c,h=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b,this.placeholder_grid_data.row=c,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":c,"data-col":b}),(g||h)&&e.each(a.proxy(function(b,c){$w=a(c),wgd=$w.coords().grid;var d=this.can_go_widget_up(wgd);d&&this.move_widget_to($w,d)},this));var i=this.get_widgets_under_player(this.cells_occupied_by_placeholder);i.length&&i.each(a.proxy(function(b,e){var f=a(e);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this))},f.can_go_player_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4,f=this.get_widgets_under_player();return this.for_each_column_occupied(a,function(a){var g=this.gridmap[a],h=b+1;for(d[a]=[];--h>0&&(this.is_empty(a,h)||this.is_player(a,h)||this.is_widget(a,h)&&g[h].is(f));)d[a].push(h),e=e>h?h:e;return 0===d[a].length?(c=!1,!0):(d[a].sort(),void 0)}),c?this.get_valid_rows(a,d,e):!1},f.can_go_widget_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4;return this.for_each_column_occupied(a,function(f){var g=this.gridmap[f];d[f]=[];for(var h=b+1;--h>0&&(!this.is_widget(f,h)||this.is_player_in(f,h)||g[h].is(a.el));)this.is_player(f,h)||this.is_placeholder_in(f,h)||this.is_player_in(f,h)||d[f].push(h),e>h&&(e=h);return 0===d[f].length?(c=!1,!0):(d[f].sort(),void 0)}),c?this.get_valid_rows(a,d,e):!1},f.get_valid_rows=function(b,c,d){for(var e=b.row,f=b.row+b.size_y-1,g=b.size_y,h=d-1,i=[];++h<=f;){var j=!0;if(a.each(c,function(b,c){a.isArray(c)&&-1===a.inArray(h,c)&&(j=!1)}),j===!0&&(i.push(h),i.length===g))break}var k=!1;return 1===g?i[0]!==e&&(k=i[0]||!1):i[0]!==e&&(k=this.get_consecutive_numbers_index(i,g)),k},f.get_consecutive_numbers_index=function(a,b){for(var c=a.length,d=[],e=!0,f=-1,g=0;c>g;g++){if(e||a[g]===f+1){if(d.push(g),d.length===b)break;e=!1}else d=[],e=!0;f=a[g]}return d.length>=b?a[d[0]]:!1},f.get_widgets_overlapped=function(){var b=a([]),c=[],d=this.cells_occupied_by_player.rows.slice(0);return d.reverse(),a.each(this.cells_occupied_by_player.cols,a.proxy(function(e,f){a.each(d,a.proxy(function(d,e){if(!this.gridmap[f])return!0;var g=this.gridmap[f][e];this.is_occupied(f,e)&&!this.is_player(g)&&-1===a.inArray(g,c)&&(b=b.add(g),c.push(g))},this))},this)),b},f.on_start_overlapping_column=function(a){this.set_player(a,!1)},f.on_start_overlapping_row=function(a){this.set_player(!1,a)},f.on_stop_overlapping_column=function(a){var b=this;this.options.shift_larger_widgets_down&&this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(){b.move_widget_up(this,b.player_grid_data.size_y)})},f.on_stop_overlapping_row=function(a){var b=this,c=this.cells_occupied_by_player.cols;if(this.options.shift_larger_widgets_down)for(var d=0,e=c.length;e>d;d++)this.for_each_widget_below(c[d],a,function(){console.log("from_on_stop_overlapping_row"),b.move_widget_up(this,b.player_grid_data.size_y)})},f.new_move_widget_to=function(a,b,c){var d=a.coords().grid;return this.remove_from_gridmap(d),d.row=c,d.col=b,this.add_to_gridmap(d),a.attr("data-row",c),a.attr("data-col",b),this.update_widget_position(d,a),this.$changed=this.$changed.add(a),this},f.move_widget_to=function(b,c){var d=this,e=b.coords().grid;c-e.row;var f=this.widgets_below(b),g=this.can_move_to(e,e.col,c,b);return g===!1?!1:(this.remove_from_gridmap(e),e.row=c,this.add_to_gridmap(e),b.attr("data-row",c),this.$changed=this.$changed.add(b),f.each(function(b,c){var e=a(c),f=e.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(e,g)}),this)},f.move_widget_up=function(b,c){var d=b.coords().grid,e=d.row,f=[];return c||(c=1),this.can_go_up(b)?(this.for_each_column_occupied(d,function(d){if(-1===a.inArray(b,f)){var g=b.coords().grid,h=e-c;if(h=this.can_go_up_to_row(g,d,h),!h)return!0;this.widgets_below(b),this.remove_from_gridmap(g),g.row=h,this.add_to_gridmap(g),b.attr("data-row",g.row),this.$changed=this.$changed.add(b),f.push(b)}}),void 0):!1},f.move_widget_down=function(b,c){var d=b.coords().grid,e=d.row,f=[],g=c;if(!b)return!1;if(-1===a.inArray(b,f)){var h=b.coords().grid,i=e+c,j=this.widgets_below(b);this.remove_from_gridmap(h),j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid,f=this.displacement_diff(e,h,g);f>0&&this.move_widget_down(d,f)},this)),h.row=i,this.update_widget_position(h,b),b.attr("data-row",h.row),this.$changed=this.$changed.add(b),f.push(b)}},f.can_go_up_to_row=function(b,c,d){var e,f=this.gridmap,g=!0,h=[],i=b.row;if(this.for_each_column_occupied(b,function(a){for(f[a],h[a]=[],e=i;e--&&this.is_empty(a,e)&&!this.is_placeholder_in(a,e);)h[a].push(e);return h[a].length?void 0:(g=!1,!0)}),!g)return!1;for(e=d,e=1;i>e;e++){for(var j=!0,k=0,l=h.length;l>k;k++)h[k]&&-1===a.inArray(e,h[k])&&(j=!1);if(j===!0){g=e;break}}return g},f.displacement_diff=function(a,b,c){var d=a.row,e=[],f=b.row+b.size_y;this.for_each_column_occupied(a,function(a){for(var b=0,c=f;d>c;c++)this.is_empty(a,c)&&(b+=1);e.push(b)});var g=Math.max.apply(Math,e);return c-=g,c>0?c:0},f.widgets_below=function(b){var c=a.isPlainObject(b)?b:b.coords().grid,d=this;this.gridmap;var e=c.row+c.size_y-1,f=a([]);return this.for_each_column_occupied(c,function(b){d.for_each_widget_below(b,e,function(){return d.is_player(this)||-1!==a.inArray(this,f)?void 0:(f=f.add(this),!0)})}),this.sort_by_row_asc(f)},f.set_cells_player_occupies=function(a,b){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=a,this.placeholder_grid_data.row=b,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},f.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},f.can_go_down=function(b){var c=!0,d=this;return b.hasClass(this.options.static_class)&&(c=!1),this.widgets_below(b).each(function(){a(this).hasClass(d.options.static_class)&&(c=!1)}),c},f.can_go_up=function(a){var b=a.coords().grid,c=b.row,d=c-1;this.gridmap;var e=!0;return 1===c?!1:(this.for_each_column_occupied(b,function(a){return this.is_widget(a,d),this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d)?(e=!1,!0):void 0}),e)},f.can_move_to=function(a,b,c,d){this.gridmap;var e=a.el,f={size_y:a.size_y,size_x:a.size_x,col:b,row:c},g=!0,h=b+a.size_x-1;return h>this.cols?!1:d&&d<c+a.size_y-1?!1:(this.for_each_cell_occupied(f,function(b,c){var d=this.is_widget(b,c);!d||a.el&&!d.is(e)||(g=!1)}),g)},f.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),c=[],d=a;b>=d;d++)c.push(d);return c},f.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),c=[],d=a;b>=d;d++)c.push(d);return c},f.get_cells_occupied=function(a){var b,c={cols:[],rows:[]};for(arguments[1]instanceof jQuery&&(a=arguments[1].coords().grid),b=0;b<a.size_x;b++){var d=a.col+b;c.cols.push(d)}for(b=0;b<a.size_y;b++){var e=a.row+b;c.rows.push(e)}return c},f.for_each_cell_occupied=function(a,b){return this.for_each_column_occupied(a,function(c){this.for_each_row_occupied(a,function(a){b.call(this,c,a)})}),this},f.for_each_column_occupied=function(a,b){for(var c=0;c<a.size_x;c++){var d=a.col+c;b.call(this,d,a)}},f.for_each_row_occupied=function(a,b){for(var c=0;c<a.size_y;c++){var d=a.row+c;b.call(this,d,a)}},f.clean_up_changed=function(){$gr=this,$gr.$changed.each(function(){$gr.options.shift_larger_widgets_down&&$gr.move_widget_up(a(this))})},f._traversing_widgets=function(b,c,d,e,f){var g=this.gridmap;if(g[d]){var h,i,j=b+"/"+c;if(arguments[2]instanceof jQuery){var k=arguments[2].coords().grid;d=k.col,e=k.row,f=arguments[3]}var l=[],m=e,n={"for_each/above":function(){for(;m--&&!(m>0&&this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]),h)););},"for_each/below":function(){for(m=e+1,i=g[d].length;i>m;m++)this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]))}};n[j]&&n[j].call(this)}},f.for_each_widget_above=function(a,b,c){return this._traversing_widgets("for_each","above",a,b,c),this},f.for_each_widget_below=function(a,b,c){return this._traversing_widgets("for_each","below",a,b,c),this},f.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,c=[],d=[],e=b.length-1;e>=1;e--)for(a=b[e].length-1;a>=1;a--)if(this.is_widget(e,a)){c.push(a),d[a]=e;break}var f=Math.max.apply(Math,c);return this.highest_occupied_cell={col:d[f],row:f},this.highest_occupied_cell},f.get_widgets_from=function(b,c){this.gridmap;var d=a();return b&&(d=d.add(this.$widgets.filter(function(){var c=a(this).attr("data-col");return c===b||c>b}))),c&&(d=d.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===c||b>c}))),d},f.set_dom_grid_height=function(){var a=this.get_highest_occupied_cell().row;return this.$el.css("height",a*this.min_widget_height),this},f.generate_stylesheet=function(b){var c,e="",f=this.options.max_size_x;b||(b={}),b.cols||(b.cols=this.cols),b.rows||(b.rows=this.rows),b.namespace||(b.namespace=this.options.namespace),b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions),b.widget_margins||(b.widget_margins=this.options.widget_margins),b.min_widget_width=2*b.widget_margins[0]+b.widget_base_dimensions[0],b.min_widget_height=2*b.widget_margins[1]+b.widget_base_dimensions[1];var g=a.param(b);if(a.inArray(g,d.generated_stylesheets)>=0)return!1;for(d.generated_stylesheets.push(g),c=b.cols;c>=0;c--)e+=b.namespace+' [data-col="'+(c+1)+'"] { left:'+33.75*c+"%;} ";for(c=b.rows;c>=0;c--)e+=b.namespace+' [data-row="'+(c+1)+'"] { top:'+(c*b.widget_base_dimensions[1]+c*b.widget_margins[1]+(c+1)*b.widget_margins[1])+"px;} ";for(var h=1;h<=b.rows;h++)e+=b.namespace+' [data-sizey="'+h+'"] { height:'+(h*b.widget_base_dimensions[1]+(h-1)*2*b.widget_margins[1])+"px;}";for(var i=1;f>=i;i++)e+=b.namespace+' [data-sizex="'+i+'"] { width:'+(i*b.widget_base_dimensions[0]+(i-1)*2*b.widget_margins[0])+"px;}";return this.remove_style_tags(),this.add_style_tag(e)},f.add_style_tag=function(a){var b=c,d=b.createElement("style");return b.getElementsByTagName("head")[0].appendChild(d),d.setAttribute("type","text/css"),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(c.createTextNode(a)),this},f.generate_faux_grid=function(a,b){this.faux_grid=[],this.gridmap=[];var c,d;for(c=b;c>0;c--)for(this.gridmap[c]=[],d=a;d>0;d--)this.add_faux_cell(d,c);return this},f.add_faux_cell=function(b,c){var d=a({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:b,original_col:c,original_row:b}).coords();return a.isArray(this.gridmap[c])||(this.gridmap[c]=[]),this.gridmap[c][b]=!1,this.faux_grid.push(d),this},f.add_faux_rows=function(a){for(var b=this.rows,c=b+(a||1),d=c;d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);return this.rows=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},f.add_faux_cols=function(a){for(var b=this.cols,c=b+(a||1),d=b;c>d;d++)for(var e=this.rows;e>=1;e--)this.add_faux_cell(e,d);return this.cols=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},f.recalculate_faux_grid=function(){var c=this.$wrapper.width();return this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this)),this},f.get_widgets_from_DOM=function(){return this.$widgets.each(a.proxy(function(b,c){this.register_widget(a(c))},this)),this},f.generate_grid_and_stylesheet=function(){var c=this.$wrapper.width();this.$wrapper.height();var d=Math.floor(c/this.min_widget_width)+this.options.extra_cols,e=this.$widgets.map(function(){return a(this).attr("data-col")});e=Array.prototype.slice.call(e,0),e.length||(e=[0]);var f=Math.max.apply(Math,e),g=this.options.extra_rows;return this.$widgets.each(function(b,c){g+=+a(c).attr("data-sizey")}),this.cols=Math.max(f,d,this.options.min_cols),this.rows=this.options.max_rows,this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new d(this,b))})},a.Gridster=f}(jQuery,window,document),function(a){var b=a.Gridster;b.widgets_in_col=function(a){if(!this.gridmap[a])return!1;for(var b=this.gridmap[a].length-1;b>=0;b--)if(this.is_widget(a,b)!==!1)return!0;return!1},b.widgets_in_row=function(a){for(var b=this.gridmap.length;b>=1;b--)if(this.is_widget(b,a)!==!1)return!0;return!1},b.widgets_in_range=function(b,c,d,e){var f,g,h,i,j=a([]);for(f=d;f>=b;f--)for(g=e;g>=c;g--)h=this.is_widget(f,g),h!==!1&&(i=h.data("coords").grid,i.col>=b&&i.col<=d&&i.row>=c&&i.row<=e&&(j=j.add(h)));return j},b.get_bottom_most_occupied_cell=function(){var a=0,b=0;return this.for_each_cell(function(c,d,e){c&&e>a&&(a=e,b=d)}),{col:b,row:a}},b.get_right_most_occupied_cell=function(){var a=0,b=0;return this.for_each_cell(function(c,d,e){return c?(a=e,b=d,!1):void 0}),{col:b,row:a}},b.for_each_cell=function(a,b){b||(b=this.gridmap);var c=b.length,d=b[1].length;a:for(var e=c-1;e>=1;e--)for(var f=d-1;f>=1;f--){var g=b[e]&&b[e][f];if(a){if(a.call(this,g,e,f)===!1)break a}else;}},b.next_position_in_range=function(a,b,c){a||(a=1),b||(b=1);for(var d,e=this.gridmap,f=e.length,g=[],h=1;f>h;h++){d=c||e[h].length;for(var i=1;d>=i;i++){var j=this.can_move_to({size_x:a,size_y:b},h,i,c);j&&g.push({col:h,row:i,size_y:b,size_x:a})}}return g.length>=1?this.sort_by_col_asc(g)[0]:!1},b.closest_to_right=function(a,b){if(!this.gridmap[a])return!1;for(var c=this.gridmap.length-1,d=a;c>=d;d++)if(this.gridmap[d][b])return{col:d,row:b};return!1},b.closest_to_left=function(a,b){if(this.gridmap.length-1,!this.gridmap[a])return!1;for(var c=a;c>=1;c--)if(this.gridmap[c][b])return{col:c,row:b};return!1}}(jQuery,window,document),function(a,b,c){function d(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function e(a,d){var e=this,f=c(e);if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),a===!0)return f[0].value=d;f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function f(){var a,b=this,f=c(b),g=this.id;if(""==b.value){if("password"==b.type){if(!f.data("placeholder-textinput")){try{a=f.clone().attr({type:"text"})}catch(h){a=c("<input>").attr(c.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",e),f.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}f=f.removeAttr("id").hide().prev().attr("id",g).show()}f.addClass("placeholder"),f[0].value=f.attr("placeholder")}else f.removeClass("placeholder")}var g,h,i="placeholder"in b.createElement("input"),j="placeholder"in b.createElement("textarea"),k=c.fn,l=c.valHooks,m=c.propHooks;i&&j?(h=k.placeholder=function(){return this},h.input=h.textarea=!0):(h=k.placeholder=function(){var a=this;return a.filter((i?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},h.input=i,h.textarea=j,g={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var g=c(a),h=g.data("placeholder-password");return h?h[0].value=d:g.data("placeholder-enabled")?(""==d?(a.value=d,a!=b.activeElement&&f.call(a)):g.hasClass("placeholder")?e.call(a,!0,d)||(a.value=d):a.value=d,g):a.value=d}},i||(l.input=g,m.value=g),j||(l.textarea=g,m.value=g),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(f)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function($,window,document,undefined){function Plugin(a,b){this.element=$(a),this.options=$.extend({},defaults,b),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="validform",defaults={type:"empty"};Plugin.prototype={init:function(){"undefined"!=typeof this.options.invalid&&(this.invalid=this.options.invalid)},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},invalid:function(a){var b=this.element;if(a?b=this.element.parent().find(a):"undefined"!=typeof this.options.parent&&(b=this.element.parent()),"undefined"!=typeof this.options.bgcolor&&(b.data("background-color")?b.css("background-color",this.options.bgcolor):b.data("background-color",b.css("background-color")).css("background-color",this.options.bgcolor).on("focus, click",function(){b.css("background-color",b.data("background-color"))})),"undefined"!=typeof this.options.textcolor&&(b.data("color")?b.css("color",this.options.textcolor):b.data("color",b.css("color")).css("color",this.options.textcolor).on("focus, click",function(){b.css("color",b.data("color"))})),"undefined"!=typeof this.options.border&&(b.data("border")?b.css("border",this.options.border):b.data("border",b.css("border")).css("border",this.options.border).on("focus, click",function(){b.css("border",b.data("border"))})),"undefined"!=typeof this.options.labelcolor){var c=b.hasClass("valida-prev")?b.prev():b.parent().find("label");c.data("color")?c.css("color",this.options.labelcolor):(c.data("color",c.css("color")).css("color",this.options.labelcolor),b.on("focus",function(){c.css("color",c.data("color"))}))}if("undefined"!=typeof this.options.errorClass){var d=this.options.errorClass;b.addClass(d),b.on("focus click",function(){b.removeClass(d)})}},empty:function(){return val=this.element.val(),""==this.trim(val)?!1:"undefined"!=typeof this.element.data("minchar")&&this.trim(val).length<this.element.data("minchar")?!1:!0},select:function(){return val=this.trim(this.element.val()),0==val||""==val||0==val?!1:!0},email:function(){if(val=this.element.val(),!this.empty(val))return!1;var a=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/i,b=/\.\./i;return!val.match(a)||val.match(b)?!1:!0},equal:function(a){return this.empty(this.element)&&this.empty(a)?this.element.val()!==a.val()?!1:!0:!1},cpf:function(){var cpf=this.element.val();if(!this.empty(val))return!1;exp=/\.|\-/g,cpf=cpf.toString().replace(exp,"");var digitoDigitado=eval(cpf.charAt(9)+cpf.charAt(10)),soma1=0,soma2=0,vlr=11;for(i=0;9>i;i++)soma1+=eval(cpf.charAt(i)*(vlr-1)),soma2+=eval(cpf.charAt(i)*vlr),vlr--;soma1=10==10*soma1%11?0:10*soma1%11,soma2=10*(soma2+2*soma1)%11,soma2=10==soma2?0:soma2;var digitoGerado=10*soma1+soma2;return digitoGerado!=digitoDigitado?!1:!0},data:function(){var a=this.element.val();if(!this.empty(a))return!1;var b=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(a);if(null==b)return!1;var c=b[1],d=b[2]-1,e=b[3],f=new Date(e,d,c),g=f.getDate()==c&&f.getMonth()==d&&f.getFullYear()==e;return g},checked:function(a){return a.filter(":checked").length>0?!0:!1}},$.fn[pluginName]=function(a){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,a))})}}(jQuery,window,document),function(a){function b(a,b,d,e,f){b.items.filter("li:eq("+e+")").addClass("active").siblings(".active").removeClass("active"),"undefined"==typeof f&&(f="fast"),f?b.animate({scrollLeft:d},f,function(){c(b)}):(b.scrollLeft(d),c(b))}function c(a){var b=a.items.filter(".active");if(b.hasClass("-before")){var c=b.prevAll().size();b.removeClass("active"),b=a.items.filter(":not(.-before):eq("+c+")").addClass("active"),a.scrollLeft(a.scrollLeft()+b.position().left)}else if(b.hasClass("-after")){var c=b.prevAll(".-after").size();b.removeClass("active"),b=a.items.filter(":not(.-before):eq("+c+")").addClass("active"),a.scrollLeft(a.scrollLeft()+b.position().left)}}var d={init:function(c){var c=a.extend({},a.fn.lemmonSlider.defaults,c);return this.each(function(){var d=a(this),e=d.data("slider");if(!e){var f=d.find(c.slider),g=d.next().filter(".controls"),h=f.find(c.items),i=1;h.each(function(){i+=a(this).outerWidth(!0)}),f.width(i),c.slideToLast&&f.css("padding-right",d.width()),c.infinite&&(d.attr("data-slider-infinite",!0),i=3*i,f.width(i),h.clone().addClass("-after").insertAfter(h.filter(":last")),h.filter(":first").before(h.clone().addClass("-before")),h=f.find(c.items)),d.items=h,d.options=c,d.bind("nextSlide",function(e){var g=d.scrollLeft(),i=0,j=0;h.each(function(b){0==i&&a(this).position().left>1&&(i=a(this).position().left,j=b)}),i>0&&f.outerWidth()-g-d.width()-1>0?b(e,d,g+i,j,"fast"):c.loop&&b(e,d,0,0,"slow")}),d.bind("prevSlide",function(e){var g=d.scrollLeft(),i=0,j=0;if(h.each(function(b){a(this).position().left<0&&(i=a(this).position().left,j=b)}),i)b(e,d,g+i,j,"fast");else if(c.loop){var k=f.outerWidth()-d.width(),l=h.filter(":last").position().left;j=h.size()-1,k>l?b(e,d,l,j,"fast"):b(e,d,k,j,"fast")}}),d.bind("nextPage",function(e){var f=d.scrollLeft(),g=d.width(),j=0,k=0;h.each(function(b){a(this).position().left<g&&(j=a(this).position().left,k=b)}),j>0&&i>f+g+1?b(e,d,f+j,k,"slow"):c.loop&&b(e,d,0,0,"slow")}),d.bind("prevPage",function(e){var g=d.scrollLeft(),i=d.width(),j=0;if(h.each(function(b){a(this).position().left<1-i&&(j=a(this).next().position().left,slide=b)}),g)0==j?b(e,d,0,0,"slow"):b(e,d,g+j,slide,"slow");else if(c.loop){var k=f.outerWidth()-d.width(),l=h.filter(":last").position().left;k>l?d.animate({scrollLeft:l},"slow"):d.animate({scrollLeft:k},"slow")}}),d.bind("slideTo",function(a,c,e){b(a,d,d.scrollLeft()+h.filter(":eq("+c+")").position().left,c,e)}),g.find(".next-slide").click(function(){return d.trigger("nextSlide"),!1}),g.find(".prev-slide").click(function(){return d.trigger("prevSlide"),!1}),g.find(".next-page").click(function(){return d.trigger("nextPage"),!1}),g.find(".prev-page").click(function(){return d.trigger("prevPage"),!1}),d.data("slider",{target:d,options:c})}})},addItem:function(b){var b=a.extend({},a.fn.lemmonSlider.defaults,b),c=a(this),e=c.find(b.slider);return c.next().filter(".controls"),e.find(b.items),b.infinite=c.attr("data-slider-infinite"),b.item?(d.destroy.apply(this),b.prepend?e.prepend(b.item):e.append(b.item),d.init.apply(this,[b]),void 0):!1},destroy:function(){return this.each(function(){var b=a(this),c=b.next().filter(".controls"),d=b.find("> *:first > *");b.data("slider"),b.unbind("nextSlide"),b.unbind("prevSlide"),b.unbind("nextPage"),b.unbind("prevPage"),b.unbind("slideTo"),c.find(".next-slide").unbind("click"),c.find(".prev-slide").unbind("click"),c.find(".next-page").unbind("click"),c.find(".next-page").unbind("click"),b.removeData("slider"),b.attr("data-slider-infinite")&&a.merge(d.filter(".-before"),d.filter(".-after")).each(function(b,c){a(c).remove()})})}};a.fn.lemmonSlider=function(b,c){return null==c&&(c={}),d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.lemmonSlider"),void 0):d.init.apply(this,arguments)},a.fn.lemmonSlider.defaults={items:"> *",loop:!0,slideToLast:!1,slider:"> *:first",infinite:!1}}(jQuery),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){u(a),g(this,a)}function f(a){var b=o(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._input=a,this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&bb.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"[object Date]"===Object.prototype.toString.call(a)}function m(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function n(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Jb[a]||Kb[b]||b}return a}function o(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=n(c),b&&(d[b]=a[c]));return d}function p(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}bb[b]=function(e,f){var g,h,i=bb.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=bb().utc().set(d,a);return i.call(bb.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function r(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function s(a){return t(a)?366:365}function t(a){return 0===a%4&&0!==a%100||0===a%400}function u(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[gb]<0||a._a[gb]>11?gb:a._a[hb]<1||a._a[hb]>r(a._a[fb],a._a[gb])?hb:a._a[ib]<0||a._a[ib]>23?ib:a._a[jb]<0||a._a[jb]>59?jb:a._a[kb]<0||a._a[kb]>59?kb:a._a[lb]<0||a._a[lb]>999?lb:-1,a._pf._overflowDayOfYear&&(fb>b||b>hb)&&(b=hb),a._pf.overflow=b)}function v(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1}}function w(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function x(a){return a?a.toLowerCase().replace("_","-"):a}function y(a,b){return b.abbr=a,mb[a]||(mb[a]=new d),mb[a].set(b),mb[a]}function z(a){delete mb[a]}function A(a){var b,c,d,e,f=0,g=function(a){if(!mb[a]&&nb)try{require("./lang/"+a)}catch(b){}return mb[a]};if(!a)return bb.fn._lang;if(!k(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=x(a[f]).split("-"),b=e.length,d=x(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&m(e,d,!0)>=b-1)break;b--}f++}return bb.fn._lang}function B(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function C(a){var b,c,d=a.match(rb);for(b=0,c=d.length;c>b;b++)d[b]=Ob[d[b]]?Ob[d[b]]:B(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function D(a,b){return a.isValid()?(b=E(b,a.lang()),Lb[b]||(Lb[b]=C(b)),Lb[b](a)):a.lang().invalidDate()}function E(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(sb.lastIndex=0;d>=0&&sb.test(a);)a=a.replace(sb,c),sb.lastIndex=0,d-=1;
return a}function F(a,b){var c;switch(a){case"DDDD":return vb;case"YYYY":case"GGGG":case"gggg":return wb;case"YYYYY":case"GGGGG":case"ggggg":return xb;case"S":case"SS":case"SSS":case"DDD":return ub;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return yb;case"a":case"A":return A(b._l)._meridiemParse;case"X":return Bb;case"Z":case"ZZ":return zb;case"T":return Ab;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return tb;default:return c=new RegExp(N(M(a.replace("\\","")),"i"))}}function G(a){var b=(zb.exec(a)||[])[0],c=(b+"").match(Gb)||["-",0,0],d=+(60*c[1])+q(c[2]);return"+"===c[0]?-d:d}function H(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[gb]=q(b)-1);break;case"MMM":case"MMMM":d=A(c._l).monthsParse(b),null!=d?e[gb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[hb]=q(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=q(b));break;case"YY":e[fb]=q(b)+(q(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":e[fb]=q(b);break;case"a":case"A":c._isPm=A(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[ib]=q(b);break;case"m":case"mm":e[jb]=q(b);break;case"s":case"ss":e[kb]=q(b);break;case"S":case"SS":case"SSS":e[lb]=q(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=G(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function I(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=K(a),a._w&&null==a._a[hb]&&null==a._a[gb]&&(f=function(b){return b?b.length<3?parseInt(b,10)>68?"19"+b:"20"+b:b:null==a._a[fb]?bb().weekYear():a._a[fb]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=X(f(g.GG),g.W||1,g.E,4,1):(i=A(a._l),j=null!=g.d?T(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=X(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[fb]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[fb]?d[fb]:a._a[fb],a._dayOfYear>s(e)&&(a._pf._overflowDayOfYear=!0),c=S(e,0,a._dayOfYear),a._a[gb]=c.getUTCMonth(),a._a[hb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[ib]+=q((a._tzm||0)/60),l[jb]+=q((a._tzm||0)%60),a._d=(a._useUTC?S:R).apply(null,l)}}function J(a){var b;a._d||(b=o(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],I(a))}function K(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function L(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=A(a._l),h=""+a._i,i=h.length,j=0;for(d=E(a._f,g).match(rb)||[],b=0;b<d.length;b++)e=d[b],c=(F(e,a).exec(h)||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Ob[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),H(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[ib]<12&&(a._a[ib]+=12),a._isPm===!1&&12===a._a[ib]&&(a._a[ib]=0),I(a),u(a)}function M(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function N(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function O(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;for(e=0;e<a._f.length;e++)f=0,b=g({},a),v(b),b._f=a._f[e],L(b),w(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function P(a){var b,c=a._i,d=Cb.exec(c);if(d){for(b=4;b>0;b--)if(d[b]){a._f=Eb[b-1]+(d[6]||" ");break}for(b=0;4>b;b++)if(Fb[b][1].exec(c)){a._f+=Fb[b][0];break}zb.exec(c)&&(a._f+=" Z"),L(a)}else a._d=new Date(c)}function Q(b){var c=b._i,d=ob.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?P(b):k(c)?(b._a=c.slice(0),I(b)):l(c)?b._d=new Date(+c):"object"==typeof c?J(b):b._d=new Date(c)}function R(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function S(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function T(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function U(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function V(a,b,c){var d=eb(Math.abs(a)/1e3),e=eb(d/60),f=eb(e/60),g=eb(f/24),h=eb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",eb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,U.apply({},i)}function W(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=bb(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function X(a,b,c,d,e){var f,g,h=new Date(Date.UTC(a,0)).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:s(a-1)+g}}function Y(a){var b=a._i,c=a._f;return"undefined"==typeof a._pf&&v(a),null===b?bb.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=A().preparse(b)),bb.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?O(a):L(a):Q(a),new e(a))}function Z(a,b){bb.fn[a]=bb.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),bb.updateOffset(this),this):this._d["get"+c+b]()}}function $(a){bb.duration.fn[a]=function(){return this._data[a]}}function _(a,b){bb.duration.fn["as"+a]=function(){return+this/b}}function ab(){"undefined"==typeof ender&&(this.moment=bb)}for(var bb,cb,db="2.3.1",eb=Math.round,fb=0,gb=1,hb=2,ib=3,jb=4,kb=5,lb=6,mb={},nb="undefined"!=typeof module&&module.exports,ob=/^\/?Date\((\-?\d+)/i,pb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,qb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,rb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,sb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,tb=/\d\d?/,ub=/\d{1,3}/,vb=/\d{3}/,wb=/\d{1,4}/,xb=/[+\-]?\d{1,6}/,yb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,zb=/Z|[\+\-]\d\d:?\d\d/i,Ab=/T/i,Bb=/[\+\-]?\d+(\.\d{1,3})?/,Cb=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?$/,Db="YYYY-MM-DDTHH:mm:ssZ",Eb=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Fb=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Gb=/([\+\-]|\d\d)/gi,Hb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ib={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Jb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Kb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Lb={},Mb="DDD w W M D d".split(" "),Nb="M D H h m s w W".split(" "),Ob={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return q(this.milliseconds()/100)},SS:function(){return i(q(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(a/60),2)+":"+i(q(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Pb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Mb.length;)cb=Mb.pop(),Ob[cb+"o"]=c(Ob[cb],cb);for(;Nb.length;)cb=Nb.pop(),Ob[cb+cb]=b(Ob[cb],2);for(Ob.DDDD=b(Ob.DDD,3),g(d.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=bb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=bb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return W(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bb=function(b,c,d,e){return"boolean"==typeof d&&(e=d,d=a),Y({_i:b,_f:c,_l:d,_strict:e,_isUTC:!1})},bb.utc=function(b,c,d,e){var f;return"boolean"==typeof d&&(e=d,d=a),f=Y({_useUTC:!0,_isUTC:!0,_l:d,_i:b,_f:c,_strict:e}).utc()},bb.unix=function(a){return bb(1e3*a)},bb.duration=function(a,b){var c,d,e,g=bb.isDuration(a),h="number"==typeof a,i=g?a._input:h?{}:a,j=null;return h?b?i[b]=a:i.milliseconds=a:(j=pb.exec(a))?(c="-"===j[1]?-1:1,i={y:0,d:q(j[hb])*c,h:q(j[ib])*c,m:q(j[jb])*c,s:q(j[kb])*c,ms:q(j[lb])*c}):(j=qb.exec(a))&&(c="-"===j[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},i={y:e(j[2]),M:e(j[3]),d:e(j[4]),h:e(j[5]),m:e(j[6]),s:e(j[7]),w:e(j[8])}),d=new f(i),g&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},bb.version=db,bb.defaultFormat=Db,bb.updateOffset=function(){},bb.lang=function(a,b){var c;return a?(b?y(x(a),b):null===b?(z(a),a="en"):mb[a]||A(a),c=bb.duration.fn._lang=bb.fn._lang=A(a),c._abbr):bb.fn._lang._abbr},bb.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),A(a)},bb.isMoment=function(a){return a instanceof e},bb.isDuration=function(a){return a instanceof f},cb=Pb.length-1;cb>=0;--cb)p(Pb[cb]);for(bb.normalizeUnits=function(a){return n(a)},bb.invalid=function(a){var b=bb.utc(0/0);return null!=a?g(b._pf,a):b._pf.userInvalidated=!0,b},bb.parseZone=function(a){return bb(a).parseZone()},g(bb.fn=e.prototype,{clone:function(){return bb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return D(bb(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return w(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?bb.utc(this._a):bb(this._a)).toArray())>0:!1},parsingFlags:function(){return g({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=D(this,a||bb.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?bb.duration(+b,a):bb.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?bb.duration(+b,a):bb.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?bb(a).zone(this._offset||0):bb(a).local(),g=6e4*(this.zone()-f.zone());return b=n(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-bb(this).startOf("month")-(f-bb(f).startOf("month")))/d,e-=6e4*(this.zone()-bb(this).startOf("month").zone()-(f.zone()-bb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return bb.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(bb(),a)},calendar:function(){var a=this.diff(bb().zone(this.zone()).startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){return t(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=T(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),bb.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=n(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=n(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+bb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+bb(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+bb(a).startOf(b)},min:function(a){return a=bb.apply(null,arguments),this>a?this:a},max:function(a){return a=bb.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=G(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,bb.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?bb(a).zone():0,0===(this.zone()-a)%60},daysInMonth:function(){return r(this.year(),this.month())},dayOfYear:function(a){var b=eb((bb(this).startOf("day")-bb(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=W(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=W(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=W(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=n(a),this[a]()},set:function(a,b){return a=n(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=A(b),this)}}),cb=0;cb<Hb.length;cb++)Z(Hb[cb].toLowerCase().replace(/s$/,""),Hb[cb]);Z("year","FullYear"),bb.fn.days=bb.fn.day,bb.fn.months=bb.fn.month,bb.fn.weeks=bb.fn.week,bb.fn.isoWeeks=bb.fn.isoWeek,bb.fn.toJSON=bb.fn.toISOString,g(bb.duration.fn=f.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*q(this._months/12)},humanize:function(a){var b=+this,c=V(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=bb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=bb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=n(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=n(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:bb.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(cb in Ib)Ib.hasOwnProperty(cb)&&(_(cb,Ib[cb]),$(cb.toLowerCase()));_("Weeks",6048e5),bb.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},bb.lang("en",{ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),nb?(module.exports=bb,ab()):"function"==typeof define&&define.amd?define("moment",function(a,b,c){return c.config().noGlobal!==!0&&ab(),bb}):ab()}.call(this),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=Date.now||function(){return(new Date).getTime()},h=d.push,i=d.slice,j=d.concat,k=e.toString,l=e.hasOwnProperty,m=d.forEach,n=d.map,o=d.reduce,p=d.reduceRight,q=d.filter,r=d.every,s=d.some,t=d.indexOf,u=d.lastIndexOf,v=Array.isArray,w=Object.keys,x=f.bind,y=function(a){return a instanceof y?a:this instanceof y?(this._wrapped=a,void 0):new y(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):a._=y,y.VERSION="1.5.2";var z=y.each=y.forEach=function(a,b,d){if(null!=a)if(m&&a.forEach===m)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=y.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};y.map=y.collect=function(a,b,c){var d=[];return null==a?d:n&&a.map===n?a.map(b,c):(z(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var A="Reduce of empty array with no initial value";y.reduce=y.foldl=y.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduce===o)return d&&(b=y.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(z(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(A);return c},y.reduceRight=y.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduceRight===p)return d&&(b=y.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=y.keys(a);f=g.length}if(z(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(A);return c},y.find=y.detect=function(a,b,c){var d;return B(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},y.filter=y.select=function(a,b,c){var d=[];return null==a?d:q&&a.filter===q?a.filter(b,c):(z(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},y.reject=function(a,b,c){return y.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},y.every=y.all=function(a,b,d){b||(b=y.identity);var e=!0;return null==a?e:r&&a.every===r?a.every(b,d):(z(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var B=y.some=y.any=function(a,b,d){b||(b=y.identity);var e=!1;return null==a?e:s&&a.some===s?a.some(b,d):(z(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};y.contains=y.include=function(a,b){return null==a?!1:t&&a.indexOf===t?-1!=a.indexOf(b):B(a,function(a){return a===b})},y.invoke=function(a,b){var c=i.call(arguments,2),d=y.isFunction(b);return y.map(a,function(a){return(d?b:a[b]).apply(a,c)})},y.pluck=function(a,b){return y.map(a,y.property(b))},y.where=function(a,b,c){return y.isEmpty(b)?c?void 0:[]:y[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},y.findWhere=function(a,b){return y.where(a,b,!0)},y.max=function(a,b,c){if(!b&&y.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&y.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return z(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},y.min=function(a,b,c){if(!b&&y.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&y.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return z(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},y.shuffle=function(a){var b,c=0,d=[];return z(a,function(a){b=y.random(c++),d[c-1]=d[b],d[b]=a}),d},y.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=y.values(a)),a[y.random(a.length-1)]):y.shuffle(a).slice(0,Math.max(0,b))};var C=function(a){return null==a?y.identity:y.isFunction(a)?a:y.property(a)};y.sortBy=function(a,b,c){return b=C(b),y.pluck(y.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=C(c),z(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};y.groupBy=D(function(a,b,c){(y.has(a,b)?a[b]:a[b]=[]).push(c)}),y.indexBy=D(function(a,b,c){a[b]=c}),y.countBy=D(function(a,b){y.has(a,b)?a[b]++:a[b]=1}),y.sortedIndex=function(a,b,c,d){c=C(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},y.toArray=function(a){return a?y.isArray(a)?i.call(a):a.length===+a.length?y.map(a,y.identity):y.values(a):[]},y.size=function(a){return null==a?0:a.length===+a.length?a.length:y.keys(a).length},y.first=y.head=y.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:i.call(a,0,b)},y.initial=function(a,b,c){return i.call(a,0,a.length-(null==b||c?1:b))},y.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:i.call(a,Math.max(a.length-b,0))},y.rest=y.tail=y.drop=function(a,b,c){return i.call(a,null==b||c?1:b)},y.compact=function(a){return y.filter(a,y.identity)};var E=function(a,b,c){return b&&y.every(a,y.isArray)?j.apply(c,a):(z(a,function(a){y.isArray(a)||y.isArguments(a)?b?h.apply(c,a):E(a,b,c):c.push(a)}),c)};y.flatten=function(a,b){return E(a,b,[])},y.without=function(a){return y.difference(a,i.call(arguments,1))},y.uniq=y.unique=function(a,b,c,d){y.isFunction(b)&&(d=c,c=b,b=!1);var e=c?y.map(a,c,d):a,f=[],g=[];return z(e,function(c,d){(b?d&&g[g.length-1]===c:y.contains(g,c))||(g.push(c),f.push(a[d]))}),f},y.union=function(){return y.uniq(y.flatten(arguments,!0))},y.intersection=function(a){var b=i.call(arguments,1);return y.filter(y.uniq(a),function(a){return y.every(b,function(b){return y.indexOf(b,a)>=0})})},y.difference=function(a){var b=j.apply(d,i.call(arguments,1));return y.filter(a,function(a){return!y.contains(b,a)})},y.zip=function(){for(var a=y.max(y.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=y.pluck(arguments,""+c);return b},y.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},y.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=y.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(t&&a.indexOf===t)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},y.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(u&&a.lastIndexOf===u)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},y.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var F=function(){};y.bind=function(a,b){var c,d;if(x&&a.bind===x)return x.apply(a,i.call(arguments,1));if(!y.isFunction(a))throw new TypeError;return c=i.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(i.call(arguments)));F.prototype=a.prototype;var e=new F;F.prototype=null;var f=a.apply(e,c.concat(i.call(arguments)));return Object(f)===f?f:e}},y.partial=function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}},y.bindAll=function(a){var b=i.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return z(b,function(b){a[b]=y.bind(a[b],a)}),a},y.memoize=function(a,b){var c={};return b||(b=y.identity),function(){var d=b.apply(this,arguments);return y.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},y.delay=function(a,b){var c=i.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},y.defer=function(a){return y.delay.apply(y,[a,1].concat(i.call(arguments,1)))},y.throttle=function(a,b,c){var d,e,f,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:g(),h=null,f=a.apply(d,e),d=e=null};return function(){var k=g();i||c.leading!==!1||(i=k);var l=b-(k-i);return d=this,e=arguments,0>=l?(clearTimeout(h),h=null,i=k,f=a.apply(d,e),d=e=null):h||c.trailing===!1||(h=setTimeout(j,l)),f}},y.debounce=function(a,b,c){var d,e,f,h,i;return function(){f=this,e=arguments,h=g();var j=function(){var k=g()-h;b>k?d=setTimeout(j,b-k):(d=null,c||(i=a.apply(f,e),f=e=null))},k=c&&!d;return d||(d=setTimeout(j,b)),k&&(i=a.apply(f,e),f=e=null),i}},y.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},y.wrap=function(a,b){return y.partial(b,a)},y.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},y.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},y.keys=w||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)y.has(a,c)&&b.push(c);return b},y.values=function(a){for(var b=y.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},y.pairs=function(a){for(var b=y.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},y.invert=function(a){for(var b={},c=y.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},y.functions=y.methods=function(a){var b=[];for(var c in a)y.isFunction(a[c])&&b.push(c);return b.sort()},y.extend=function(a){return z(i.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},y.pick=function(a){var b={},c=j.apply(d,i.call(arguments,1));return z(c,function(c){c in a&&(b[c]=a[c])}),b},y.omit=function(a){var b={},c=j.apply(d,i.call(arguments,1));for(var e in a)y.contains(c,e)||(b[e]=a[e]);return b},y.defaults=function(a){return z(i.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},y.clone=function(a){return y.isObject(a)?y.isArray(a)?a.slice():y.extend({},a):a},y.tap=function(a,b){return b(a),a};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof y&&(a=a._wrapped),b instanceof y&&(b=b._wrapped);var e=k.call(a);if(e!=k.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(y.isFunction(g)&&g instanceof g&&y.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=G(a[i],b[i],c,d)););}else{for(var l in a)if(y.has(a,l)&&(i++,!(j=y.has(b,l)&&G(a[l],b[l],c,d))))break;if(j){for(l in b)if(y.has(b,l)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};y.isEqual=function(a,b){return G(a,b,[],[])},y.isEmpty=function(a){if(null==a)return!0;if(y.isArray(a)||y.isString(a))return 0===a.length;for(var b in a)if(y.has(a,b))return!1;return!0},y.isElement=function(a){return!(!a||1!==a.nodeType)},y.isArray=v||function(a){return"[object Array]"==k.call(a)},y.isObject=function(a){return a===Object(a)},z(["Arguments","Function","String","Number","Date","RegExp"],function(a){y["is"+a]=function(b){return k.call(b)=="[object "+a+"]"}}),y.isArguments(arguments)||(y.isArguments=function(a){return!(!a||!y.has(a,"callee"))}),"function"!=typeof/./&&(y.isFunction=function(a){return"function"==typeof a}),y.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},y.isNaN=function(a){return y.isNumber(a)&&a!=+a},y.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==k.call(a)},y.isNull=function(a){return null===a
},y.isUndefined=function(a){return void 0===a},y.has=function(a,b){return l.call(a,b)},y.noConflict=function(){return a._=b,this},y.identity=function(a){return a},y.constant=function(a){return function(){return a}},y.property=function(a){return function(b){return b[a]}},y.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},y.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};H.unescape=y.invert(H.escape);var I={escape:new RegExp("["+y.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+y.keys(H.unescape).join("|")+")","g")};y.each(["escape","unescape"],function(a){y[a]=function(b){return null==b?"":(""+b).replace(I[a],function(b){return H[a][b]})}}),y.result=function(a,b){if(null==a)return void 0;var c=a[b];return y.isFunction(c)?c.call(a):c},y.mixin=function(a){z(y.functions(a),function(b){var c=y[b]=a[b];y.prototype[b]=function(){var a=[this._wrapped];return h.apply(a,arguments),N.call(this,c.apply(y,a))}})};var J=0;y.uniqueId=function(a){var b=++J+"";return a?a+b:b},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;y.template=function(a,b,c){var d;c=y.defaults({},c,y.templateSettings);var e=new RegExp([(c.escape||K).source,(c.interpolate||K).source,(c.evaluate||K).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(M,function(a){return"\\"+L[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,y);var i=function(a){return d.call(this,a,y)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},y.chain=function(a){return y(a).chain()};var N=function(a){return this._chain?y(a).chain():a};y.mixin(y),z(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];y.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],N.call(this,c)}}),z(["concat","join","slice"],function(a){var b=d[a];y.prototype[a]=function(){return N.call(this,b.apply(this._wrapped,arguments))}}),y.extend(y.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(){function x(b){if(a._status===de)throw new Error(If.replace("METHOD",b))}function Pc(){return WL.Internal.tApp||a}function zc(a,b,c,d){c=c?U(c):"";var e=""!==c?Ec(c):null;null===e&&(e={},2!==b/100&&(e[ce]=ug(b,d))),a.onCompleted(e)}function ug(a,b){var c={};return c[Ub]=P,c[Nb]=b||od,c}function rc(){var b=null;if(!a._rpsAuth){var c=Pc()._session.getStatus();(c.status===dc||c.status===E)&&(b=c.session[d])}return b}function Hc(a){var b={};for(var c in a){var d=a[c],e=typeof d;if(d instanceof Array)for(var f=0;f<d.length;f++){var g=d[f];if(e!=wb||d instanceof Date)b[c+"."+f]=g;else{var h=Hc(g);for(var i in h)b[c+"."+f+"."+i]=h[i]}}else if(e!=wb||d instanceof Date)b[c]=d;else{var j=Hc(d);for(var k in j)b[c+"."+k]=j[k]}}return b}function cg(a){if(!ih())return!1;var b=Ud(a),c=new XMLHttpRequest;return c.open(b.method,b.url,!0),a._properties[R],b.method!=Sb&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){4==c.readyState&&zc(a,c.status,c.responseText)},c.send(b.body),!0}function Ud(a){var b,c,e=Qd(a._properties,null,[r,y,R]),f=a._properties[R],g=hb(a._url,{ts:(new Date).getTime()}),h=rc();return e[rd]="true",e[ad]="true",null!=h&&(e[d]=h),f===Sb||f===rg?(b=null,c=Sb,g+="&"+v(e)):(b=v(e),c=Zd),g+="&method="+f,{url:g,method:c,body:b}}function td(b,c){var e=c||{},f=Yd();le(b)||(b=f+("/"===b.charAt(0)?b.substring(1):b));var g=rc();return g&&(e[d]=g),e[M]=a[M],hb(b,e)}function Rd(a){this._properties=a,this._status=bd}function Kf(b,c){a._pendingLogin=null;var d=c[k];d?zb("WL.login: "+c[D]):B(b.callback,c,!0)}function Fd(a){var b=a||"";return b instanceof Array&&(b=b.join(" ")),U(b)}function lf(b,c){var d=a._statusRequests;a._pendingStatusRequest=null,i("wl_app:onGetLoginStatusCompleted");for(var e=c[k],f=!1;d.length>0;){var g=d.shift(),h=K(c);(!e||g.internal)&&B(g.callback,h,!0),g.internal||(f=!0)}e&&(f&&e!==Vb?zb("WL.getLoginStatus: "+c[D]):i("wl_app-onGetLoginStatusCompleted: "+c[D]))}function Ef(a){var b=a[fg],c=a[Mb];b&&(a[Mb]=c||b.name)}function Ve(a,b,c){var d=a.indexOf("?"),e=-1!==d,f="";e&&(f=a.substring(d+1),a=a.substring(0,d));var g=typeof b!==Wb,h="/"===a.charAt(a.length-1);g&&!h&&(a+="/");var i=a,j={};return g&&(i+=encodeURIComponent(b)),j[J]="rename"===c?"choosenewname":c,e&&(i=Pd(i,f)),lc(i,j)}function eh(a){return/^(file|\/file)/.test(a.toLowerCase())}function lc(a,b){return b=b||{},b[ad]="true",td(a,b)}function Ne(a){if(J in a){var c=a[h],d=a[J],e=typeof d,f=e===rb,g=e===b;if(!f&&!g)throw O(J,c);if(g){var i=/^(true|false|rename)$/i.test(d);if(!i)throw Y(J,c)}}else a[J]=!1}function Fc(a){this._props=a,this._status=jd}function U(a){return a.replace(/^\s+|\s+$/g,"")}function id(a,b){return a&&b?a.toLowerCase()===b.toLowerCase():a===b}function Gd(a){return null==a||""===a}function K(a,b){var c=b||{};if(null!=a)for(var d in a)c[d]=a[d];return c}function Qd(a,b,c){for(var d=K(a,b),e=0;e<c.length;e++)delete d[c[e]];return d}function Vg(a,b){var c;for(c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}function ze(a){return Array.prototype.slice.call(a)}function f(a,b){return function(){return typeof b===j?b.apply(a,arguments):void 0}}function Ce(a,b){a="[WL]"+a;var c=window.console;if(c&&c.log)switch(b){case"warning":c.warn(a);break;case"error":c.error(a);break;default:c.log(a)}var d=window.opera;d&&d.postError(a);var e=window.debugService;e&&e.trace(a)}function le(a){return 0===a.indexOf("https://")||0===a.indexOf("http://")}function i(b){a._traceEnabled&&Ce(b)}function zb(b,d){(a._logEnabled||a._traceEnabled)&&Ce(b,d),c.notify(Ae,b)}function t(a){zb(a,"error")}function Jd(a,b){var c=Ib("iframe");return c.id=b,c.src=a,document.body.appendChild(c),c}function Ib(a){var b=document.createElement(a);return b.style.position="absolute",b.style.top="-1000px",b.style.width="300px",b.style.height="300px",b.style.visibility="hidden",b}function pc(){for(var a=null;null==a;)a="wl_"+Math.floor(1024*1024*Math.random()),null!=pb(a)&&(a=null);return a}function pb(a){return document.getElementById(a)}function Ug(a,b){if(a)if(a.innerText)a.innerText=b;else{var c=document.createTextNode(b);a.innerHTML="",a.appendChild(c)}}function Gg(a){var b=a.indexOf("?");if(-1===b)return"";var c=a.indexOf("#",b+1);return-1!==c?a.substring(b+1,c):a.substring(b+1)}function Pd(a,b){if(typeof b===Wb||null===b||""===b)return a;var c=a.indexOf("?");return-1===c?a+"?"+b:("&"!==a.charAt(a.length-1)&&(a+="&"),a+b)}function De(a){K(Rc(a),this)}function Rc(a){var b,c=0==a.indexOf(cc)?cc:0==a.indexOf(Oc)?Oc:"",d="",e="";if(""!=c)var f=a.substring(c.length+2),g=f.indexOf("/"),h=g>0?f.substring(0,g):f,i=h.split(":"),d=i[0],e=i.length>1?i[1]:"",b=g>0?f.substring(g):"";else b=a;return{scheme:c,host:d,port:e,path:b}}function Xg(a){return Rc(a.toLowerCase()).host}function ig(a,b,c){var d=function(a,c){return charIdx=b.indexOf(c),a=charIdx>0?a.substring(0,charIdx):a};b=d(d(b,"?"),"#");var e=b.indexOf(a),f=b.substring(e+a.length),g=f.indexOf("/"),h=f.lastIndexOf("/");return f=h>=0?f.substring(g,h):f,f+"/"+c}function ah(a){var b=a.indexOf("?");return b>0&&(a=a.substring(0,b)),b=a.indexOf("#"),b>0&&(a=a.substring(0,b)),a}function B(a,b,c,d){null!=a&&(d&&(b[V]=d),c?a(b):ub(function(){a(b)}))}function Ec(a){return window.JSON?JSON.parse(a):eval("("+a+")")}function Td(){return Math.floor((new Date).getTime()/1e3)}function lh(a,b){for(var c=a.length,d=0;c>d;d++)b(a[d])}function Jg(a,b){var c={};return c[k]=a,c[D]=b,c}function p(a,b){var c={},d={};return c[Ub]=a,c[Nb]=b,d[ce]=c,d}function Cb(a,b,c){return p(P,Wf.replace("METHOD",a).replace("EVENT",b).replace("MESSAGE",c.message))}function Of(a){var b=a.split(".");return b[0]+"."+b[1]}function ub(a,b){window.wlUnitTests?wlUnitTests.delayInvoke(a):window.setTimeout(a,b||1)}function Qg(){var b=Rg(navigator.userAgent,document.documentMode),c=a[M];a._browser=b,a[M]=c.replace("DEVICE",b.device)}function Rg(a,b){a=a.toLowerCase();var c="other",d={firefox:/firefox/.test(a),"firefox1.5":/firefox\/1\.5/.test(a),firefox2:/firefox\/2/.test(a),firefox3:/firefox\/3/.test(a),firefox4:/firefox\/4/.test(a),ie:(/msie/.test(a)||/trident/.test(a))&&!/opera/.test(a),ie6:!1,ie7:!1,ie8:!1,ie9:!1,ie10:!1,ie11:!1,opera:/opera/.test(a),webkit:/webkit/.test(a),chrome:/chrome/.test(a),mobile:/mobile/.test(a)||/phone/.test(a)};if(d.ie){var e=0;b?e=b:/msie 7/.test(a)&&(e=7),e=Math.min(11,Math.max(e,6)),c="ie"+e,d[c]=!0}else d.firefox?c="firefox":d.chrome?c="chrome":d.webkit?c="webkit":d.opera&&(c="opera");return d.mobile&&(c+="mobile"),d.device=c,d}function Eb(a,b){var c=null!=b?b:{};if(null!=a)for(var d=a.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");2==f.length&&(c[decodeURIComponent(f[0])]=decodeURIComponent(f[1]))}return c}function v(a){var b="";if(null!=a)for(var c in a){var d=0==b.length?"":"&",e=a[c];b+=d+encodeURIComponent(c)+"="+encodeURIComponent(jg(e))}return b}function jg(a){if(a instanceof Date){var b=function(a,b){switch(b){case 2:return 10>a?"0"+a:a;case 3:return(10>a?"00":100>a?"0":"")+a}};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1,2)+"-"+b(a.getUTCDate(),2)+"T"+b(a.getUTCHours(),2)+":"+b(a.getUTCMinutes(),2)+":"+b(a.getUTCSeconds(),2)+"."+b(a.getUTCMilliseconds(),3)+"Z"}return""+a}function zg(a){var b=a.indexOf("?")+1,c=a.indexOf("#")+1,d={};if(b>0){var e=c>b?c-1:a.length;d=Eb(a.substring(b,e),d)}return c>0&&(d=Eb(a.substring(c),d)),d}function hb(a,b){return a+(a.indexOf("?")<0?"?":"&")+v(b)}function Sf(a){switch(typeof a){case rb:return a;case we:return!!a;case b:return"true"===a.toLowerCase();default:return!1}}function Yb(a,b,c){if(a instanceof Array)for(var d=0;d<a.length;d++)me(a[d],b[d],c);else me(a,b,c)}function me(a,b,c){Vd(a,b,c),"properties"===b.type&&m(a,b.properties,c)}function Vd(a,c,d){var e=c.name,f=typeof a,g=c.type;if("undefined"===f||null==a){if(c.optional)return;throw mc(e,d)}switch(g){case"string":if(f!==b)throw O(e,d);if(!c.optional&&""===U(a))throw mc(e,d);break;case"properties":if(f!=wb)throw O(e,d);break;case"function":if(f!=j)throw O(f,d);break;case"dom":if(f==b){if(null==pb(a))throw new Error(Hf.replace("METHOD",d).replace("PARAM",e))}else if(f!=wb)throw O(e,d);break;case"string_or_array":if(f!==b&&!(a instanceof Array))throw O(f,d);break;default:if(f!==g)throw O(e,d)}null!=c.allowedValues&&dg(a,c.allowedValues,c.caseSensitive,e,d)}function m(a,b,c){for(var d=a||{},e=0;e<b.length;e++){var f=b[e],g=d[f.name]||d[f.altName];Vd(g,f,c)}}function dg(a,c,d,e,f){for(var g=typeof c[0]===b,h=0;h<c.length;h++)if(g&&!d){if(a.toLowerCase()===c[h].toLowerCase())return}else if(a===c[h])return;throw Y(e,f)}function O(a,b){return new Error(Te.replace("METHOD",b).replace("PARAM",a))}function mc(a,b){return new Error(rf.replace("METHOD",b).replace("PARAM",a))}function Y(a,b,c){var d=qf.replace("METHOD",b).replace("PARAM",a);return typeof c!==Wb&&(d+=" "+c),new Error(d)}function Kd(a,b,c){if(a)for(var d=0;c>d&&d<a.length;d++)if(b===typeof a[d])return a[d];return void 0}function bb(a,b){for(var c=ze(a),d=null,e=null,f=0;f<c.length;f++){var g=c[f],i=typeof g;i===wb&&null===d?d=K(g):i===j&&null===e&&(e=g)}return d=d||{},e&&(d.callback=e),d[h]=b,d}function Rf(a){var c=ze(a),d=null,e=null;return typeof c[0]===b&&(d=c.shift(),typeof c[0]===b&&(e=c.shift())),normalizedArgs=bb(c),null!==d&&(normalizedArgs[y]=d,null!=e&&(normalizedArgs[R]=e)),normalizedArgs}function I(a,b){var c=Cb(a,a,b);return t(b.message),ab(a,!1,null,c)}function ab(a,b,c,d){var e=new l(a,null,null),f=b?n:o;return typeof c===j&&e.then(function(a){c(a)}),ub(function(){e[f](d)}),e}function xd(c,d){if(m(c,[{name:N,type:b,allowedValues:[W,cf],optional:!1},{name:Z,type:b,allowedValues:[Zc,Ue],optional:!0},{name:Bb,type:b,allowedValues:[Se,Tc,ic],optional:!0},{name:Vc,type:we,optional:!0},L],d),d!==yc&&m(c,[{name:C,allowedValues:[Hb,Gb],type:b,optional:!0},{name:dd,type:j,optional:!1},{name:nb,type:j,optional:!0}],d),!Gc.isSupported()||!window.JSON||a._browser.mobile)throw new Error(ld)}function bg(){a._urlParams=zg(window.location.href),a._pageState=Eb(a._urlParams[V])}function Nd(){var b=new tb(ve);b.load();var c=a._urlParams,f=a._pageState,g=!0,h=f[s];h&&(h!=b.get(s)?b.set(s,f[s]):g=!1);var i=null!=c[d],j=null!=b.get(d)||i,l=j?E:xb,m=Td();if(f[wc]===qd){for(var n=0;n<Tb.length;n++){var o=Tb[n];c[o]&&b.set(o,c[o])}i?(b.set(gb,m+parseInt(c[fb])),b.remove(k),b.remove(D)):j||c[k]===Jb&&(l=Ig)}else{if(!g)return;var p=yf(b);p&&(b.set(k,ng),b.set(D,p))}b.set(e,l),b.save()}function Fg(){var b=a._pageState,c=b[ac];if(c===Ad){var d=b[fe],e=a._urlParams[Eg];return Zf(d,e),void 0}var f=b[ec],g="true"===b[Qb];if(a._logEnabled=!0,a._traceEnabled=b[fc]||a._urlParams[fc],a._secureCookie=g,Gf(),f===oe||f===Jc)Nd(),f===Jc&&a._browser.ie?document.location=b[w]:window.close();else if(f===bc)Nd();else{jb(Og);var h=window.wlAsyncInit;h&&typeof h===j&&h.call()}}function ag(a,b){return a||(a=ah(window.location.href)),Je(a,window.location.hostname,b)}function Je(b,c,d){var e=new De(b);e.resolve();var c=c.split(":")[0].toLowerCase(),f=e.host.toLowerCase();if(a._domain=a._domain||f,a._isHttps&&e.scheme==Oc)throw new Error(og.replace("METHOD",d));return e.toString()}function yf(a){var b=null!=a.get(d),c=null!=a.get(k),e=null!=a.get(g),f=null!=a.get(fb),h=null!=a.get(q),i=null;return b&&e&&f||c||(t(hd),i=hd),h||(t(cd),i=cd),i}function Sg(){Ed=a._browser.ie?2e3:4e3,bg(),Fg()}function Zf(a,b){var c=new tb(ke);c.load(),c.set(a,b),c.save()}function wf(b){a._authScope=Fd(b[g]),a._secureCookie=Sf(b[Qb]),a._redirect_uri=ag(b[w],"WL.init"),a._response_type=(b[lb]||ib).toLowerCase(),a._appId=b[q],a._refreshType=(b[be]||vc).toLowerCase();var d=new se(b[q],ve);a._session=d;var f,h=d.getNormalStatus(),i=h[e],j="WL.init";return i==E?(c.notify(X,h),c.notify(nc,h),c.notify(Rb,h),f=ab(j,!0,b.callback,h)):b[e]&&(f=new l(j,null,null),a.getLoginStatus({internal:!0,callback:function(a){var b=a.error?o:n;f[b](a)}},!0)),f}function qg(){var b=a._pendingLogin;return null!=b&&(b.cancel(),a._pendingLogin=null),!0}function gg(b){var c=Fd(b[g]);if(""===c&&(c=a._authScope),!c||""===c)throw mc(g,"WL.login");b.normalizedScope=c}function mg(a,b){return new Nc(Id,a,b)}function nf(a,b){return new Nc(kd,a,b)}function yg(b){Wd();var c=Ib("iframe"),d=Sd(),e="/oauth20_logout.srf?ts=";c.src="//"+d+e+(new Date).getTime(),document.body.appendChild(c),a.logoutFrame=c,window.setTimeout(function(){Wd(),b()},3e4)}function Wd(){null!=a.logoutFrame&&(document.body.removeChild(a.logoutFrame),a.logoutFrame=null)}function vd(a,b){t(b.message);var c=a[nb];c&&ub(function(){error=Cb("WL.ui","WL.ui",b),c(error)})}function he(){return a[F]}function pe(){return he()+"images"}function af(b){a._authScope&&""!==a._authScope&&(b[g]=a._authScope),b[g]||(b[g]=qe)}function Le(a,b,c){b._handlers=b._handlers||{};var d=f(b,c);return b._handlers[a]=d,d}function Xe(a,b){return b._handlers[a]}function Ee(a){m(a,[{name:C,allowedValues:[Hb,Gb],type:b,optional:!0},{name:Xb,allowedValues:[tg,Hg,Bg,Dc,Bd,Lc],type:b,optional:!0}],"WL.ui-signin"),a[C]=a[C]||Hb,a[Xb]=a[Xb]||Dc}function Ff(b){var c=b[Xb],d=b[C],e=a._locale,f=e.indexOf("ar")>-1||e.indexOf("he")>-1?"RTL":"LTR",g="cursor:pointer;background-color:transparent;border:solid 0px;display:inline-block;overflow:hidden;white-space:nowrap;padding:0px;width:auto;",h="margin:0px;padding:0px;border-width:0px;vertical-align:middle;background-attachment:scroll;display:inline-block;white-space:nowrap;",i=uc(c,f,d,"left")+h,j=uc(c,f,d,"center")+h,k=uc(c,f,d,"right")+h;return'<button style="'+g+'"><span style="'+i+'"></span><span style="'+j+'"><span style="'+kf(f)+'"></span></span><span style="'+k+'"></span></button>'}function kf(b){var c=a._browser,d=c.ie6||c.ie7,e=(c.ie8||c.ie9,c.chrome||c.safari?"padding:2px 3px;margin:0px;":"padding:1px 3px;margin:0px;"),f="font-family: Segoe UI, Verdana, Tahoma, Helvetica, Arial, sans-serif;",g="direction:"+b.toLowerCase()+";",h="text-decoration:none;color:#3975a0;display:inline-block;",i="150";switch(a._locale){case"ar-ploc-sa":d||(i="170");break;case"te":case"ja-ploc-jp":c.ie&&(i="190")}var j="height:18px;font-size:9pt;font-weight:bold;line-height:"+i+"%;";return e+g+h+f+j}function uc(a,b,c,d){a=a==Dc?Bd:a;var e,f,g,h=a+"_"+b+"_"+c,i="background: url({imgpath}/signincontrol/{image}.png) scroll {repeat} 0px {vpos}; height: 22px; width: {width};";switch(d){case"left":e=a===Lc||"RTL"===b?"3px":"25px",f="LTR"===b?"0px":"-44px",g="no-repeat";break;case"center":e="auto",f="-22px",g="repeat-x";break;case"right":e=a===Lc||"LTR"===b?"3px":"25px",f="LTR"===b?"-44px":"0px",g="no-repeat"}return i.replace("{imgpath}",pe()).replace("{image}",h).replace("{vpos}",f).replace("{width}",e).replace("{repeat}",g)}function Oe(a,b){a._button=b,z(b,"click",Le("click",a,a.onClick))}function Xc(a){var b=a._button;b&&(A(b,"click",Xe("click",a)),delete a._button)}function Pe(a){var b=a[N],c=a[C],d=b===W,e=d?u.skyDriveOpenPickerButtonText:u.skyDriveSavePickerButtonText,f=d?u.skyDriveOpenPickerButtonTooltip:u.skyDriveSavePickerButtonTooltip,g=d?"skydriveopenpickerbutton":"skydrivesavepickerbutton",h=c===Hb?"SkyDriveIcon_white.png":"SkyDriveIcon_blue.png",i="<img alt='' src='"+pe()+"/SkyDrivePicker/"+h+"'>",j="<span>"+e+"</span>",k="<button id='"+g+"' title='"+f+"'>"+i+j+"</button>";return k}function mf(a,b,c){var d=a.childNodes[0];if(b){var e=function(c){return 0==a.childNodes.length?(A(d,"click",e),void 0):(b(c),void 0)};z(d,"click",e)}if(c){var f=!1,g=!1,h=function(a){g=!0,l(a)},i=function(a){g=!1,l(a)},j=function(a){f=!0,l(a)},k=function(a){f=!1,l(a)},l=function(){return 0==a.childNodes.length?(A(d,"mouseenter",h),A(d,"mouseleave",i),A(document,"mousedown",j),A(document,"mouseup",k),void 0):(c(f,g),void 0)};z(d,"mouseenter",h),z(d,"mouseleave",i),z(document,"mousedown",j),z(document,"mouseup",k)}}function gh(a){var b=document.cookie;a+="=";var c=b.indexOf(a);if(c>=0){c+=a.length;var d=b.indexOf(";",c);if(0>d)d=b.length;else if(postCookie=b.substring(d),postCookie.indexOf(a)>=0)throw new Error(Me);var e=b.substring(c,d);return e}return""}function Be(b,c,d,e){c=c?c:"";var f=b+"="+c+"; path=/";if(d&&"localhost"!=d&&(f+="; domain="+encodeURIComponent(d)),null!=e){var g=new Date(0);e>0&&(g=new Date,g.setTime(g.getTime()+1e3*e)),f+=";expires="+g.toUTCString()}a._isHttps&&a._secureCookie&&(f+=";secure"),document.cookie=f}function ee(){var b=a._domain||window.location.hostname.split(":")[0];return b}function hh(b){var c,d,e=525,f=525;if(a._browser.ie){var g=window.screenLeft,h=window.screenTop,i=document.documentElement,j=30;d=g+(i.clientWidth-e)/2,c=h+(i.clientHeight-f)/2-j}else{var k=window.screenX,l=window.screenY,m=window.outerWidth,n=window.outerHeight;d=k+(m-e)/2,c=l+(n-f)/2}var o=["width="+e,"height="+f,"top="+c,"left="+d,"status=no","resizable=yes","toolbar=no","menubar=no","scrollbars=yes"],p=window.open(b,"oauth",o.join(","));return p.focus(),p}function lg(b,c,d){var e={};e[ac]=Md,e[s]=d,e[Qb]=a._secureCookie,e[ec]=bc,e[wc]=fd,a.trace&&(e[fc]=!0);var f=v(e),h={};h[q]=a._session.get(q),h[lb]=ib,h[g]=c,h[V]=f;var i=b.indexOf("?")>0,j=i?"&":"?",k=b+j+v(h);return k}function ne(b,c,d,e,f,h){var i={};i[ac]=Md,i[ec]=b,i[s]=e,f&&(i[w]=window.location.href),a.trace&&(i[fc]=!0),h&&(i[bh]=h);var j=b===bc?ib:a._response_type,k=j===ib?qd:fd;i[wc]=k,i[Qb]=a._secureCookie;var l=v(i),m={};m[q]=a._session.get(q),m[ec]=b,m[fh]=a._locale,m[w]=d,m[lb]=j,m[g]=c,m[V]=l;var n=Sd(),o="https://"+n+"/oauth20_authorize.srf?"+v(m);return o}function xc(b){var c=null!=b?b[w]:null;return null!=c&&""!=c?c:a._redirect_uri}function ae(a,b){if(null==b||""==U(b))return!0;for(var c=b.split(Ag),d=0;d<c.length;d++){var e=U(c[d]);if(""!=e&&!Vg(a,e))return!1}return!0}function oc(a){return a===T?xb:a===dc?E:a}function xg(a){if(!Mf(a)&&!cg(a)&&!Lf(a)){var b={};b[Ub]=P,b[Nb]=ld,a.onCompleted(b)}}function ih(){return window.XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials}function Sd(){return a[eb]}function Yd(){return a[Q]}function df(a){m(a,[{name:y,type:b,optional:!1}],a[h])}function Lg(a){var b=a._properties,c=b[y];Nf(c,a)}function Mf(b){var c=document.getElementsByTagName("HEAD")[0],e=document.createElement("SCRIPT"),f=Qd(b._properties,f,[r,y]),g=b._id,h=rc();null!=h&&(f[d]=h),f[r]=Ie+g,f[rd]="true";var i=hb(b._url,f);return i.length>Ed?!1:(b.scriptTag=e,a.jsonp[g]=function(a){sc(g,e),b.onCompleted(a)},kg(e,b),e.setAttribute("async","async"),e.type="text/javascript",e.src=i,c.appendChild(e),window.setTimeout(function(){b._completed||sc(g,e)},3e4),!0)}function kg(b,c){a._browser.ie&&b.attachEvent?b.attachEvent("onreadystatechange",function(a){Ic(a,c)}):(b.readyState="complete",b.addEventListener("load",function(a){Ic(a,c)},!1),b.addEventListener("error",function(a){Ic(a,c)},!1))}function Ic(b,c){if(!c._completed){var d=b.srcElement||b.currentTarget;if(d.readyState||(d=b.currentTarget),"complete"==d.readyState||"loaded"==d.readyState){var e=c._id;if(failure="error"==b.type||null!=a.jsonp[e]){sc(e,c.scriptTag);var f={};f[Ub]=zf,f[Nb]=od,c.onCompleted({error:f})}}}}function sc(b,c){delete a.jsonp[b],document.getElementsByTagName("HEAD")[0].removeChild(c)}function Lf(b){return ch(),a._browser.flashVersion<9?!1:(a.xdrFlash.send(b),!0)}function Kg(a){return a?a.replace(/\r/g," ").replace(/\n/g," "):a}function ed(a,b,c){var d=this;d._op=a,d._iMethod=c,d._element=b,d._uploadIFrame=null,d._uploadTimeoutId=null,a.setFileName(void 0)}function Uc(){this._pendingUploads={}}function Cg(a,b){var c=this;c.upload=function(c){var d=null;window.File&&b instanceof window.File&&(d=new FileReader),d.onerror=function(b){error=b.target.error,a.onErr(error.name)},d.onload=function(b){var d=b.target.result,e=new XMLHttpRequest;e.open(Ng,c,!0),e.onload=function(b){a.onResp(b.currentTarget.responseText)},e.onerror=function(b){a.onErr(b.currentTarget.statusText)},e.upload&&(e.upload.onprogress=function(b){if(b.lengthComputable){var c={bytesTransferred:b.loaded,totalBytes:b.total,progressPercentage:0===b.total?0:100*(b.loaded/b.total)};a.uploadProgress(c)}}),a._cancel=f(e,e.abort),e.send(d)},d.readAsArrayBuffer(b)}}function Gf(){a._isHttps=document.location.protocol.toLowerCase()==cc}function ch(){if(void 0===a._browser.flash){var b=0;try{if(a._browser.ie){var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),d=c.GetVariable("$version"),e=d.split(" "),f=e[1],g=f.split(",");b=g[0]}else if(navigator.plugins&&navigator.plugins.length>0&&(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])){var h=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",i=navigator.plugins["Shockwave Flash"+h].description,j=i.split(" "),k=j[2].split(".");b=k[0]}}catch(l){}a._browser.flashVersion=b,a._browser.flash=b>=8}}function Og(){void 0===a._documentReady&&(a._documentReady=(new Date).getTime())}function hg(b){jb(function(){a._browser.firefox&&(!a._documentReady||(new Date).getTime()-a._documentReady<1e3)?window.setTimeout(b,1e3):b()})}function jb(b){if(document.body)switch(document.readyState){case"complete":return b(),void 0;case"loaded":if(a._browser.webkit)return b(),void 0;break;case"interactive":case void 0:if(a._browser.firefox||a._browser.webkit)return b(),void 0}document.addEventListener?(document.addEventListener("DOMContentLoaded",b,!1),document.addEventListener("load",b,!1)):window.attachEvent&&window.attachEvent("onload",b),a._browser.ie&&document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),b())})}function re(a,b){a.innerHTML=b}function z(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function A(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function Ld(a,b,c,d,e){var f=this;f._name=a,f._allowedDomain=b,f._msgHandler=e,c&&(f._targetWindow=c,f._targetUrl=Mg(d),f._connect())}function Mg(a){var b=a.indexOf("://");return b>=0&&(b=a.indexOf("/",b+3),b>=0&&(a=a.substring(0,b))),a}function Pg(a){var b=null;return Gd(a.origin)||Gd(a.data)||null==a.source||(b=vg(a.data)),b}function wg(a,b){return"<"+a+">"+b}function vg(a){var b=null;if("<"==a.charAt(0)){var c=a.indexOf(">");if(c>0){var d=a.substring(1,c),e=a.substr(c+1);b={name:d,text:e}}}return b}function Vf(a,b){var c={cmd:a,args:b};return JSON.stringify(c)}function Uf(a){var b=JSON.parse(a);return b}if(!window.WL){var Zg="download",h="interface_method",Ie="WL.Internal.jsonp.",Ed=2e3,ge="body",r="callback",Ub="code",cb="element",ce="error",wh="error_description",Od="logging",Ch="tracing",Nb="message",R="method",fg="file_input",th="stream_input",Mb="file_name",xh="file_output",J="overwrite",y="path",Dg="pretty",Eg="result",Eh="status",Pf="return_ssl_resources",Ah="success",Fh="error",rd="suppress_redirects",ad="suppress_response_codes",M="x_http_live_library",de=0,sd=1,d="access_token",bh="appstate",Zb="authentication_token",q="client_id",ec="display",kh="code",k="error",D="error_description",gb="expires",fb="expires_in",fh="locale",w="redirect_uri",lb="response_type",s="request_ts",g="scope",xe="session",Qb="secure_cookie",V="state",e="status",Tb=[d,Zb,g,fb,gb],E="connected",Ig="notConnected",T="unchecked",xb="unknown",dc="expiring",Kh="expired",Ih="live-sdk-upload",Dh="live-sdk-download",jh="appId",Wg="channelUrl",ve="wl_auth",ke="wl_upload",oe="page",Jc="touch",bc="none",Xd="none",Rb="auth.login",Bc="auth.logout",X="auth.sessionChange",nc="auth.statusChange",Ae="wl.log",Jb="access_denied",zf="connection_failed",ng="invalid_cookie",uh="invalid_request",mb="request_canceled",P="request_failed",Vb="timed_out",Bh="unknown_user",zh="user_canceled",of="METHOD: Failed to get the required user permission to perform this operation.",pf="The request could not be completed due to browser issues.",ld="The request could not be completed due to browser limitations.",Ob="METHOD: The operation has been canceled.",hd="The 'wl_auth' cookie is not valid.",cd="The 'wl_auth' cookie has been modified incorrectly. Ensure that the redirect URI only modifies sub-keys for values received from the OAuth endpoint.",Me="The 'wl_auth' cookie has multiple values. Ensure that the redirect URI specifies a cookie domain and path when setting cookies.",Hf="METHOD: The input property 'PARAM' does not reference a valid DOM element.",Wf="METHOD: An exception was received for EVENT. Detail: MESSAGE",If="METHOD: The WL object must be initialized with WL.init() prior to invoking this method.",od="A connection to the server could not be established.",rh="The user could not be identified.",Af="The pending login request has been canceled.",Qe="Logging out the user is not supported in current session because the user is logged in with a Microsoft account on this computer. To logout, the user may quit the app or log out from the computer.",qf="METHOD: The input value for parameter/property 'PARAM' is not valid.",rf="METHOD: The input parameter/property 'PARAM' must be included.",Te="METHOD: The type of the provided value for the input parameter/property 'PARAM' is not valid.",hc="METHOD: There is a pending METHOD request, the current call will be ignored.",Ke=hc.replace(/METHOD/g,"WL.login"),Fe=hc.replace(/METHOD/g,"WL.fileDialog"),ph=hc.replace(/METHOD/g,"WL.upload"),Re="METHOD: The input property 'redirect_uri' is required if the value of the 'response_type' property is 'code'.",oh="WL.init: The redirect_uri value should be the same as the value of 'Redirect Domain' of your registered app. It must begin with 'http://' or 'https://'.",qh="METHOD: The api call is not supported on this platform.",nh="WL.init: The response_type value 'code' is not supported on this platform.",og="METHOD: The input property 'redirect_uri' must use https: to match the scheme of the current page.",sf="The auth request is timed out.",Jf="The popup is closed without receiving consent.",Cc=0,jf=1,md=2,pg=3,Sb="GET",Zd="POST",Ng="PUT",rg="DELETE",Gh="COPY",Hh="MOVE",Df=3e4,mh="METHOD",n="onSuccess",o="onError",H="onProgress",ac="redirect_type",Md="auth",Ad="upload",sg="code",ib="token",cc="https:",Oc="http:",qe="wl.signin",Tg="wl.skydrive",Tf="wl.skydrive_update",Ag=/\s|,/,rb="boolean",Sc="dom",j="function",we="number",b="string",wb="object",Ac="string_or_array",Wb="undefined",Yg="name",db="element",Xb="brand",Mc="type",Fb="sign_in_text",Db="sign_out_text",C="theme",Hd="onloggedin",Cd="onloggedout",nb="onerror",tg="messenger",Hg="hotmail",Bg="skydrive",Dc="windows",Bd="windowslive",Lc="none",Qc="signin",qc=Qc,Dd="login",wd="connect",zd="custom",Hb="blue",Gb="white",yh="dark",vh="light",fe="id",eb="auth_server",Q="apiservice_uri",S="skydrive_uri",F="sdk_root",fc="wl_trace";window.WL={getSession:function(){try{return a.getSession()}catch(b){t(b.message)}},getLoginStatus:function(){try{return a.getLoginStatus({callback:Kd(arguments,j,2),internal:!1},Kd(arguments,rb,2))}catch(b){return I("WL.getLoginStatus",b)}},logout:function(b){try{return Yb(b,L,"WL.logout"),a.logout({callback:b})}catch(c){return I("WL.logout",c)}},canLogout:function(){return a.canLogout()},api:function(){try{var c=Rf(arguments);return m(c,[{name:y,type:b,optional:!1},{name:R,type:b,optional:!0},L],"WL.api"),a.api(c)}catch(d){return I("WL.api",d)}}};var je=[Rb,Bc,X,nc,Ae];WL.Event={subscribe:function(a,d){try{Yb([a,d],[{name:"event",type:b,allowedValues:je,caseSensitive:!0,optional:!1},ff],"WL.Event.subscribe"),c.subscribe(a,d)}catch(e){t(e.message)}},unsubscribe:function(a,d){try{Yb([a,d],[{name:"event",type:b,allowedValues:je,caseSensitive:!0,optional:!1},L],"WL.Event.unsubscribe"),c.unsubscribe(a,d)}catch(e){t(e.message)}}},WL.Internal={};var c={subscribe:function(a,b){i("Subscribe "+a);var d=c.getHandlers(a);d.push(b)},unsubscribe:function(a,b){i("Unsubscribe "+a);var d=c.getHandlers(a),e=[];if(null!=b)for(var f=!1,g=0;g<d.length;g++)f||d[g]!=b?e.push(d[g]):f=!0;c._eHandlers[a]=e},getHandlers:function(a){c._eHandlers||(c._eHandlers={});var b=c._eHandlers[a];return null==b&&(c._eHandlers[a]=b=[]),b},notify:function(a,b){i("Notify "+a);for(var d=c.getHandlers(a),e=0;e<d.length;e++)d[e](b)}},a={_status:de,_statusRequests:[],_rpsAuth:!1};a.appInit=function(b){if(a._status==sd){var c=a._session.getNormalStatus();return ab("WL.init",!0,b.callback,c)}var d=WL[F];d&&("/"!==d.charAt(d.length-1)&&(d+="/"),a[F]=d);var e=b[Od];return e===!1&&(a._logEnabled=e),a.testInit&&a.testInit(b),a._status=sd,wf(b)},a.onloadInit=function(){Qg(),Sg()},a.api=function(a){x("WL.api");var b=a[ge];b&&(a=K(Hc(b),a),delete a[ge]);var c=a[R];return a[R]=(null!=c?U(c):Sb).toUpperCase(),new ye(a).execute()};var Yf=function(){var b,c=a.api.lastId;return c=void 0===c?1:c+1,b="WLAPI_REQ_"+c+"_"+(new Date).getTime(),a.api.lastId=c,b},ye=function(b){var c=this;c._properties=b,c._completed=!1,c._id=Yf(),b[Dg]=!1,b[Pf]=a._isHttps,b[M]=a[M];var d=b[y];c._url=Yd()+("/"===d.charAt(0)?d.substring(1):d),c._promise=new l("WL.api",null,null)};ye.prototype={execute:function(){return xg(this),this._promise},onCompleted:function(a){this._completed||(this._completed=!0,B(this._properties.callback,a,!0),a[k]?this._promise[o](a):this._promise[n](a))}},a.download=function(a){return df(a),x("WL.download"),new Rd(a).execute()};var bd="notStarted",ud="ready",gc="downloadCompleted",Wc="downloadFailed",gd="canceled",bf="completed";Rd.prototype={execute:function(){return this._promise=new l("WL.download",this,null),this._process(),this._promise
},cancel:function(){if(this._status=gd,this._cancel)try{this._cancel()}catch(a){}else this._result=p(mb,Ob.replace("METHOD","WL.download")),this._process()},downloadComplete:function(a,b){var c=this;c._result=b,c._status=a?gc:Wc,c._process()},downloadProgress:function(a){this._promise[H](a)},_process:function(){switch(this._status){case bd:this._start();break;case ud:this._download();break;case gc:case Wc:case gd:this._complete()}},_start:function(){var b=this;a.getLoginStatus({internal:!0,callback:function(){b._status=ud,b._process()}})},_download:function(){var a=this;Lg(a)},_complete:function(){var a=this,b=a._result,c=a._status===gc?n:o;a._status=bf;var d=a._properties[r];d&&d(b),a._promise[c](b)}},a.login=function(b,c){if(x("WL.login"),gg(b),!qg(c))return ab("WL.login",!1,null,p(P,Ke));var d=a._session.tryGetResponse(b.normalizedScope);return null!=d?ab("WL.login",!0,b.callback,d):(a._pendingLogin=mg(b,Kf),a._pendingLogin.execute())},a.getSession=function(){return x("WL.getSession"),a._session.getStatus()[xe]},a.getLoginStatus=function(b,c){if(x("WL.getLoginStatus"),b=b||{},!c){var d=a._session.tryGetResponse();if(d)return ab("WL.getLoginStatus",!0,b.callback,d)}i("wl_app:getLoginStatus");var e=a._statusRequests,f=null;return a._pendingStatusRequest||(f=nf(b,lf),a._pendingStatusRequest=f),e.push(b),null!=f&&f.execute(),a._pendingStatusRequest._promise},a.logout=function(b){var c="WL.logout";x(c);var d=new l(c,null,null),e=function(e){ub(function(){var f,g=n;e?(t(e.message),g=o,f=Cb(c,c,e)):f=a._session.getNormalStatus(),B(b.callback,f,!1),d[g](f)})},f=function(){var b=a._session;b.isSignedIn()?a.canLogout()?(b.updateStatus(xb),yg(e)):e(new Error(Qe)):e()};return null!=a._pendingStatusRequest?a.getLoginStatus({internal:!0,callback:f},!1):f(),d},a.upload=function(a){var c=a[h];return x(c),m(a,[{name:y,type:b,optional:!1},L],c),Ne(a),Ef(a),new Fc(a).execute()};var jd=0,nd=1,kc=2,jc=3,Ab=4,pd=5,vf=6;Fc.prototype={execute:function(){var a=this;return a._strategy=a._getStrategy(a._props),a._promise=new l(a._props[h],a,null),a._process(),a._promise},cancel:function(){var a=this;if(a._status=pd,a._cancel)try{a._cancel()}catch(b){}else{var c=Ob.replace(mh,a._props[h]);a._result=p(mb,c),a._process()}},uploadProgress:function(a){this._promise[H](a)},uploadComplete:function(a,b){var c=this;c._result=b,c._status=a?jc:Ab,c._process()},onErr:function(a){var b=this._props[h]+":"+a,c=p(P,b);this.uploadComplete(!1,c)},onResp:function(a){a=a?U(a):"";var b=""!==a?Ec(a):null;b=b||{},this.uploadComplete(null==b.error,b)},setFileName:function(a){this._props[Mb]=a},_process:function(){switch(this._status){case jd:this._start();break;case nd:this._getUploadPath();break;case kc:this._upload();break;case jc:case Ab:case pd:this._complete()}},_start:function(){var a=this;Pc().getLoginStatus({internal:!0,callback:function(){a._status=nd,a._process()}})},_getUploadPath:function(){var a=this,b=a._props,c=b[y];return le(c)?(a._uploadPath=lc(c),a._status=kc,a._process(),void 0):(Pc().api({path:c}).then(function(d){var e=d.upload_location;if(e){var f=Gg(c);e=Pd(e,f);var g=b[Mb],h=b[J];a._uploadPath=eh(c)?lc(e):Ve(e,g,h),a._status=kc}else a._result=p(P,"WL.upload: Failed to get upload_location of the resource."),a._status=Ab;a._process()},function(b){a._result=b,a._status=Ab,a._process()}),void 0)},_upload:function(){this._strategy.upload(this._uploadPath)},_complete:function(){var a=this,b=a._result,c=a._status===jc?n:o;a._status=vf;var d=a._props[r];d&&d(b),a._promise[c](b)}},window.WL&&WL.Internal&&(WL.Internal.trace=i,WL.Internal.log=zb),De.prototype={toString:function(){var a=this,b=(""!=a.scheme?a.scheme+"//":"")+a.host+(""!=a.port?":"+a.port:"")+a.path;return b},resolve:function(){var a=this;if(""==a.scheme){var b=window.location.port,c=window.location.host;a.scheme=window.location.protocol,a.host=c.split(":")[0],a.port=null!=b?b:"","/"!=a.path.charAt(0)&&(a.path=ig(a.host,window.location.href,a.path))}}};var L={name:r,type:j,optional:!0},ff={name:r,type:j,optional:!1},l=function(a,b,c){this._name=a,this._op=b,this._uplinkPromise=c,this._isCompleted=!1,this._listeners=[]};l.prototype={then:function(a,b,c){var d=new l(null,null,this),e={};return e[n]=a,e[o]=b,e[H]=c,e.chainedPromise=d,this._listeners.push(e),d},cancel:function(){if(!this._isCompleted)if(this._uplinkPromise&&!this._uplinkPromise._isCompleted)this._uplinkPromise.cancel();else{var a=this._op?this._op.cancel:null;typeof a===j?this._op.cancel():this.onError(p(mb,Ob.replace("METHOD",this._getName())))}},_getName:function(){return this._name?this._name:this._op&&typeof this._op._getName===j?this._op._getName():this._uplinkPromise?this._uplinkPromise._getName():""},_onEvent:function(a,b){this._isCompleted||(this._isCompleted=b!==H,this._notify(a,b))},_notify:function(a,b){var c=this;lh(this._listeners,function(d){var e=d[b],f=d.chainedPromise,g=b!==H;if(e)try{var h=e.apply(d,a);g&&h&&h.then&&(f._op=h,h.then(function(a){f[n](a)},function(a){f[o](a)},function(a){f[H](a)}))}catch(i){g&&f.onError(Cb(c._getName(),b,i))}else g&&f[b].apply(f,a)})}},l.prototype[n]=function(){this._onEvent(arguments,n)},l.prototype[o]=function(){this._onEvent(arguments,o)},l.prototype[H]=function(){this._onEvent(arguments,H)};var Tb=[d,Zb,g,fb,gb,s,k,D],be="refresh_type",eg="app",vc="ms",wc="response_method",qd="url",fd="cookie",Lb="onanalytics",Id="login",kd="loginstatus",xf="file_dialog",Kb="auth.response",N="mode",W="open",cf="save",Z="select",Zc="single",Ue="multi",Bb="lightbox",Se="grey",Tc="transparent",ic="white",Vc="loading_timeout",dd="onselected",Qf="auth",gf="rps",Ze="oauth",hf="v",Ge="1",He="2",Bf="domain",tf="livesdk",Xf="mkt",Yc="pickerscript",Ye="onPickerComplete",We="updateToken",yc="WL.fileDialog",dh=27,Pb="skydrivepicker",ef="Loading SkyDrive picker is timed out.";WL.init=function(c){try{var d=K(c);if(Yb(d,{name:"properties",type:"properties",optional:!1,properties:[{name:q,altName:jh,type:b,optional:!1},{name:g,type:Ac,optional:!0},{name:w,altName:Wg,type:b,optional:!0},{name:lb,type:b,allowedValues:[sg,ib],optional:!0},{name:be,type:b,allowedValues:[eg,vc],optional:!0},{name:Od,type:rb,optional:!0},{name:e,type:rb,optional:!0}]},"WL.init"),!d[w]&&d[lb]===kh)throw new Error(Re.replace("METHOD","WL.init"));return null==d[e]&&(d[e]=!0),a.appInit(d)}catch(f){return I("WL.init",f)}},WL.login=function(){try{var c=bb(arguments);return m(c,[{name:g,type:Ac,optional:!0},{name:w,type:b,optional:!0},{name:V,type:b,optional:!0},L],"WL.login"),a.login(c)}catch(d){return I("WL.login",d)}},WL.download=function(){try{var b="WL.download",c=bb(arguments,b);return a.download(c)}catch(d){return I(b,d)}},WL.upload=function(){try{var b="WL.upload",c=bb(arguments,b);return a.upload(c)}catch(d){return I(b,d)}},WL.ui=function(){try{var c=bb(arguments);m(c,[{name:Yg,type:b,allowedValues:[Qc,Pb],optional:!1},L],"WL.ui"),a.ui(c)}catch(d){vd(c,d)}},WL.fileDialog=function(){try{var b=yc,c=bb(arguments,b);return xd(c,b),a.fileDialog(c)}catch(d){return I(b,d)}},a.ensurePermission=function(b,c,d,e){var f=p(Jb,of.replace("METHOD",d));a.login({scope:b}).then(function(d){d.session[fb]<c?a.getLoginStatus({internal:!0},!0).then(function(){a.login({scope:b}).then(function(a){e(a)},function(){e(f)})},function(){e(f)}):e(d)},function(){e(f)})},a.canLogout=function(){return!0};var Kc=function(a){var b=this;b._properties=a;var c=f(b,b.init);jb(c)};Kc.prototype={init:function(){var d=this,e=d._properties;if(d._inited!==!0){d._inited=!0;try{d.validate();var g=e[db],h=e[Mc],i=e[r],j=e[Fb],k=e[Db];af(e),g=typeof g===b?pb(e[db]):g,d._element=g,h=null!=h?h:qc,h==qc?(j=u.signIn,k=u.signOut):h==Dd?(j=u.login,k=u.logout):h==wd&&(j=u.connect,k=u.signOut),d[Fb]=j,d[Db]=k,re(g,Ff(e));var l=a._session.isSignedIn(),m=l?k:j;d.updateUI(m,l),Oe(d,g.childNodes[0]),c.subscribe(Rb,f(d,d.onLoggedIn)),c.subscribe(Bc,f(d,d.onLoggedOut)),a.getLoginStatus({internal:!0}),delete e[r],B(i,e,!1)}catch(n){vd(e,n)}}},validate:function(){var a=this._properties;m(a,[{name:db,type:Sc,optional:!1},{name:Mc,allowedValues:[qc,Dd,wd,zd],type:b,optional:!0},{name:g,type:Ac,optional:!0},{name:V,type:b,optional:!0},{name:Hd,type:j,optional:!0},{name:Cd,type:j,optional:!0},{name:nb,type:j,optional:!0}],"WL.ui-signin"),Ee(a);var c=a[Mc];c==zd&&m(a,[{name:Fb,type:b,optional:!1},{name:Db,type:b,optional:!1}],"WL.ui-signin")},fireEvent:function(a,b){var c=this._properties[a];c&&c(b)},onClick:function(){var b=this;return 0==b._element.childNodes.length?(Xc(b),!1):(a._session.isSignedIn()?a.canLogout()&&a.logout({}):a.login(b._properties,!0).then(function(){},function(a){b.fireEvent(nb,a)}),!1)},onLoggedIn:function(a){this.updateUI(this[Db],!0),this.fireEvent(Hd,a)},onLoggedOut:function(a){this.updateUI(this[Fb],!1),this.fireEvent(Cd,a)}},a.ui=function(a){switch(x("WL.ui"),a.name){case Qc:new Kc(a);break;case Pb:new yd(a)}},Kc.prototype.updateUI=function(b){if(0==this._element.childNodes.length)return Xc(this),void 0;if(b!=this._text){var c=a._browser,d=this._element.childNodes[0],e=d.childNodes[1];if(Ug(e.childNodes[0],b),this._text=b,c.ie6||c.ie7){e.style.width="auto",d.style.width="auto";var f=d.childNodes[0].clientWidth,g=d.childNodes[1].clientWidth,h=d.childNodes[2].clientWidth,i=f+g+h;d.style.width=i+"px",c.ie6&&(d.childNodes[0].style.width=f+"px",d.childNodes[1].style.width=g+"px",d.childNodes[2].style.width=h+"px")}}};var yd=function(a){xd(a);var b=this;b._props=a,jb(f(b,b.init))};yd.prototype={init:function(){var a=this;if(a._inited!==!0){a._inited=!0;try{var c=a._props,d=c[db],e=c[r];c[h]="WL.ui-"+Pb,a.validate(),c[C]=c[C]||Gb,d=typeof d===b?pb(c[db]):d,a._element=d;var g=Pe(c);re(d,g),mf(d,f(a,a.onClick),f(a,a.onRender)),a.onRender(!1,!1),B(e,c,!1)}catch(i){t(i.message)}}},validate:function(){var a=this._props;m(a,[{name:db,type:Sc,optional:!1}],a[h])},onClick:function(){try{return a.fileDialog(this._props)}catch(b){t(b.message)}return!1},onRender:function(){var b=this._props,c=b[C]===Gb,d=a._locale,e=d.indexOf("ar")>-1||d.indexOf("he")>-1,f=e?"RTL":"LTR",g=this._element.childNodes[0],h=g.childNodes[0],i=g.childNodes[1],j="#094AB2",k="#ffffff";g.style.direction=f,g.style.backgroundColor=c?k:j,g.style.border="solid 1px",g.style.borderColor=j,g.style.height="20px",g.style.paddingLeft="4px",g.style.paddingRight="4px",g.style.textAlign="center",g.style.cursor="pointer",h.style.verticalAlign="middle",h.style.height="16px",i.style.fontFamily="'Segoe UI', 'Segoe UI Web Regular', 'Helvetica Neue', 'BBAlpha Sans', 'S60 Sans', Arial, 'sans-serif'",i.style.fontSize="12px",i.style.fontWeight="bold",i.style.color=c?j:k,i.style.textAlign="center",i.style.verticalAlign="middle",i.style.marginLeft=e?"0px":"2px",i.style.marginRight=e?"2px":"0px"}};var tb=function(a,b){this._cookieName=a,this._states=b||{},this._listeners=[],this._cookieWatcher=null};tb.prototype={getStates:function(){return this._states},get:function(a){return this._states[a]},set:function(a,b){this._states[a]=b},remove:function(a){this._states[a]&&delete this._states[a]},load:function(){try{var a=gh(this._cookieName);if(this._rawValue!=a){i("Cookie changed: "+this._cookieName+"="+a),this._rawValue=a,this._states=Eb(a);for(var b=0;b<this._listeners.length;b++)this._listeners[b]()}}catch(c){t(c.message),this.stopMonitor()}},flush:function(a){this._states=a,this.save()},populate:function(a){K(a,this._states),this.save()},save:function(){Be(this._cookieName,v(this._states),ee(),null)},clear:function(){this._states={},Be(this._cookieName,"",ee(),0)},addCookieChanged:function(a){this._listeners.push(a),this.startMonitor()},startMonitor:function(){this._refreshInterval=300,this._cookieWatcher||(i("Started monitoring cookie: "+this._cookieName),this._cookieWatcher=window.setInterval(f(this,this.load),this._refreshInterval))},stopMonitor:function(){this._cookieWatcher&&(i("Stopped monitoring cookie: "+this._cookieName),window.clearInterval(this._cookieWatcher),this._cookieWatcher=null)},isBeingMonitored:function(){return null!==this._cookieWatcher}};var Nc=function(a,b,c){var d=this;d._method=a,d._completed=!1,d._requestFired=!1,d._properties=b,d._callback=c,d._authMonitor=f(d,d._onAuthChanged),d.execute=d._method==Id?d._login:d._getLoginStatus};Nc.prototype={cancel:function(){this._onComplete({error:mb,error_description:Af})},_login:function(){var b=this;b._requestTs=(new Date).getTime();var d=a._browser.mobile,e=d&&a._browser.ie,g=d?Jc:oe,h=ne(g,b._properties.normalizedScope,xc(b._properties),b._requestTs,e,b._properties.state);return e?document.location=h:(b._popup=hh(h),i("AuthRequest-login: popup is opened. "+b._popup),b._popupWatcher=window.setInterval(f(b,b._checkPopup),3e3),c.subscribe(Kb,b._authMonitor)),b._promise=new l("WL.login",null,null),b._promise},_getLoginStatus:function(){return hg(f(this,this._fireStatusRequest)),this._timeout=window.setTimeout(f(this,this._onTimedOut),Df),this._promise=new l("WL.getLoginStatus",null,null),this._promise},_fireStatusRequest:function(){var b=this;if(!b._requestFired){b._requestTs=(new Date).getTime();var d=a._refreshType===vc?ne(bc,a._authScope,xc(),b._requestTs,!1):lg(xc(),a._authScope,b._requestTs);b._statusFrame=Jd(d),c.subscribe(Kb,b._authMonitor),b._requestFired=!0}},_onAuthChanged:function(){var b=a._session.tryGetResponse(this._properties.normalizedScope,this._requestTs);null!=b&&this._onComplete(this._normalizeResp(b))},_normalizeResp:function(b){return this._method===kd&&b.error===Jb?a._session.getNormalStatus():b},_onTimedOut:function(){this._onComplete({error:Vb,error_description:sf})},_checkPopup:function(){try{null===this._popup?this._onComplete({error:Jb,error_description:Jf}):this._popup.closed&&(this._popup=null)}catch(a){i("AuthRequest-checkPopup-error: "+a)}},_onComplete:function(a){this._completed||(this._completed=!0,this._dispose(),this._callback(this._properties,a),a[k]?this._promise[o](a):this._promise[n](a))},_dispose:function(){i("AuthRequest: dispose "+this._method),this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),null!=this._statusFrame&&(document.body.removeChild(this._statusFrame),this._statusFrame=null),this._popupWatcher&&(window.clearInterval(this._popupWatcher),this._popupWatcher=null),c.unsubscribe(Kb,this._authMonitor)}};var se=function(a,b){this._state={},this._state[q]=a,this._state[e]=T,this._cookieName=b,this.init()};se.prototype={get:function(a){return this._state[a]},save:function(){this._stateDirty&&(this._cookie.flush(this._state),this._stateDirty=!1)},init:function(){var a=new tb(this._cookieName);a.load(),this._cookie=a,a.get(q)!=this._state[q]?(a.clear(),a.flush(this._state)):this._state=a.getStates();var b=this._state[e];this._statusChecked=b!==xb&&b!==T,this._cookie.addCookieChanged(f(this,this.onCookieChanged))},refresh:function(){a.getLoginStatus({internal:!0},!0),this._refresh=void 0},scheduleRefresh:function(){this.cancelRefresh();var a=1e3*(this.tokenExpiresIn()-600);a>0&&(this._refresh=window.setTimeout(f(this,this.refresh),a))},cancelRefresh:function(){this._refresh&&(window.clearTimeout(this._refresh),this._refresh=void 0)},updateStatus:function(a){var b=this._state[e],f=this._state[d];b!=a&&(this._state[e]=a,this._stateDirty=!0,this.onStatusChanged(b,a),this.save(),f!=this._state[d]&&c.notify(X,this.getNormalStatus()))},onStatusChanged:function(a,b){if(i("AuthSession: Auth status changed: "+a+"=>"+b),a!=b){var d=a==E,e=b==E;if(!e){for(var f=0;f<Tb.length;f++){var g=Tb[f];this._state[g]&&delete this._state[g]}this._stateDirty=!0,this.save()}oc(a)!=oc(b)&&c.notify(nc,this.getNormalStatus()),e!=d&&(e?c.notify(Rb,this.getNormalStatus()):c.notify(Bc,this.getNormalStatus()))}},isSignedIn:function(){return this._state[e]===E},getNormalStatus:function(){var a=this.getStatus();return a[e]=oc(a[e]),a},tokenExpiresIn:function(){var a=this._state,b=a[e],c=parseInt(a[gb]);return b===E?c-Td():-1},onCookieChanged:function(){var a=this._state,b=this._cookie.getStates();this._state=b,i("AuthSession: cookie changed. Has token: "+(null!=b[d])),this._statusChecked=b[e]!==T,(a[d]!=b[d]||a[k]!=b[k]||a[s]!=b[s])&&(c.notify(Kb),delete b[k],delete b[D],this._stateDirty=!0),a[e]!=b[e]&&this.onStatusChanged(a[e],b[e]),a[d]!=b[d]&&(c.notify(X,this.getNormalStatus()),b[d]?this.scheduleRefresh():this.cancelRefresh()),this.save()},getStatus:function(){var b=null,c=this._state[e];if(c===E){var f=this.tokenExpiresIn();10>=f?(c=this._statusChecked?xb:T,this.updateStatus(c),window.setTimeout(function(){a.getLoginStatus({internal:!0},!0)},3e4)):(60>f&&(c=dc),b={},b[d]=this._state[d],b[Zb]=this._state[Zb],b[g]=this._state[g].split(" "),b[fb]=f,b[gb]=this._state[gb])}else this._statusChecked||(c=T);return{status:c,session:b}},tryGetResponse:function(a,b){i("AuthSession.tryGetResponse: requestTs = "+b+" scope = "+a);var c=this.getStatus(),d=c[e];if(session=c[xe],d==T||d==dc)return null;if(void 0===b)return a?session&&ae(session[g],a)?c:null:c;var f=this._state,h=parseInt(f[s]),j=f[k],l=f[D];if(h>=b){if(session&&ae(session[g],a))return c;if(j)return Jg(j,l);if(!a)return c}return null}};var Nf=function(){var a=null,b=1;return function(c){var d={};if(d[Zg]=b,c=td(c,d),null===a){var e=pc();a=Jd(c,e)}else a.src=c}}();a.jsonp={},WL.Internal.jsonp=a.jsonp,a.xdrFlash={_id:"",_status:Cc,_flashObject:null,_requests:{},_pending:[],init:function(){if(this._status==Cc){this._status=jf;var b=Ib("div");b.id="wl_xdr_container",document.body.appendChild(b),this._id=pc();var c=Cf,d=a[F]+"XDR.swf";c=c.replace(/{url}/g,d),c=c.replace(/{id}/g,this._id),c=c.replace(/{variables}/g,"domain="+document.domain),b.innerHTML=c}},onReady:function(b){for(b?(this._flashObject=a._browser.firefox?document.embeds[this._id]:pb(this._id),this._status=md):this._status=pg;this._pending.length>0;)this.send(this._pending.shift())},onRequestCompleted:function(b,c,d,e){var f=a.xdrFlash._requests[b];delete a.xdrFlash._requests[b],zc(f,c,Kg(d),e)},send:function(a){if(this._status<md)return this._pending.push(a),this._status==Cc&&jb(f(this,this.init)),void 0;if(null!=this._flashObject){this._requests[a._id]=a;var b=Ud(a);this.invoke("send",[a._id,b.url,b.method,b.body])}else zc(a,0,null,pf)},invoke:function(d,a){a=a||[];var c=window.__flash__argumentsToXML(a,0),e='<invoke name="'+d+'" returntype="javascript">'+c+"</invoke>",b=this._flashObject.CallFunction(e);return null==b?null:eval(b)}},WL.Internal.xdrFlash=a.xdrFlash;var Cf="<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0' width='300' height='300' id='{id}' name='{id}' type='application/x-shockwave-flash' data='{url}'><param name='movie' value='{url}'></param><param name='allowScriptAccess' value='always'></param><param name='FlashVars' value='{variables}'></param><embed play='true' menu='false' swLiveConnect='true' allowScriptAccess='always' type='application/x-shockwave-flash' FlashVars='{variables}' src='{url}' width='300' height='300' name='{id}'></embed></object>",tc=null;!function(){function b(a){var b=a[N]===W,c=b?800:500,d=b?600:450,f=a[Bb],h=f===Tc,i=h?0:60,j=f===ic?"white":"rgb(0,0,0)",k=i/100,l=g(c,d),m=e(a),n=document.createElement("div");n.style.top="0px",n.style.left="0px",n.style.position="fixed",n.style.width="100%",n.style.height="100%",n.style.display="block",n.style.backgroundColor=j,n.style.opacity=k,n.style.MozOpacity=k,n.style.filter="alpha(opacity="+i+")",n.style.zIndex="2600000";var o=document.createElement("iframe");o.id="picker"+(new Date).getTime(),o.style.top=l.top,o.style.left=l.left,o.style.position="fixed",o.style.width=c+"px",o.style.height=d+"px",o.style.display="block",o.style.zIndex="2600001",o.style.borderWidth="1px",o.style.borderColor="gray",o.style.maxHeight="100%",o.style.maxWidth="100%",o.src=m,o.setAttribute("sutra","picker"),document.body.appendChild(o),document.body.appendChild(n),a.resizeHandler=function(){var a=g(c,d);o.style.top=a.top,o.style.left=a.left},z(window,"resize",a.resizeHandler),a.lightBox=n,a.frame=o,a.url=m}function e(b){var c=b[N]===W,e=c?He:Ge,f={},g=he()+a[Yc];return"/"===g.charAt(0)&&(g=cc+g),f[hf]=e,f[Qf]=a._rpsAuth?gf:Ze,f[Bf]=window.location.hostname.toLowerCase(),f[tf]=g,f[q]=a._appId,f[s]=(new Date).getTime(),f[Xf]=a._locale,a._rpsAuth||(f[d]=b[d]),c&&(f[Z]=b[Z]),hb(a[S],f)}function g(b,c){var d,e;if(a._browser.ie){var f=document.documentElement;d=(f.clientWidth-b)/2,e=(f.clientHeight-c)/2}else d=(window.innerWidth-b)/2,e=(window.innerHeight-c)/2;return d=10>d?10:d,e=10>e?10:e,{left:d+"px",top:e+"px"}}a.fileDialog=function(b){if(x(b[h]),null!=a._pendingPickerOp)throw new Error(Fe);return new tc(b).execute()};var i=0,j=1,k=2,m=3;tc=function(b){var c=this;c._props=b,c._startTs=(new Date).getTime(),b[Bb]=b[Bb]||ic,b[Z]=b[Z]||Zc,c._state=i,c._authDelegate=f(c,c._onAuthResp),a._pendingPickerOp=c},tc.prototype={execute:function(){var a=this,b=new l(a._props[h],a,null);return a._promise=b,a._process(),b},cancel:function(a){var b=this;b._props,b._state!==m&&(a||(a=p(mb,Ob.replace("METHOD",this._props[h]))),b._onComplete(a))},_process:function(){var a=this;switch(a._state){case i:a._validateAuth();break;case j:a._initPicker();break;case k:a._complete()}},_changeState:function(a,b){var c=this;c._state!==m&&c._state!==a&&(c._state=a,b&&(c._result=b),c._process())},_onComplete:function(a){this._changeState(k,a)},_validateAuth:function(){var b=this;if(a._rpsAuth)b._changeState(j);else{var c=b._props[N]===W,d=c?Tg:Tf,e=b._props[h],f=650;d+=" "+qe,a.ensurePermission(d,f,e,b._authDelegate)}},_onAuthResp:function(a){var b=this;if(a.error)b._channel||b._onComplete(a);else{var c=a.session[d];b._props[d]=c,b._channel?b._channel.send(We,c):b._changeState(j)}},_initPicker:function(){var d=this,e=d._props;b(e),d._channel=a.channel.registerOuterChannel(xf,Rc(e.url).host,e.frame.contentWindow,e.url,f(d,d._onMessage)),c.subscribe(X,d._authDelegate);var g=function(a){a.keyCode===dh&&d.cancel()};e.keydownHandler=g,z(window,"keydown",g),d._initTimeout()},_initTimeout:function(){var a=this;timeoutSeconds=a._props[Vc],timeoutSeconds&&timeoutSeconds>0&&(a._timeout=window.setTimeout(f(a,a._onTimeout),1e3*timeoutSeconds))},_onTimeout:function(){var a=this,b=a._channel._connected;b||a.cancel(p(Vb,ef)),a._clearTimeout()},_clearTimeout:function(){var a=this;a._timeout&&(window.clearTimeout(a._timeout),a._timeout=void 0)},_complete:function(){var b=this,c=b._result,d=c.error?o:n;b._state=m,b._cleanup(),b._normalizeResp(),b._props[h]===yc?B(b._props[r],c,!0):c.data?B(b._props[dd],c,!0):B(b._props[nb],c,!0),b._promise[d](c),a._rpsAuth||ub(function(){b._report()})},_report:function(){var b=this._props,c=this._result,d=((new Date).getTime()-this._startTs)/1e3,e="none",f=0,g=0;c.data&&(null!=c.data.folders&&(f=c.data.folders.length),null!=c.data.files&&(g=c.data.files.length)),e=f>0&&g>0?"both":f>0?"folder":g>0?"file":"none";var i=f+g,j={client:Pb,api:b[h],mode:b[N],select:b[Z],result:c.error?c.error.code:"success",duration:d,object_selected:e,selected_count:i},k=a[Lb];a.api({path:"web_analytics",method:"POST",body:j}),k&&k(j)},_onMessage:function(a,b){switch(zb(a),a){case Ye:this._onComplete(b)}},_normalizeResp:function(){var b=this,c=(b._props[N]===W,b._result.data),d=b._result.error,e=function(b){var c=b.upload_location;c&&(b.upload_location=c.replace("WL_APISERVICE_URL",a[Q]))};if(c){if(c.folders)for(var f=0;f<c.folders.length;f++)e(c.folders[f]);if(c.files)for(var f=0;f<c.files.length;f++)e(c.files[f])}d&&d.message&&(d.message=d.message.replace("METHOD",b._props[h]))},_cleanup:function(){var b=this,d=b._props,e=b._channel,f=d.resizeHandler,g=d.keydownHandler;b._clearTimeout(),c.unsubscribe(X,b._authDelegate),d.lightBox&&(d.frame.style.display=Xd,d.lightBox.style.display=Xd,document.body.removeChild(d.frame),document.body.removeChild(d.lightBox),delete d.lightBox,delete d.frame),e&&(e.dispose(),delete b._channel),f&&A(window,"resize",f),g&&A(window,"keydown",g),delete a._pendingPickerOp}}}();var ie=6e4;Fc.prototype._getStrategy=function(a){var c=this,d=a[h],e=a[cb],f="file";if(m(a,[{name:cb,type:Sc,optional:!1}],d),typeof e===b&&(e=document.getElementById(e)),!(e instanceof HTMLInputElement)||e.type!==f)throw Y(cb,d,'It must be an HTMLInputElement with its type attribute set to "file" (i.e., <input type="file" />).');if(""===e.value)throw Y(cb,d,"It did not contain a selected file.");if(e.files&&window.FileReader){if(1!==e.files.length)throw Y(cb,d,"It must contain one selected file.");var g=e.files[0];return c.setFileName(g.name),new Cg(c,g)}var i=""!==e.name;i||(e.name=f);var j=null;if(null===e.form?j="It must be a child of an HTMLFormElement.":1!==e.form.length?j="It must be the only HTMLInputElement in its parent HTMLFormElement.":e.name!==f&&(j='Its name attribute must be set to "file" (i.e., <input name="file" />).'),null!==j)throw Y(cb,d,j);return new ed(c,e,d)},ed.prototype={getId:function(){var a=this;return null===a._uploadIFrame&&a._createUploadIFrame(),a._uploadIFrame.id},setUploadTimeout:function(){var a=this;a._uploadTimeoutId=window.setTimeout(function(){a.onTimeout()},ie)},clearUploadTimeout:function(){var a=this;null!==a._uploadTimeoutId&&(window.clearTimeout(a._uploadTimeoutId),a._uploadTimeoutId=null)},onTimeout:function(){var a=this;a._uploadTimeoutId=null;var b=a._iMethod+": did not receive a response in "+ie+" milliseconds.",c=p(Vb,b);a._op.uploadComplete(!1,c)},onUploadComplete:function(a){var b=this;b.clearUploadTimeout(),b._removeUploadIFrame(),a=Ec(a);var c=a.error,d=typeof c===Wb;b._op.uploadComplete(d,a)},upload:function(a){this._multiPartFormUpload(a)},_getRequestUrl:function(b){var c={};c[w]=a._redirect_uri;var d={};return d[ac]=Ad,d[fe]=this.getId(),c[V]=v(d),hb(b,c)},_createUploadIFrame:function(){var a=this;null===a._uploadIFrame&&(a._uploadIFrame=Ib("iframe"),a._uploadIFrame.name=a._uploadIFrame.id=pc(),document.body.appendChild(a._uploadIFrame))},_multiPartFormUpload:function(a){var b=this;b._createUploadIFrame();var c=b._getRequestUrl(a);b._submitForm(c),b.setUploadTimeout(),kb.add(b),uf()},_removeUploadIFrame:function(){var a=this;null!==a._uploadIFrame&&(a._uploadIFrame.parentNode.removeChild(a._uploadIFrame),a._uploadIFrame=null)},_submitForm:function(a){var b=this,c=b._element.form;c.target=b._uploadIFrame.name,c.method=Zd,c.enctype="multipart/form-data",c.action=a,c.submit()}},Uc.prototype={add:function(a){var b=a.getId();this._pendingUploads[b]=a},hasPendingUploads:function(){for(var a in this._pendingUploads)return!0;return!1},isPending:function(a){return a in this._pendingUploads},get:function(a){return this._pendingUploads[a]},remove:function(a){delete this._pendingUploads[a]}};var kb=new Uc,uf=function(){var a=!1,b=new tb(ke),c=function(){var a=b.getStates(),c=!1;for(var d in a)if(kb.isPending(d)){var e=a[d],f=kb.get(d);kb.remove(d),b.remove(d),c=!0,f.onUploadComplete(e)}kb.hasPendingUploads()||b.stopMonitor(),c&&(b.save(),c=!1)};return function(){b.isBeingMonitored()||(a?b.startMonitor():(b.addCookieChanged(c),a=!0))}}(),Gc={registerOuterChannel:function(a,b,c,d,e){return G.registerChannel(a,b,c,d,e)},registerInnerChannel:function(a,b,c){return G.registerChannel(a,b,null,null,c)},isSupported:function(){return G.isSupported()}},G={_channels:[],isSupported:function(){return null!=window.postMessage},registerChannel:function(a,b,c,d,e){var f=G,g=f._channels,h=null;return f.isSupported()&&(h=new Ld(a,b,c,d,e),0===g.length&&z(window,"message",f._onMessage),g.push(h)),h},unregisterChannel:function(a){for(var b=G,c=b._channels,d=0;d<c.length;d++)if(c[d]==a){c.splice(d,1);break}0===c.length&&A(window,"message",b._onMessage)},_onMessage:function(a){var b=G,a=a||window.event,c=Pg(a);if(null!=c){var d=b._findChannel(a,c);if(null!=d)switch(c.text){case ue:d._onConnectReq(a.source,a.origin);break;case te:d._onConnectAck(a.source);break;default:d._onMessage(c.text)}}},_findChannel:function(a,b){for(var c=G,d=c._channels,e=Xg(a.origin),f=0;f<d.length;f++){var g=d[f];if(id(g._name,b.name)&&id(g._allowedDomain,e))return g}return null}},ue="@ConnectReq",te="@ConnectAck";Ld.prototype={_disposed:!1,_connected:!1,_allowedDomain:null,_targetWindow:null,_targetUrl:null,_msgHandler:null,_connectSchedule:-1,_pendingQueue:[],_recvQueue:[],dispose:function(){var a=this;a._disposed||(a._disposed=!0,a._cancelConnect(),G.unregisterChannel(a))},send:function(a,b){var c=this;if(!c._disposed){var d=Vf(a,b);c._connected?c._post(d):c._pendingQueue.push(d)}},_connect:function(){var a=this;if(!a._disposed&&!a._connected){var b=function(){a._post(ue)};-1===a._connectSchedule&&(a._connectSchedule=window.setInterval(b,500),b())}},_post:function(a){var b=this,c=wg(b._name,a);b._targetWindow.postMessage(c,b._targetUrl)},_onConnectReq:function(a,b){var c=this;c._connected||(c._connected=!0,c._targetWindow=a,c._targetUrl=b,c._post(te),c._onConnected())},_onConnectAck:function(a){var b=this;b._connected||(b._targetWindow=a,b._onConnected())},_onConnected:function(){var a=this,b=a._pendingQueue;a._connected=!0;for(var c=0;c<b.length;c++)a._post(b[c]);a._pendingQueue=[],a._cancelConnect()},_cancelConnect:function(){var a=this;-1!=a._connectSchedule&&(window.clearInterval(a._connectSchedule),a._connectSchedule=-1)},_onMessage:function(a){if(this._msgHandler){var b=Uf(a);this._msgHandler(b.cmd,b.args)}}},window.WL?a.channel=Gc:window.WL={channel:Gc};var u={connect:"Connect",signIn:"Sign in",signOut:"Sign out",login:"Log in",logout:"Log out",skyDriveOpenPickerButtonText:"Open from SkyDrive",skyDriveOpenPickerButtonTooltip:"Open from SkyDrive",skyDriveSavePickerButtonText:"Save to SkyDrive",skyDriveSavePickerButtonTooltip:"Save to SkyDrive"};a._locale="en",a[M]="Web/DEVICE_"+Of("5.5.3501.0920"),a.testInit=function(b){b.env&&a._settings.init(b.env),b.skydrive_uri&&(a._settings[S]=b.skydrive_uri),b[Lb]&&(a[Lb]=b[Lb])};var qb={};qb[eb]="login.live.com",qb[Q]="https://apis.live.net/v5.0/",qb[S]="https://skydrive.live.com/",qb[F]="//js.live.net/v5.0/";var yb={};yb[eb]="login.live.com",yb[Q]="https://df.apis.live.net/v5.0/",yb[S]="https://skydrive.live.com/",yb[F]="//df-js.live.net/v5.0/";var vb={};vb[eb]="login.live-int.com",vb[Q]="https://apis.live-int.net/v5.0/",vb[S]="https://skydrive.live-int.com/",vb[F]="//js.live-int.net/v5.0/";var ob={};ob[eb]="login.live-int.com",ob[Q]="https://current.apis.live-tst.net/v5.0/",ob[S]="https://skydrive.live-int.com/",ob[F]="//current-js.live-int.net/v5.0/";var sb={};sb[eb]="login.live-int.com",sb[Q]="https://bvt.apis.live-tst.net/v5.0/",sb[S]="https://skydrive-bvt.live-int.com/",sb[F]="//bvt-js.live-int.net/v5.0/",a._settings={PROD:qb,DF:yb,INT:vb,CURRENT:ob,BVT:sb,init:function(b){b=b.toUpperCase();var c=this[b];c&&K(c,a)}},a._settings.init("PROD"),a[Yc]="wl.skydrivepicker.debug.js",a.onloadInit()}}(),function(){var a=jQuery.fn.jquery.split(".");if(a=parseInt(a[0])+parseInt(a[1])/10,!(a[0]>=0||a[1]<8)){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.msie=!1;var b=navigator.userAgent;jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var c,d,e;-1!=(d=b.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=b.substring(d+6),-1!=(d=b.indexOf("Version"))&&(jQuery.browser.fullVersion=b.substring(d+8))):-1!=(d=b.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=b.substring(d+5)):-1!=(d=b.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=b.substring(d+7)):-1!=(d=b.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=b.substring(d+7),-1!=(d=b.indexOf("Version"))&&(jQuery.browser.fullVersion=b.substring(d+8))):-1!=(d=b.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=b.substring(d+8)):(c=b.lastIndexOf(" ")+1)<(d=b.lastIndexOf("/"))&&(jQuery.browser.name=b.substring(c,d),jQuery.browser.fullVersion=b.substring(d+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName)),-1!=(e=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,e)),-1!=(e=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,e)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion
}}(jQuery),function(a,b,c){function d(a){return function(){var b,c=arguments[0],c="["+(a?a+":":"")+c+"] http://errors.angularjs.org/undefined/"+(a?a+"/":"")+c;for(b=1;b<arguments.length;b++)c=c+(1==b?"?":"&")+"p"+(b-1)+"="+encodeURIComponent("function"==typeof arguments[b]?arguments[b].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[b]?"undefined":"string"!=typeof arguments[b]?JSON.stringify(arguments[b]):arguments[b]);return Error(c)}}function e(a){if(null==a||A(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:u(a)||x(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d;if(a)if(y(a))for(d in a)"prototype"!=d&&"length"!=d&&"name"!=d&&a.hasOwnProperty(d)&&b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else if(e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=Uc.length;b;){if(b--,a=Uc[b].charCodeAt(0),57==a)return Uc[b]="A",Uc.join("");if(90!=a)return Uc[b]=String.fromCharCode(a+1),Uc.join("");Uc[b]="0"}return Uc.unshift("0"),Uc.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"==Rc.apply(a)}function x(a){return"[object Array]"==Rc.apply(a)}function y(a){return"function"==typeof a}function z(a){return"[object RegExp]"==Rc.apply(a)}function A(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function B(a){return a&&(a.nodeName||a.on&&a.find)}function C(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function D(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function E(a,b){var c=D(a,b);return c>=0&&a.splice(c,1),b}function F(a,b){if(A(a)||a&&a.$evalAsync&&a.$watch)throw Sc("cpws");if(b){if(a===b)throw Sc("cpi");if(x(a))for(var c=b.length=0;c<a.length;c++)b.push(F(a[c]));else{c=b.$$hashKey,f(b,function(a,c){delete b[c]});for(var d in a)b[d]=F(a[d]);k(b,c)}}else(b=a)&&(x(a)?b=F(a,[]):w(a)?b=new Date(a.getTime()):z(a)?b=RegExp(a.source):t(a)&&(b=F(a,{})));return b}function G(a,b){b=b||{};for(var c in a)a.hasOwnProperty(c)&&"$$"!==c.substr(0,2)&&(b[c]=a[c]);return b}function H(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e=typeof a;if(e==typeof b&&"object"==e){if(!x(a)){if(w(a))return w(b)&&a.getTime()==b.getTime();if(z(a)&&z(b))return a.toString()==b.toString();if(a&&a.$evalAsync&&a.$watch||b&&b.$evalAsync&&b.$watch||A(a)||A(b)||x(b))return!1;e={};for(d in a)if("$"!==d.charAt(0)&&!y(a[d])){if(!H(a[d],b[d]))return!1;e[d]=!0}for(d in b)if(!e.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b[d]!==c&&!y(b[d]))return!1;return!0}if(!x(b))return!1;if((e=a.length)==b.length){for(d=0;e>d;d++)if(!H(a[d],b[d]))return!1;return!0}}return!1}function I(){return b.securityPolicy&&b.securityPolicy.isActive||b.querySelector&&!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"))}function J(a,b){var c=2<arguments.length?Pc.call(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(Pc.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function K(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)?e=c:A(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":d&&d.$evalAsync&&d.$watch&&(e="$SCOPE"),e}function L(a,b){return"undefined"==typeof a?c:JSON.stringify(a,K,b?"  ":null)}function M(a){return u(a)?JSON.parse(a):a}function N(a){return a&&0!==a.length?(a=Nc(""+a),a=!("f"==a||"0"==a||"false"==a||"no"==a||"n"==a||"[]"==a)):a=!1,a}function O(a){a=Jc(a).clone();try{a.html("")}catch(b){}var c=Jc("<div>").append(a).html();try{return 3===a[0].nodeType?Nc(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Nc(b)})}catch(d){return Nc(c)}}function P(a){try{return decodeURIComponent(a)}catch(b){}}function Q(a){var b,c,d={};return f((a||"").split("&"),function(a){a&&(b=a.split("="),c=P(b[0]),s(c)&&(a=s(b[1])?P(b[1]):!0,d[c]?x(d[c])?d[c].push(a):d[c]=[d[c],a]:d[c]=a))}),d}function R(a){var b=[];return f(a,function(a,c){x(a)?f(a,function(a){b.push(T(c,!0)+(!0===a?"":"="+T(a,!0)))}):b.push(T(c,!0)+(!0===a?"":"="+T(a,!0)))}),b.length?b.join("&"):""}function S(a){return T(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function T(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function U(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=j.exec(" "+a.className+" ");b?(e=a,g=(b[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function V(c,d){var e=function(){if(c=Jc(c),c.injector()){var a=c[0]===b?"document":O(c);throw Sc("btstrpd",a)}return d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),d.unshift("ng"),a=vb(d),a.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),a},g=/^NG_DEFER_BOOTSTRAP!/;return a&&!g.test(a.name)?e():(a.name=a.name.replace(g,""),Tc.resumeBootstrap=function(a){f(a,function(a){d.push(a)}),e()},void 0)}function W(a,b){return b=b||"_",a.replace(Wc,function(a,c){return(c?b:"")+a.toLowerCase()})}function X(a,b,c){if(!a)throw Sc("areq",b||"?",c||"required");return a}function Y(a,b,c){return c&&x(a)&&(a=a[a.length-1]),X(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function Z(a,b){if("hasOwnProperty"===a)throw Sc("badname",b)}function $(a,b,c){if(!b)return a;b=b.split(".");for(var d,e=a,f=b.length,g=0;f>g;g++)d=b[g],a&&(a=(e=a)[d]);return!c&&y(a)?J(e,a):a}function _(a){if(a.startNode===a.endNode)return Jc(a.startNode);var b=a.startNode,c=[b];do{if(b=b.nextSibling,!b)break;c.push(b)}while(b!==a.endNode);return Jc(c)}function ab(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector");return b(b(a,"angular",Object),"module",function(){var a={};return function(d,e,f){return Z(d,"module"),e&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),i}}if(!e)throw c("nomod",d);var b=[],g=[],h=a("$injector","invoke"),i={_invokeQueue:b,_runBlocks:g,requires:e,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:h,run:function(a){return g.push(a),this}};return f&&h(f),i})}})}function bb(a){return a.replace(bd,function(a,b,c,d){return d?c.toUpperCase():c}).replace(cd,"Moz$1")}function cb(a,b,c,d){function e(a){var e,g,h,i,j,k,l=c&&a?[this.filter(a)]:[this],m=b;if(!d||null!=a)for(;l.length;)for(e=l.shift(),g=0,h=e.length;h>g;g++)for(i=Jc(e[g]),m?i.triggerHandler("$destroy"):m=!m,j=0,i=(k=i.children()).length;i>j;j++)l.push(Kc(k[j]));return f.apply(this,arguments)}var f=Kc.fn[a],f=f.$original||f;e.$original=f,Kc.fn[a]=e}function db(a){if(a instanceof db)return a;if(!(this instanceof db)){if(u(a)&&"<"!=a.charAt(0))throw dd("nosel");return new db(a)}if(u(a)){var c=b.createElement("div");c.innerHTML="<div>&#160;</div>"+a,c.removeChild(c.firstChild),nb(this,c.childNodes),Jc(b.createDocumentFragment()).append(this)}else nb(this,a)}function eb(a){return a.cloneNode(!0)}function fb(a){hb(a);var b=0;for(a=a.childNodes||[];b<a.length;b++)fb(a[b])}function gb(a,b,c,d){if(s(d))throw dd("offargs");var e=ib(a,"events");ib(a,"handle")&&(r(b)?f(e,function(b,c){ad(a,c,b),delete e[c]}):f(b.split(" "),function(b){r(c)?(ad(a,b,e[b]),delete e[b]):E(e[b]||[],c)}))}function hb(a,b){var d=a[Zc],e=Yc[d];e&&(b?delete Yc[d].data[b]:(e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),gb(a)),delete Yc[d],a[Zc]=c))}function ib(a,b,c){var d=a[Zc],d=Yc[d||-1];return s(c)?(d||(a[Zc]=d=++$c,d=Yc[d]={}),d[b]=c,void 0):d&&d[b]}function jb(a,b,c){var d=ib(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||ib(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function kb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function lb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",Vc((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Vc(b)+" "," ")))})}function mb(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=Vc(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Vc(c))}}function nb(a,b){if(b){b=b.nodeName||!s(b.length)||A(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function ob(a,b){return pb(a,"$"+(b||"ngController")+"Controller")}function pb(a,b,d){for(a=Jc(a),9==a[0].nodeType&&(a=a.find("html")),b=x(b)?b:[b];a.length;){for(var e=0,f=b.length;f>e;e++)if((d=a.data(b[e]))!==c)return d;a=a.parent()}}function qb(a,b){var c=fd[b.toLowerCase()];return c&&gd[a.nodeName]&&c}function rb(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||!1===d.returnValue},f(c[e||d.type],function(b){b.call(a,d)}),8>=Ic?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function sb(a){var b,d=typeof a;return"object"==d&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():b===c&&(b=a.$$hashKey=j()):b=a,d+":"+b}function tb(a){f(a,this.put,this)}function ub(a){var b,c;return"function"==typeof a?(b=a.$inject)||(b=[],a.length&&(c=a.toString().replace(kd,""),c=c.match(hd),f(c[1].split(id),function(a){a.replace(jd,function(a,c,d){b.push(d)})})),a.$inject=b):x(a)?(c=a.length-1,Y(a[c],"fn"),b=a.slice(0,c)):Y(a,"fn",!0),b}function vb(a){function b(a){return function(b,c){return t(b)?(f(b,i(a)),void 0):a(b,c)}}function c(a,b){if(Z(a,"service"),(y(b)||x(b))&&(b=n.instantiate(b)),!b.$get)throw ld("pget",a);return m[a+j]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b,c,d,g,h=[];return f(a,function(a){if(!l.get(a)){l.put(a,!0);try{if(u(a))for(b=Lc(a),h=h.concat(e(b.requires)).concat(b._runBlocks),c=b._invokeQueue,d=0,g=c.length;g>d;d++){var f=c[d],i=n.get(f[0]);i[f[1]].apply(i,f[2])}else y(a)?h.push(n.invoke(a)):x(a)?h.push(n.invoke(a)):Y(a,"module")}catch(j){throw x(a)&&(a=a[a.length-1]),j.message&&j.stack&&-1==j.stack.indexOf(j.message)&&(j=j.message+"\n"+j.stack),ld("modulerr",a,j.stack||j.message||j)}}}),h}function g(a,b){function c(c){if(a.hasOwnProperty(c)){if(a[c]===h)throw ld("cdep",k.join(" <- "));return a[c]}try{return k.unshift(c),a[c]=h,a[c]=b(c)}finally{k.shift()}}function d(a,b,d){var e,f,g,h=[],i=ub(a);for(f=0,e=i.length;e>f;f++){if(g=i[f],"string"!=typeof g)throw ld("itkn",g);h.push(d&&d.hasOwnProperty(g)?d[g]:c(g))}switch(a.$inject||(a=a[e]),b?-1:h.length){case 0:return a();case 1:return a(h[0]);case 2:return a(h[0],h[1]);case 3:return a(h[0],h[1],h[2]);case 4:return a(h[0],h[1],h[2],h[3]);case 5:return a(h[0],h[1],h[2],h[3],h[4]);case 6:return a(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);case 8:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7]);case 9:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8]);case 10:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9]);default:return a.apply(b,h)}}return{invoke:d,instantiate:function(a,b){var c,e=function(){};return e.prototype=(x(a)?a[a.length-1]:a).prototype,e=new e,c=d(a,e,b),t(c)||y(c)?c:e},get:c,annotate:ub,has:function(b){return m.hasOwnProperty(b+j)||a.hasOwnProperty(b)}}}var h={},j="Provider",k=[],l=new tb,m={$provide:{provider:b(c),factory:b(d),service:b(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:b(function(a,b){return d(a,q(b))}),constant:b(function(a,b){Z(a,"constant"),m[a]=b,p[a]=b}),decorator:function(a,b){var c=n.get(a+j),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},n=m.$injector=g(m,function(){throw ld("unpr",k.join(" <- "))}),p={},r=p.$injector=g(p,function(a){return a=n.get(a+j),r.invoke(a.$get,a)});return f(e(a),function(a){r.invoke(a||o)}),r}function wb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==Nc(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function xb(a,b,d,e){function g(a){try{a.apply(null,Pc.call(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function h(a,b){!function c(){f(w,function(a){a()}),v=b(c,a)}()}function i(){z=null,x!=j.url()&&(x=j.url(),f(A,function(a){a(j.url())}))}var j=this,k=b[0],l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,q={};j.isMock=!1;var s=0,t=[];j.$$completeOutstandingRequest=g,j.$$incOutstandingRequestCount=function(){s++},j.notifyWhenNoOutstandingRequests=function(a){f(w,function(a){a()}),0===s?a():t.push(a)};var v,w=[];j.addPollFn=function(a){return r(v)&&h(100,n),w.push(a),a};var x=l.href,y=b.find("base"),z=null;j.url=function(b,c){return l!==a.location&&(l=a.location),b?x!=b?(x=b,e.history?c?m.replaceState(null,"",b):(m.pushState(null,"",b),y.attr("href",y.attr("href"))):(z=b,c?l.replace(b):l.href=b),j):void 0:z||l.href.replace(/%27/g,"'")};var A=[],B=!1;j.onUrlChange=function(b){return B||(e.history&&Jc(a).on("popstate",i),e.hashchange?Jc(a).on("hashchange",i):j.addPollFn(i),B=!0),A.push(b),b},j.baseHref=function(){var a=y.attr("href");return a?a.replace(/^https?\:\/\/[^\/]*/,""):""};var C={},D="",E=j.baseHref();j.cookies=function(a,b){var e,f,g,h;if(!a){if(k.cookie!==D)for(D=k.cookie,e=D.split("; "),C={},g=0;g<e.length;g++)f=e[g],h=f.indexOf("="),h>0&&(a=unescape(f.substring(0,h)),C[a]===c&&(C[a]=unescape(f.substring(h+1))));return C}b===c?k.cookie=escape(a)+"=;path="+E+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(k.cookie=escape(a)+"="+escape(b)+";path="+E).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},j.defer=function(a,b){var c;return s++,c=n(function(){delete q[c],g(a)},b||0),q[c]=!0,c},j.defer.cancel=function(a){return q[a]?(delete q[a],p(a),g(o),!0):!1}}function yb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new xb(a,d,b,c)}]}function zb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){var c=k[a]||(k[a]={key:a});return e(c),r(b)?void 0:(a in i||g++,i[a]=b,g>j&&this.remove(n.key),b)},get:function(a){var b=k[a];return b?(e(b),i[a]):void 0},remove:function(a){var b=k[a];b&&(b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a],delete i[a],g--)},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){k=h=i=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ab(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Bb(a){var d={},e="Directive",g=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,h=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,j=/^\s*(https?|ftp|mailto|tel|file):/,k=/^\s*(https?|ftp|file):|data:image\//,m=/^(on[a-z]+|formaction)$/;this.directive=function o(b,c){return Z(b,"directive"),u(b)?(X(c,"directiveFactory"),d.hasOwnProperty(b)||(d[b]=[],a.factory(b+e,["$injector","$exceptionHandler",function(a,c){var e=[];return f(d[b],function(d,f){try{var g=a.invoke(d);y(g)?g={compile:q(g)}:!g.compile&&g.link&&(g.compile=q(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||b,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"A",e.push(g)}catch(h){c(h)}}),e}])),d[b].push(c)):f(b,i(o)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(j=a,this):j},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(k=a,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate",function(a,i,o,r,s,v,w,z,A,B,C){function D(a,b,c,d,e){a instanceof Jc||(a=Jc(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=Jc(b).wrap("<span></span>").parent()[0])});var g=F(a,b,a,c,d,e);return function(b,c){X(b,"scope");for(var d=c?ed.clone.call(a):a,e=0,f=d.length;f>e;e++){var h=d[e];1!=h.nodeType&&9!=h.nodeType||d.eq(e).data("$scope",b)}return E(d,"ng-scope"),c&&c(d,b),g&&g(b,d,d),d}}function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,m,n,o=[];for(k=0,m=d.length;m>k;k++)o.push(d[k]);for(n=k=0,m=l.length;m>k;n++)h=o[n],d=l[k++],g=l[k++],i=Jc(h),d?(d.scope?(j=a.$new(),i.data("$scope",j),E(i,"ng-scope")):j=a,(i=d.transclude)||!f&&b?d(g,j,h,e,function(b){return function(c){var d=a.$new();return d.$$transcluded=!0,b(d,c).on("$destroy",J(d,d.$destroy))}}(i||b)):d(g,j,h,c,f)):g&&g(a,h.childNodes,c,f)}for(var i,j,k,l=[],m=0;m<a.length;m++)j=new $,i=H(a[m],[],j,0===m?e:c,f),i=(g=i.length?L(i,a[m],j,b,d,null,[],[],g):null)&&g.terminal||!a[m].childNodes||!a[m].childNodes.length?null:F(a[m].childNodes,g?g.transclude:b),l.push(g),l.push(i),k=k||g||i,g=null;return k?h:null}function H(a,b,c,d,e){var f,i=c.$attr;switch(a.nodeType){case 1:N(b,Cb(Mc(a).toLowerCase()),"E",d,e);var j,k,l;f=a.attributes;for(var m=0,n=f&&f.length;n>m;m++){var o=!1,p=!1;if(j=f[m],!Ic||Ic>=8||j.specified){k=j.name,l=Cb(k),cb.test(l)&&(k=W(l.substr(6),"-"));var q=l.replace(/(Start|End)$/,"");l===q+"Start"&&(o=k,p=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),l=Cb(k.toLowerCase()),i[l]=k,c[l]=j=Vc(Ic&&"href"==k?decodeURIComponent(a.getAttribute(k,2)):j.value),qb(a,l)&&(c[l]=!0),V(a,b,j,l),N(b,l,"A",d,e,o,p)}}if(a=a.className,u(a)&&""!==a)for(;f=h.exec(a);)l=Cb(f[2]),N(b,l,"C",d,e)&&(c[l]=Vc(f[3])),a=a.substr(f.index+f[0].length);break;case 3:T(b,a.nodeValue);break;case 8:try{(f=g.exec(a.nodeValue))&&(l=Cb(f[1]),N(b,l,"M",d,e)&&(c[l]=Vc(f[2])))}catch(r){}}return b.sort(R),b}function I(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw od("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Jc(d)}function K(a,b,c){return function(d,e,f,g){return e=I(e[0],b,c),a(d,e,f,g)}}function L(a,d,e,g,h,j,k,l,m){function n(a,b,c,d){a&&(c&&(a=K(a,c,d)),a.require=C.require,(A===C||C.$$isolateScope)&&(a=Z(a,{isolateScope:!0})),k.push(a)),b&&(c&&(b=K(b,c,d)),b.require=C.require,(A===C||C.$$isolateScope)&&(b=Z(b,{isolateScope:!0})),l.push(b))}function p(a,b){var c,d="data",e=!1;if(u(a)){for(;"^"==(c=a.charAt(0))||"?"==c;)a=a.substr(1),"^"==c&&(d="inheritedData"),e=e||"?"==c;if(c=b[d]("$"+a+"Controller"),8==b[0].nodeType&&b[0].$$controller&&(c=c||b[0].$$controller,b[0].$$controller=null),!c&&!e)throw od("ctreq",a,F)}else x(a)&&(c=[],f(a,function(a){c.push(p(a,b))}));return c}function q(a,b,g,h,j){var m,n,q,r,s,t;if(m=d===g?e:G(e,new $(Jc(g),e.$attr)),n=m.$$element,A){var u=/^\s*([@=&])(\??)\s*(\w*)\s*$/;h=Jc(g),t=b.$new(!0),B&&B===A.$$originalDirective?h.data("$isolateScope",t):h.data("$isolateScopeNoTemplate",t),E(h,"ng-isolate-scope"),f(A.scope,function(a,c){var d,e,f,g=a.match(u)||[],h=g[3]||c,j="?"==g[2],g=g[1];switch(t.$$isolateBindings[c]=g+h,g){case"@":m.$observe(h,function(a){t[c]=a}),m.$$observers[h].$$scope=b,m[h]&&(t[c]=i(m[h])(b));break;case"=":if(j&&!m[h])break;e=v(m[h]),f=e.assign||function(){throw d=t[c]=e(b),od("nonassign",m[h],A.name)},d=t[c]=e(b),t.$watch(function(){var a=e(b);return a!==t[c]&&(a!==d?d=t[c]=a:f(b,a=d=t[c])),a});break;case"&":e=v(m[h]),t[c]=function(a){return e(b,a)};break;default:throw od("iscp",A.name,c,a)}})}for(z&&f(z,function(a){var c,d={$scope:a===A||a.$$isolateScope?t:b,$element:n,$attrs:m,$transclude:j};s=a.controller,"@"==s&&(s=m[a.name]),c=w(s,d),8==n[0].nodeType?n[0].$$controller=c:n.data("$"+a.name+"Controller",c),a.controllerAs&&(d.$scope[a.controllerAs]=c)}),h=0,q=k.length;q>h;h++)try{r=k[h],r(r.isolateScope?t:b,n,m,r.require&&p(r.require,n))}catch(x){o(x,O(n))}for(h=b,A&&(A.template||null===A.templateUrl)&&(h=t),a&&a(h,g.childNodes,c,j),h=l.length-1;h>=0;h--)try{r=l[h],r(r.isolateScope?t:b,n,m,r.require&&p(r.require,n))}catch(y){o(y,O(n))}}m=m||{};var r,s=-Number.MAX_VALUE,z=m.controllerDirectives,A=m.newIsolateScopeDirective,B=m.templateDirective;m=m.transcludeDirective;for(var C,F,J,L,N=e.$$element=Jc(d),R=g,T=0,U=a.length;U>T;T++){C=a[T];var V=C.$$start,W=C.$$end;if(V&&(N=I(d,V,W)),J=c,s>C.priority)break;if((J=C.scope)&&(r=r||C,C.templateUrl||(S("new/isolated scope",A,C,N),t(J)&&(A=C))),F=C.name,!C.templateUrl&&C.controller&&(J=C.controller,z=z||{},S("'"+F+"' controller",z[F],C,N),z[F]=C),(J=C.transclude)&&(C.$$tlb||(S("transclusion",m,C,N),m=C),"element"==J?(s=C.priority,J=I(d,V,W),N=e.$$element=Jc(b.createComment(" "+F+": "+e[F]+" ")),d=N[0],Y(h,Jc(Pc.call(J,0)),d),R=D(J,g,s,j&&j.name,{transcludeDirective:m})):(J=Jc(eb(d)).contents(),N.html(""),R=D(J,g))),C.template)if(S("template",B,C,N),B=C,J=y(C.template)?C.template(N,e):C.template,J=bb(J),C.replace){if(j=C,J=Jc("<div>"+Vc(J)+"</div>").contents(),d=J[0],1!=J.length||1!==d.nodeType)throw od("tplrt",F,"");Y(h,N,d),U={$attr:{}},J=H(d,[],U);var X=a.splice(T+1,a.length-(T+1));A&&M(J),a=a.concat(J).concat(X),P(e,U),U=a.length}else N.html(J);if(C.templateUrl)S("template",B,C,N),B=C,C.replace&&(j=C),q=Q(a.splice(T,a.length-T),N,e,h,R,k,l,{controllerDirectives:z,newIsolateScopeDirective:A,templateDirective:B,transcludeDirective:m}),U=a.length;else if(C.compile)try{L=C.compile(N,e,R),y(L)?n(null,L,V,W):L&&n(L.pre,L.post,V,W)}catch(_){o(_,O(N))}C.terminal&&(q.terminal=!0,s=Math.max(s,C.priority))}return q.scope=r&&!0===r.scope,q.transclude=m&&R,q}function M(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function N(b,f,g,h,i,j,k){if(f===i)return null;if(i=null,d.hasOwnProperty(f)){var l;f=a.get(f+e);for(var m=0,p=f.length;p>m;m++)try{l=f[m],(h===c||h>l.priority)&&-1!=l.restrict.indexOf(g)&&(j&&(l=n(l,{$$start:j,$$end:k})),b.push(l),i=l)}catch(q){o(q)}}return i}function P(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?e.attr("style",e.attr("style")+";"+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function Q(a,b,c,d,e,g,h,i){var j,k,m=[],n=b[0],o=a.shift(),p=l({},o,{templateUrl:null,transclude:null,replace:null,$$originalDirective:o}),q=y(o.templateUrl)?o.templateUrl(b,c):o.templateUrl;return b.html(""),r.get(B.getTrustedResourceUrl(q),{cache:s}).success(function(l){var r;if(l=bb(l),o.replace){if(l=Jc("<div>"+Vc(l)+"</div>").contents(),r=l[0],1!=l.length||1!==r.nodeType)throw od("tplrt",o.name,q);l={$attr:{}},Y(d,b,r);var s=H(r,[],l);t(o.scope)&&M(s),a=s.concat(a),P(c,l)}else r=n,b.html(l);for(a.unshift(p),j=L(a,r,c,e,b,o,g,h,i),f(d,function(a,c){a==r&&(d[c]=b[0])}),k=F(b[0].childNodes,e);m.length;){l=m.shift();var s=m.shift(),u=m.shift(),v=m.shift(),w=b[0];s!==n&&(w=eb(r),Y(u,Jc(s),w)),j(k,l,w,d,v)}m=null}).error(function(a,b,c,d){throw od("tpload",d.url)}),function(a,b,c,d,e){m?(m.push(b),m.push(c),m.push(d),m.push(e)):j(k,b,c,d,e)}}function R(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function S(a,b,c,d){if(b)throw od("multidir",b.name,c.name,a,O(d))}function T(a,b){var c=i(b,!0);c&&a.push({priority:0,compile:q(function(a,b){var d=b.parent(),e=d.data("$binding")||[];e.push(c),E(d.data("$binding",e),"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})})})}function U(a,b){return"xlinkHref"==b||"IMG"!=Mc(a)&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function V(a,b,c,d){var e=i(c,!0);if(e){if("multiple"===d&&"SELECT"===Mc(a))throw od("selmulti",O(a));b.push({priority:100,compile:function(){return{pre:function(b,c,f){if(c=f.$$observers||(f.$$observers={}),m.test(d))throw od("nodomevents");(e=i(f[d],!0,U(a,d)))&&(f[d]=e(b),(c[d]||(c[d]=[])).$$inter=!0,(f.$$observers&&f.$$observers[d].$$scope||b).$watch(e,function(a){f.$set(d,a)}))}}}})}}function Y(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d,f=e+h-1;for(var j=a.length;j>e;e++,f++)j>f?a[e]=a[f]:delete a[e];a.length-=h-1;break}for(i&&i.replaceChild(d,g),a=b.createDocumentFragment(),a.appendChild(g),d[Jc.expando]=g[Jc.expando],g=1,h=c.length;h>g;g++)i=c[g],Jc(i).remove(),a.appendChild(i),delete c[g];c[0]=d,c.length=1}function Z(a,b){return l(function(){return a.apply(null,arguments)},a,b)}var $=function(a,b){this.$$element=a,this.$attr=b||{}};$.prototype={$normalize:Cb,$addClass:function(a){a&&0<a.length&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&C.removeClass(this.$$element,a)},$set:function(a,b,d,e){function g(a,b){var c=[],d=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c.push(g)}return c}if("class"==a)b=b||"",d=this.$$element.attr("class")||"",this.$removeClass(g(d,b).join(" ")),this.$addClass(g(b,d).join(" "));else{var h=qb(this.$$element[0],a);h&&(this.$$element.prop(a,b),e=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=W(a,"-")),h=Mc(this.$$element),("A"===h&&"href"===a||"IMG"===h&&"src"===a)&&(!Ic||Ic>=8)&&(h=pc(b).href,""!==h&&("href"===a&&!h.match(j)||"src"===a&&!h.match(k))&&(this[a]=b="unsafe:"+h)),!1!==d&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b))}(d=this.$$observers)&&f(d[a],function(a){try{a(b)}catch(c){o(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),z.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var _=i.startSymbol(),ab=i.endSymbol(),bb="{{"==_||"}}"==ab?p:function(a){return a.replace(/\{\{/g,_).replace(/}}/g,ab)},cb=/^ngAttr[A-Z]/;return D}]}function Cb(a){return bb(a.replace(pd,""))}function Db(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){Z(b,"controller"),t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,e){return function(f,g){var h,i,j;if(u(f)&&(h=f.match(b),i=h[1],j=h[3],f=a.hasOwnProperty(i)?a[i]:$(g.$scope,i,!0)||$(e,i,!0),Y(f,i,!0)),h=c.instantiate(f,g),j){if(!g||"object"!=typeof g.$scope)throw d("$controller")("noscp",i||f.name,j);g.$scope[j]=h}return h}}]}function Eb(){this.$get=["$window",function(a){return Jc(a.document)}]}function Fb(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function Gb(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Nc(Vc(a.substr(0,d))),c=Vc(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+(", "+c):c)}),e):e}function Hb(a){var b=t(a)?a:c;return function(c){return b||(b=Gb(a)),c?b[Nc(c)]||null:b}}function Ib(a,b,c){return y(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function Jb(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=M(c))),c}],transformRequest:[function(a){return t(a)&&"[object File]"!==Rc.apply(a)?L(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:e,put:e,patch:e},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function d(a){var b=l({},a,{data:Ib(a.data,a.headers,e.transformResponse)});return 200<=a.status&&300>a.status?b:k.reject(b)}var e={transformRequest:g.transformRequest,transformResponse:g.transformResponse},h=function(a){function b(a){var b;f(a,function(c,d){y(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})}var c,d,e=g.headers,h=l({},a.headers),e=l({},e.common,e[Nc(a.method)]);b(e),b(h);a:for(c in e){a=Nc(c);for(d in h)if(Nc(d)===a)continue a;h[c]=e[c]}return h}(a);l(e,a),e.headers=h,e.method=Oc(e.method),(a=qc(e.url)?b.cookies()[e.xsrfCookieName||g.xsrfCookieName]:c)&&(h[e.xsrfHeaderName||g.xsrfHeaderName]=a);var i=[function(a){h=a.headers;var b=Ib(a.data,Hb(h),a.transformRequest);return r(a.data)&&f(h,function(a,b){"content-type"===Nc(b)&&delete h[b]}),r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),o(a,b,h).then(d,d)},c],j=k.when(e);for(f(v,function(a){(a.request||a.requestError)&&i.unshift(a.request,a.requestError),(a.response||a.responseError)&&i.push(a.response,a.responseError)});i.length;){a=i.shift();var m=i.shift(),j=j.then(a,m)}return j.success=function(a){return j.then(function(b){a(b.data,b.status,b.headers,e)}),j},j.error=function(a){return j.then(null,function(b){a(b.data,b.status,b.headers,e)}),j},j}function o(b,c,d){function f(a,b,c){j&&(a>=200&&300>a?j.put(u,[a,b,Gb(c)]):j.remove(u)),h(b,a,c),e.$$phase||e.$apply()}function h(a,c,d){c=Math.max(c,0),(c>=200&&300>c?m.resolve:m.reject)({data:a,status:c,headers:Hb(d),config:b})}function i(){var a=D(n.pendingRequests,b);-1!==a&&n.pendingRequests.splice(a,1)}var j,l,m=k.defer(),o=m.promise,u=p(b.url,b.params);if(n.pendingRequests.push(b),o.then(i,i),(b.cache||g.cache)&&!1!==b.cache&&"GET"==b.method&&(j=t(b.cache)?b.cache:t(g.cache)?g.cache:q),j)if(l=j.get(u),s(l)){if(l.then)return l.then(i,i),l;x(l)?h(l[1],l[0],F(l[2])):h(l,200,{})}else j.put(u,o);return r(l)&&a(b.method,u,c,f,d,b.timeout,b.withCredentials,b.responseType),o}function p(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(x(a)||(a=[a]),f(a,function(a){t(a)&&(a=L(a)),c.push(T(b)+"="+T(a))}))}),a+(-1==a.indexOf("?")?"?":"&")+c.join("&")}var q=d("$http"),v=[];return f(i,function(a){v.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);v.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],function(){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}("get","delete","head","jsonp"),function(){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))
}})}("post","put"),n.defaults=g,n}]}function Kb(){this.$get=["$browser","$window","$document",function(a,b,c){return Lb(a,qd,a.defer,b.angular.callbacks,c[0],b.location.protocol.replace(":",""))}]}function Lb(a,b,c,d,e,g){function h(a,b){var c=e.createElement("script"),d=function(){e.body.removeChild(c),b&&b()};return c.type="text/javascript",c.src=a,Ic?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&d()}:c.onload=c.onerror=d,e.body.appendChild(c),d}return function(e,i,j,k,l,m,n,p){function q(){t=-1,v&&v(),w&&w.abort()}function r(b,d,e,f){var h=g||pc(i).protocol;x&&c.cancel(x),v=w=null,d="file"==h?e?200:404:d,b(1223==d?204:d,e,f),a.$$completeOutstandingRequest(o)}var t;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Nc(e)){var u="_"+(d.counter++).toString(36);d[u]=function(a){d[u].data=a};var v=h(i.replace("JSON_CALLBACK","angular.callbacks."+u),function(){d[u].data?r(k,200,d[u].data):r(k,t||-2),delete d[u]})}else{var w=new b;w.open(e,i,!0),f(l,function(a,b){s(a)&&w.setRequestHeader(b,a)}),w.onreadystatechange=function(){if(4==w.readyState){var a=w.getAllResponseHeaders();r(k,t||w.status,w.responseType?w.response:w.responseText,a)}},n&&(w.withCredentials=!0),p&&(w.responseType=p),w.send(j||null)}if(m>0)var x=c(q,m);else m&&m.then&&m.then(q)}}function Mb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,i,j){for(var k,l,m=0,n=[],o=f.length,p=!1,q=[];o>m;)-1!=(k=f.indexOf(a,m))&&-1!=(l=f.indexOf(b,k+g))?(m!=k&&n.push(f.substring(m,k)),n.push(m=c(p=f.substring(k+g,l))),m.exp=p,m=l+h,p=!0):(m!=o&&n.push(f.substring(m)),m=o);if((o=n.length)||(n.push(""),o=1),j&&1<n.length)throw rd("noconcat",f);return!i||p?(q.length=o,m=function(a){try{for(var b,c=0,g=o;g>c;c++)"function"==typeof(b=n[c])&&(b=b(a),b=j?e.getTrusted(j,b):e.valueOf(b),null===b||r(b)?b="":"string"!=typeof b&&(b=L(b))),q[c]=b;return q.join("")}catch(h){a=rd("interr",f,h.toString()),d(a)}},m.exp=f,m.parts=n,m):void 0}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function Nb(){this.$get=["$rootScope","$window","$q",function(a,b,c){function d(d,f,g,h){var i=b.setInterval,j=b.clearInterval,k=c.defer(),l=k.promise,m=0,n=s(h)&&!h;return g=s(g)?g:0,l.then(null,null,d),l.$$intervalId=i(function(){k.notify(m++),g>0&&m>=g&&(k.resolve(m),j(l.$$intervalId),delete e[l.$$intervalId]),n||a.$apply()},f),e[l.$$intervalId]=k,l}var e={};return d.cancel=function(a){return a&&a.$$intervalId in e?(e[a.$$intervalId].reject("canceled"),clearInterval(a.$$intervalId),delete e[a.$$intervalId],!0):!1},d}]}function Ob(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function Pb(a){a=a.split("/");for(var b=a.length;b--;)a[b]=S(a[b]);return a.join("/")}function Qb(a,b){var c=pc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=m(c.port)||td[c.protocol]||null}function Rb(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=pc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=Q(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Sb(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function Tb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function Ub(a){return a.substr(0,Tb(a).lastIndexOf("/")+1)}function Vb(a,b){this.$$html5=!0,b=b||"";var d=Ub(a);Qb(a,this),this.$$parse=function(a){var b=Sb(d,a);if(!u(b))throw ud("ipthprfx",a,d);Rb(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=R(this.$$search),b=this.$$hash?"#"+S(this.$$hash):"";this.$$url=Pb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$rewrite=function(e){var f;return(f=Sb(a,e))!==c?(e=f,(f=Sb(b,f))!==c?d+(Sb("/",f)||f):a+e):(f=Sb(d,e))!==c?d+f:d==e+"/"?d:void 0}}function Wb(a,b){var c=Ub(a);Qb(a,this),this.$$parse=function(d){var e=Sb(a,d)||Sb(c,d),e="#"==e.charAt(0)?Sb(b,e):this.$$html5?e:"";if(!u(e))throw ud("ihshprfx",d,b);Rb(e,this),this.$$compose()},this.$$compose=function(){var c=R(this.$$search),d=this.$$hash?"#"+S(this.$$hash):"";this.$$url=Pb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$rewrite=function(b){return Tb(a)==Tb(b)?b:void 0}}function Xb(a,b){this.$$html5=!0,Wb.apply(this,arguments);var c=Ub(a);this.$$rewrite=function(d){var e;return a==Tb(d)?d:(e=Sb(c,d))?a+b+e:c===d+"/"?c:void 0}}function Yb(a){return function(){return this[a]}}function Zb(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function $b(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j=e.baseHref(),k=e.url();c?(j=k.substring(0,k.indexOf("/",k.indexOf("//")+2))+(j||"/"),f=f.history?Vb:Xb):(j=Tb(k),f=Wb),i=new f(j,"#"+b),i.$$parse(i.$$rewrite(k)),g.on("click",function(b){if(!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var c=Jc(b.target);"a"!==Nc(c[0].nodeName);)if(c[0]===g[0]||!(c=c.parent())[0])return;var f=c.prop("href"),h=i.$$rewrite(f);f&&!c.attr("target")&&h&&!b.isDefaultPrevented()&&(b.preventDefault(),h!=e.url()&&(i.$$parse(h),d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),i.absUrl()!=k&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){i.absUrl()!=a&&(d.$broadcast("$locationChangeStart",a,i.absUrl()).defaultPrevented?e.url(i.absUrl()):(d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),h(b)}),d.$$phase||d.$digest()))});var l=0;return d.$watch(function(){var a=e.url(),b=i.$$replace;return l&&a==i.absUrl()||(l++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),b),h(a))})),i.$$replace=!1,l}),i}]}function _b(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o;return e.apply?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function ac(a,b,c){if("string"!=typeof a&&"[object String]"!==Rc.apply(a))return a;if("constructor"===a&&!c)throw wd("isecfld",b);if("_"===a.charAt(0)||"_"===a.charAt(a.length-1))throw wd("isecprv",b);return a}function bc(a,b){if(a&&a.constructor===a)throw wd("isecfn",b);if(a&&a.document&&a.location&&a.alert&&a.setInterval)throw wd("isecwindow",b);if(a&&(a.nodeName||a.on&&a.find))throw wd("isecdom",b);return a}function cc(a,b,d,e,f){f=f||{},b=b.split(".");for(var g,h=0;1<b.length;h++){g=ac(b.shift(),e);var i=a[g];i||(i={},a[g]=i),a=i,a.then&&f.unwrapPromises&&(vd(e),"$$v"in a||function(a){a.then(function(b){a.$$v=b})}(a),a.$$v===c&&(a.$$v={}),a=a.$$v)}return g=ac(b.shift(),e),a[g]=d}function dc(a,b,d,e,f,g,h){return ac(a,g),ac(b,g),ac(d,g),ac(e,g),ac(f,g),h.unwrapPromises?function(h,i){var j,k=i&&i.hasOwnProperty(a)?i:h;return null===k||k===c?k:((k=k[a])&&k.then&&(vd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),b&&null!==k&&k!==c?((k=k[b])&&k.then&&(vd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),d&&null!==k&&k!==c?((k=k[d])&&k.then&&(vd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),e&&null!==k&&k!==c?((k=k[e])&&k.then&&(vd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),f&&null!==k&&k!==c?((k=k[f])&&k.then&&(vd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),k):k):k):k):k)}:function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null===i||i===c?i:(i=i[a],b&&null!==i&&i!==c?(i=i[b],d&&null!==i&&i!==c?(i=i[d],e&&null!==i&&i!==c?(i=i[e],f&&null!==i&&i!==c?i=i[f]:i):i):i):i)}}function ec(a,b,d){if(Cd.hasOwnProperty(a))return Cd[a];var e,g=a.split("."),h=g.length;if(b.csp)e=6>h?dc(g[0],g[1],g[2],g[3],g[4],d,b):function(a,e){var f,i=0;do f=dc(g[i++],g[i++],g[i++],g[i++],g[i++],d,b)(a,e),e=c,a=f;while(h>i);return f};else{var i="var l, fn, p;\n";f(g,function(a,c){ac(a,d),i+="if(s === null || s === undefined) return s;\nl=s;\ns="+(c?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'+(b.unwrapPromises?'if (s && s.then) {\n pw("'+d.replace(/\"/g,'\\"')+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var i=i+"return s;",j=new Function("s","k","pw",i);j.toString=function(){return i},e=function(a,b){return j(a,b,vd)}}return"hasOwnProperty"!==a&&(Cd[a]=e),e}function fc(){var a={},b={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(a){return s(a)?(b.unwrapPromises=!!a,this):b.unwrapPromises},this.logPromiseWarnings=function(a){return s(a)?(b.logPromiseWarnings=a,this):b.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(c,d,e){return b.csp=d.csp,vd=function(a){b.logPromiseWarnings&&!xd.hasOwnProperty(a)&&(xd[a]=!0,e.warn("[$parse] Promise found in the expression `"+a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(d){var e;switch(typeof d){case"string":return a.hasOwnProperty(d)?a[d]:(e=new Ad(b),e=new Bd(e,c,b).parse(d,!1),"hasOwnProperty"!==d&&(a[d]=e),e);case"function":return d;default:return o}}}]}function gc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return hc(function(b){a.$evalAsync(b)},b)}]}function hc(a,b){function d(a){return a}function e(a){return i(a)}var g=function(){var f,j,k=[];return j={resolve:function(b){if(k){var d=k;k=c,f=h(b),d.length&&a(function(){for(var a,b=0,c=d.length;c>b;b++)a=d[b],f.then(a[0],a[1],a[2])})}},reject:function(a){j.resolve(i(a))},notify:function(b){if(k){var c=k;k.length&&a(function(){for(var a,d=0,e=c.length;e>d;d++)a=c[d],a[2](b)})}},promise:{then:function(a,c,h){var i=g(),j=function(c){try{i.resolve((y(a)?a:d)(c))}catch(e){i.reject(e),b(e)}},l=function(a){try{i.resolve((y(c)?c:e)(a))}catch(d){i.reject(d),b(d)}},m=function(a){try{i.notify((y(h)?h:d)(a))}catch(c){b(c)}};return k?k.push([j,l,m]):f.then(j,l,m),i.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,b){var c=g();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(g){return b(g,!1)}return f&&y(f.then)?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},h=function(b){return b&&y(b.then)?b:{then:function(c){var d=g();return a(function(){d.resolve(c(b))}),d.promise}}},i=function(c){return{then:function(d,f){var h=g();return a(function(){try{h.resolve((y(f)?f:e)(c))}catch(a){h.reject(a),b(a)}}),h.promise}}};return{defer:g,reject:i,when:function(c,f,j,k){var l,m=g(),n=function(a){try{return(y(f)?f:d)(a)}catch(c){return b(c),i(c)}},o=function(a){try{return(y(j)?j:e)(a)}catch(c){return b(c),i(c)}},p=function(a){try{return(y(k)?k:d)(a)}catch(c){b(c)}};return a(function(){h(c).then(function(a){l||(l=!0,m.resolve(h(a).then(n,o,p)))},function(a){l||(l=!0,m.resolve(o(a)))},function(a){l||m.notify(p(a))})}),m.promise},all:function(a){var b=g(),c=0,d=x(a)?[]:{};return f(a,function(a,e){c++,h(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}}}function ic(){var a=10,b=d("$rootScope");this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(c,d,f,g){function h(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$isolateBindings={}}function i(a){if(m.$$phase)throw b("inprog",m.$$phase);m.$$phase=a}function k(a,b){var c=f(a);return Y(c,b),c}function l(){}h.prototype={constructor:h,$new:function(a){return a?(a=new h,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(a=function(){},a.prototype=this,a=new a,a.$id=j()),a["this"]=a,a.$$listeners={},a.$parent=this,a.$$watchers=a.$$nextSibling=a.$$childHead=a.$$childTail=null,a.$$prevSibling=this.$$childTail,this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a,a},$watch:function(a,b,c){var d=k(a,"watch"),e=this.$$watchers,f={fn:b,last:l,get:d,exp:a,eq:!!c};if(!y(b)){var g=k(b||o,"listener");f.fn=function(a,b,c){g(c)}}if("string"==typeof a&&d.constant){var h=f.fn;f.fn=function(a,b,c){h.call(this,a,b,c),E(e,f)}}return e||(e=this.$$watchers=[]),e.unshift(f),function(){E(e,f)}},$watchCollection:function(a,b){var c,d,g=this,h=0,i=f(a),j=[],k={},l=0;return this.$watch(function(){d=i(g);var a,b;if(t(d))if(e(d))for(c!==j&&(c=j,l=c.length=0,h++),a=d.length,l!==a&&(h++,c.length=l=a),b=0;a>b;b++)c[b]!==d[b]&&(h++,c[b]=d[b]);else{c!==k&&(c=k={},l=0,h++),a=0;for(b in d)d.hasOwnProperty(b)&&(a++,c.hasOwnProperty(b)?c[b]!==d[b]&&(h++,c[b]=d[b]):(l++,c[b]=d[b],h++));if(l>a)for(b in h++,c)c.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(l--,delete c[b])}else c!==d&&(c=d,h++);return h},function(){b(d,c,g)})},$digest:function(){var c,e,f,g,h,j,k,n,o,p,q=this.$$asyncQueue,r=this.$$postDigestQueue,s=a,t=[];i("$digest");do{for(j=!1,k=this;q.length;)try{p=q.shift(),p.scope.$eval(p.expression)}catch(u){d(u)}do{if(g=k.$$watchers)for(h=g.length;h--;)try{(c=g[h])&&(e=c.get(k))!==(f=c.last)&&!(c.eq?H(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))&&(j=!0,c.last=c.eq?F(e):e,c.fn(e,f===l?e:f,k),5>s&&(n=4-s,t[n]||(t[n]=[]),o=y(c.exp)?"fn: "+(c.exp.name||c.exp.toString()):c.exp,o+="; newVal: "+L(e)+"; oldVal: "+L(f),t[n].push(o)))}catch(v){d(v)}if(!(g=k.$$childHead||k!==this&&k.$$nextSibling))for(;k!==this&&!(g=k.$$nextSibling);)k=k.$parent}while(k=g);if(j&&!s--)throw m.$$phase=null,b("infdig",a,L(t))}while(j||q.length);for(m.$$phase=null;r.length;)try{r.shift()()}catch(w){d(w)}},$destroy:function(){if(m!=this&&!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){m.$$phase||m.$$asyncQueue.length||g.defer(function(){m.$$asyncQueue.length&&m.$digest()}),this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return i("$apply"),this.$eval(a)}catch(b){d(b)}finally{m.$$phase=null;try{m.$digest()}catch(c){throw d(c),c}}},$on:function(a,b){var c=this.$$listeners[a];return c||(this.$$listeners[a]=c=[]),c.push(b),function(){c[D(c,b)]=null}},$emit:function(a){var b,c,e,f=[],g=this,h=!1,i={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=[i].concat(Pc.call(arguments,1));do{for(b=g.$$listeners[a]||f,i.currentScope=g,c=0,e=b.length;e>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){d(k)}else b.splice(c,1),c--,e--;if(h)break;g=g.$parent}while(g);return i},$broadcast:function(a){var b,c,e=this,f=this,g={name:a,targetScope:this,preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1},h=[g].concat(Pc.call(arguments,1));do{for(e=f,g.currentScope=e,f=e.$$listeners[a]||[],b=0,c=f.length;c>b;b++)if(f[b])try{f[b].apply(null,h)}catch(i){d(i)}else f.splice(b,1),b--,c--;if(!(f=e.$$childHead||e!==this&&e.$$nextSibling))for(;e!==this&&!(f=e.$$nextSibling);)e=e.$parent}while(e=f);return g}};var m=new h;return m}]}function jc(a){if("self"===a)return a;if(u(a)){if(-1<a.indexOf("***"))throw Dd("iwcard",a);return a=a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),RegExp("^"+a+"$")}if(z(a))return RegExp("^"+a.source+"$");throw Dd("imatcher")}function kc(a){var b=[];return s(a)&&f(a,function(a){b.push(jc(a))}),b}function lc(){this.SCE_CONTEXTS=Ed;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=kc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=kc(a)),b},this.$get=["$log","$document","$injector",function(d,e,f){function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}var h=function(){throw Dd("unsafe")};f.has("$sanitize")&&(h=f.get("$sanitize"));var i=g(),j={};return j[Ed.HTML]=g(i),j[Ed.CSS]=g(i),j[Ed.URL]=g(i),j[Ed.JS]=g(i),j[Ed.RESOURCE_URL]=g(j[Ed.URL]),{trustAs:function(a,b){var d=j.hasOwnProperty(a)?j[a]:null;if(!d)throw Dd("icontext",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw Dd("itype",a);return new d(b)},getTrusted:function(d,e){if(null===e||e===c||""===e)return e;var f=j.hasOwnProperty(d)?j[d]:null;if(f&&e instanceof f)return e.$$unwrapTrustedValue();if(d===Ed.RESOURCE_URL){var g,i,f=pc(e.toString()),k=!1;for(g=0,i=a.length;i>g;g++)if("self"===a[g]?qc(f):a[g].exec(f.href)){k=!0;break}if(k)for(g=0,i=b.length;i>g;g++)if("self"===b[g]?qc(f):b[g].exec(f.href)){k=!1;break}if(k)return e;throw Dd("insecurl",e.toString())}if(d===Ed.HTML)return h(e);throw Dd("unsafe")},valueOf:function(a){return a instanceof i?a.$$unwrapTrustedValue():a}}}]}function mc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$document","$sceDelegate",function(b,d,e){if(a&&Ic&&(d=d[0].documentMode,d!==c&&8>d))throw Dd("iequirks");var g=F(Ed);g.isEnabled=function(){return a},g.trustAs=e.trustAs,g.getTrusted=e.getTrusted,g.valueOf=e.valueOf,a||(g.trustAs=g.getTrusted=function(a,b){return b},g.valueOf=p),g.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:function(b,c){return g.getTrusted(a,d(b,c))}};var h=g.parseAs,i=g.getTrusted,j=g.trustAs;return f(Ed,function(a,b){var c=Nc(b);g[bb("parse_as_"+c)]=function(b){return h(a,b)},g[bb("get_trusted_"+c)]=function(b){return i(a,b)},g[bb("trust_as_"+c)]=function(b){return j(a,b)}}),g}]}function nc(){this.$get=["$window","$document",function(a,b){var c,d={},e=m((/android (\d+)/.exec(Nc((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h=/^(Moz|webkit|O|ms)(?=[A-Z])/,i=g.body&&g.body.style,j=!1,k=!1;if(i){for(var l in i)if(j=h.exec(l)){c=j[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in i&&"webkit"),j=!!("transition"in i||c+"Transition"in i),k=!!("animation"in i||c+"Animation"in i),!e||j&&k||(j=u(g.body.style.webkitTransition),k=u(g.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>e||f),hashchange:"onhashchange"in a&&(!g.documentMode||7<g.documentMode),hasEvent:function(a){if("input"==a&&9==Ic)return!1;if(r(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:I(),vendorPrefix:c,transitions:j,animations:k,msie:Ic}}]}function oc(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i=c.defer(),j=i.promise,k=s(h)&&!h;return g=b.defer(function(){try{i.resolve(e())}catch(b){i.reject(b),d(b)}finally{delete f[j.$$timeoutId]}k||a.$apply()},g),j.$$timeoutId=g,f[g]=i,j}var f={};return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),delete f[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},e}]}function pc(a){return Ic&&(Fd.setAttribute("href",a),a=Fd.href),Fd.setAttribute("href",a),{href:Fd.href,protocol:Fd.protocol?Fd.protocol.replace(/:$/,""):"",host:Fd.host,search:Fd.search?Fd.search.replace(/^\?/,""):"",hash:Fd.hash?Fd.hash.replace(/^#/,""):"",hostname:Fd.hostname,port:Fd.port,pathname:Fd.pathname&&"/"===Fd.pathname.charAt(0)?Fd.pathname:"/"+Fd.pathname}}function qc(a){return a=u(a)?pc(a):a,a.protocol===Gd.protocol&&a.host===Gd.host}function rc(){this.$get=q(a)}function sc(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",uc),b("date",Ac),b("filter",tc),b("json",Bc),b("limitTo",Cc),b("lowercase",Ld),b("number",vc),b("orderBy",Dc),b("uppercase",Md)}function tc(){return function(a,b,c){if(!x(a))return a;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return Tc.equals(a,b)}:function(a,b){return b=(""+b).toLowerCase(),-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var g in b)"$"==g?function(){if(b[g]){var a=g;e.push(function(c){return f(c,b[a])})}}():function(){if("undefined"!=typeof b[g]){var a=g;e.push(function(c){return f($(c,a),b[a])})}}();break;case"function":e.push(b);break;default:return a}for(var d=[],h=0;h<a.length;h++){var i=a[h];e.check(i)&&d.push(i)}return d}}function uc(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),wc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function vc(a){var b=a.NUMBER_FORMATS;return function(a,c){return wc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function wc(a,b,c,d,e){if(isNaN(a)||!isFinite(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?g="0":(h=g,j=!0)}if(j)e>0&&a>-1&&1>a&&(h=a.toFixed(e));else{g=(g.split(Hd)[1]||"").length,r(e)&&(e=Math.min(Math.max(b.minFrac,g),b.maxFrac)),g=Math.pow(10,e),a=Math.round(a*g)/g,a=(""+a).split(Hd),g=a[0],a=a[1]||"";var k=0,l=b.lgSize,m=b.gSize;if(g.length>=l+m)for(k=g.length-l,j=0;k>j;j++)0===(k-j)%m&&0!==j&&(h+=c),h+=g.charAt(j);for(j=k;j<g.length;j++)0===(g.length-j)%l&&0!==j&&(h+=c),h+=g.charAt(j);for(;a.length<e;)a+="0";e&&"0"!==e&&(h+=d+a.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function xc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function yc(a,b,c,d){return c=c||0,function(e){return e=e["get"+a](),(c>0||e>-c)&&(e+=c),0===e&&-12==c&&(e=12),xc(e,b,d)}}function zc(a,b){return function(c,d){var e=c["get"+a](),f=Oc(b?"SHORT"+a:a);return d[f][e]}}function Ac(a){function b(a){var b;if(b=a.match(c)){a=new Date(0);var d=0,e=0,f=b[8]?a.setUTCFullYear:a.setFullYear,g=b[8]?a.setUTCHours:a.setHours;b[9]&&(d=m(b[9]+b[10]),e=m(b[9]+b[11])),f.call(a,m(b[1]),m(b[2])-1,m(b[3])),d=m(b[4]||0)-d,e=m(b[5]||0)-e,f=m(b[6]||0),b=Math.round(1e3*parseFloat("0."+(b[7]||0))),g.call(a,d,e,f,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Kd.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)(g=Jd.exec(d))?(i=i.concat(Pc.call(g,1)),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=Id[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function Bc(){return function(a){return L(a,!0)}}function Cc(){return function(a,b){if(!x(a)&&!u(a))return a;if(b=m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);d>c;c++)e.push(a[c]);return e}}function Dc(a){return function(b,c,d){function e(a,b){return N(b)?function(b,c){return a(c,b)}:a}if(!x(b)||!c)return b;c=x(c)?c:[c],c=C(c,function(b){var c=!1,d=b||p;return u(b)&&(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),d=a(b)),e(function(a,b){var c;c=d(a);var e=d(b),f=typeof c,g=typeof e;return f==g?("string"==f&&(c=c.toLowerCase(),e=e.toLowerCase()),c=c===e?0:e>c?-1:1):c=g>f?-1:1,c},c)});for(var f=[],g=0;g<b.length;g++)f.push(b[g]);return f.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function Ec(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Fc(a,b){function c(b,c){c=c?"-"+W(c,"-"):"",a.removeClass((b?Zd:Yd)+c).addClass((b?Yd:Zd)+c)}var d=this,e=a.parent().controller("form")||Pd,g=0,h=d.$error={},i=[];d.$name=b.name||b.ngForm,d.$dirty=!1,d.$pristine=!0,d.$valid=!0,d.$invalid=!1,e.$addControl(d),a.addClass($d),c(!0),d.$addControl=function(a){Z(a.$name,"input"),i.push(a),a.$name&&(d[a.$name]=a)},d.$removeControl=function(a){a.$name&&d[a.$name]===a&&delete d[a.$name],f(h,function(b,c){d.$setValidity(c,!0,a)}),E(i,a)},d.$setValidity=function(a,b,f){var i=h[a];if(b)i&&(E(i,f),i.length||(g--,g||(c(b),d.$valid=!0,d.$invalid=!1),h[a]=!1,c(!0,a),e.$setValidity(a,!0,d)));else{if(g||c(b),i){if(-1!=D(i,f))return}else h[a]=i=[],g++,c(!1,a),e.$setValidity(a,!1,d);i.push(f),d.$valid=!1,d.$invalid=!0}},d.$setDirty=function(){a.removeClass($d).addClass(_d),d.$dirty=!0,d.$pristine=!1,e.$setDirty()},d.$setPristine=function(){a.removeClass(_d).addClass($d),d.$dirty=!1,d.$pristine=!0,f(i,function(a){a.$setPristine()})}}function Gc(a,b,e,f,g,h){var i=function(){var c=b.val();N(e.ngTrim||"T")&&(c=Vc(c)),f.$viewValue!==c&&a.$apply(function(){f.$setViewValue(c)})};if(g.hasEvent("input"))b.on("input",i);else{var j,k=function(){j||(j=h.defer(function(){i(),j=null}))};b.on("keydown",function(a){a=a.keyCode,91===a||a>15&&19>a||a>=37&&40>=a||k()}),b.on("change",i),g.hasEvent("paste")&&b.on("paste cut",k)}f.$render=function(){b.val(f.$isEmpty(f.$viewValue)?"":f.$viewValue)};var l=e.ngPattern,n=function(a,b){return f.$isEmpty(b)||a.test(b)?(f.$setValidity("pattern",!0),b):(f.$setValidity("pattern",!1),c)};if(l&&((g=l.match(/^\/(.*)\/([gim]*)$/))?(l=RegExp(g[1],g[2]),g=function(a){return n(l,a)}):g=function(c){var e=a.$eval(l);if(!e||!e.test)throw d("ngPattern")("noregexp",l,e,O(b));return n(e,c)},f.$formatters.push(g),f.$parsers.push(g)),e.ngMinlength){var o=m(e.ngMinlength);g=function(a){return!f.$isEmpty(a)&&a.length<o?(f.$setValidity("minlength",!1),c):(f.$setValidity("minlength",!0),a)},f.$parsers.push(g),f.$formatters.push(g)}if(e.ngMaxlength){var p=m(e.ngMaxlength);g=function(a){return!f.$isEmpty(a)&&a.length>p?(f.$setValidity("maxlength",!1),c):(f.$setValidity("maxlength",!0),a)},f.$parsers.push(g),f.$formatters.push(g)}}function Hc(a,b){return a="ngClass"+a,function(){return{restrict:"AC",link:function(c,d,e){function g(a){(!0===b||c.$index%2===b)&&(i&&!H(a,i)&&e.$removeClass(h(i)),e.$addClass(h(a))),i=F(a)}function h(a){if(x(a))return a.join(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&b.push(c)}),b.join(" ")}return a}var i;c.$watch(e[a],g,!0),e.$observe("class",function(){g(c.$eval(e[a]))}),"ngClass"!==a&&c.$watch("$index",function(d,f){var g=1&d;1&g!==f&&(g===b?(g=c.$eval(e[a]),e.$addClass(h(g))):(g=c.$eval(e[a]),e.$removeClass(h(g))))})}}}}var Ic,Jc,Kc,Lc,Mc,Nc=function(a){return u(a)?a.toLowerCase():a},Oc=function(a){return u(a)?a.toUpperCase():a},Pc=[].slice,Qc=[].push,Rc=Object.prototype.toString,Sc=d("ng"),Tc=a.angular||(a.angular={}),Uc=["0","0","0"];Ic=m((/msie (\d+)/.exec(Nc(navigator.userAgent))||[])[1]),isNaN(Ic)&&(Ic=m((/trident\/.*; rv:(\d+)/.exec(Nc(navigator.userAgent))||[])[1])),o.$inject=[],p.$inject=[];var Vc=function(){return String.prototype.trim?function(a){return u(a)?a.trim():a}:function(a){return u(a)?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}();Mc=9>Ic?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?Oc(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var Wc=/[A-Z]/g,Xc={full:"1.2.0",major:1,minor:"NG_VERSION_MINOR",dot:0,codeName:"timely-delivery"},Yc=db.cache={},Zc=db.expando="ng-"+(new Date).getTime(),$c=1,_c=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},ad=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},bd=/([\:\-\_]+(.))/g,cd=/^moz([A-Z])/,dd=d("jqLite"),ed=db.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),db(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return a>=0?Jc(this[a]):Jc(this[this.length+a])},length:0,push:Qc,sort:[].sort,splice:[].splice},fd={};f("multiple selected checked disabled readOnly required open".split(" "),function(a){fd[Nc(a)]=a});var gd={};f("input select option textarea button form details".split(" "),function(a){gd[Oc(a)]=!0}),f({data:jb,inheritedData:pb,scope:function(a){return Jc(a).data("$scope")||pb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Jc(a).data("$isolateScope")||Jc(a).data("$isolateScopeNoTemplate")},controller:ob,injector:function(a){return pb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:kb,css:function(a,b,d){if(b=bb(b),!s(d)){var e;return 8>=Ic&&(e=a.currentStyle&&a.currentStyle[b],""===e&&(e="auto")),e=e||a.style[b],8>=Ic&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=Nc(b);if(fd[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?c:a},prop:function(a,b,c){return s(c)?(a[b]=c,void 0):a[b]},text:function(){function a(a,c){var d=b[a.nodeType];return r(c)?d?a[d]:"":(a[d]=c,void 0)}var b=[];return 9>Ic?(b[1]="innerText",b[3]="nodeValue"):b[1]=b[3]="textContent",a.$dv="",a}(),val:function(a,b){if(r(b)){if("SELECT"===Mc(a)&&a.multiple){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)fb(d[c]);a.innerHTML=b}},function(a,b){db.prototype[b]=function(b,d){var e,f;if((2==a.length&&a!==kb&&a!==ob?b:d)===c){if(t(b)){for(e=0;e<this.length;e++)if(a===jb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this
}e=a.$dv,f=e===c?Math.min(this.length,1):this.length;for(var g=0;f>g;g++){var h=a(this[g],b,d);e=e?e+h:h}return e}for(e=0;e<this.length;e++)a(this[e],b,d);return this}}),f({removeData:hb,dealoc:fb,on:function Je(a,c,d,e){if(s(e))throw dd("onargs");var g=ib(a,"events"),h=ib(a,"handle");g||ib(a,"events",g={}),h||ib(a,"handle",h=rb(a,g)),f(c.split(" "),function(c){var e=g[c];if(!e){if("mouseenter"==c||"mouseleave"==c){var f=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};g[c]=[],Je(a,{mouseleave:"mouseout",mouseenter:"mouseover"}[c],function(a){var b=a.relatedTarget;b&&(b===this||f(this,b))||h(a,c)})}else _c(a,c,h),g[c]=[];e=g[c]}e.push(d)})},off:gb,replaceWith:function(a,b){var c,d=a.parentNode;fb(a),f(new db(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.childNodes||[]},append:function(a,b){f(new db(b),function(b){1!==a.nodeType&&11!==a.nodeType||a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new db(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=Jc(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){fb(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new db(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:mb,removeClass:lb,toggleClass:function(a,b,c){r(c)&&(c=!kb(a,b)),(c?mb:lb)(a,b)},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,b){return a.getElementsByTagName(b)},clone:eb,triggerHandler:function(a,b,c){b=(ib(a,"events")||{})[b],c=c||[];var d=[{preventDefault:o,stopPropagation:o}];f(b,function(b){b.apply(a,d.concat(c))})}},function(a,b){db.prototype[b]=function(b,c,d){for(var e,f=0;f<this.length;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=Jc(e))):nb(e,a(this[f],b,c,d));return s(e)?e:this},db.prototype.bind=db.prototype.on,db.prototype.unbind=db.prototype.off}),tb.prototype={put:function(a,b){this[sb(a)]=b},get:function(a){return this[sb(a)]},remove:function(a){var b=this[a=sb(a)];return delete this[a],b}};var hd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,id=/,/,jd=/^\s*(_?)(\S+?)\1\s*$/,kd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ld=d("$injector"),md=d("$animate"),nd=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw md("notcsel",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.$get=["$timeout",function(a){return{enter:function(b,c,d,e){d=d&&d[d.length-1];var g=c&&c[0]||d&&d.parentNode,h=d&&d.nextSibling||null;f(b,function(a){g.insertBefore(a,h)}),e&&a(e,0,!1)},leave:function(b,c){b.remove(),c&&a(c,0,!1)},move:function(a,b,c,d){this.enter(a,b,c,d)},addClass:function(b,c,d){c=u(c)?c:x(c)?c.join(" "):"",f(b,function(a){mb(a,c)}),d&&a(d,0,!1)},removeClass:function(b,c,d){c=u(c)?c:x(c)?c.join(" "):"",f(b,function(a){lb(a,c)}),d&&a(d,0,!1)},enabled:o}}]}],od=d("$compile");Bb.$inject=["$provide"];var pd=/^(x[\:\-_]|data[\:\-_])/i,qd=a.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw d("$httpBackend")("noxhr")},rd=d("$interpolate"),sd=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,td={http:80,https:443,ftp:21},ud=d("$location");Xb.prototype=Wb.prototype=Vb.prototype={$$html5:!1,$$replace:!1,absUrl:Yb("$$absUrl"),url:function(a,b){if(r(a))return this.$$url;var c=sd.exec(a);return c[1]&&this.path(decodeURIComponent(c[1])),(c[2]||c[1])&&this.search(c[3]||""),this.hash(c[5]||"",b),this},protocol:Yb("$$protocol"),host:Yb("$$host"),port:Yb("$$port"),path:Zb("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a))this.$$search=Q(a);else{if(!t(a))throw ud("isrcharg");this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Zb("$$hash",p),replace:function(){return this.$$replace=!0,this}};var vd,wd=d("$parse"),xd={},yd={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},zd={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Ad=function(a){this.options=a};Ad.prototype={constructor:Ad,lex:function(a){this.text=a,this.index=0,this.ch=c,this.lastCh=":",this.tokens=[];var b;for(a=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===a[0]&&(b=this.tokens[this.tokens.length-1])&&(b.json=-1===b.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&a.unshift(this.ch),this.is("}]")&&a.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var d=this.ch+this.peek(),e=d+this.peek(2),f=yd[this.ch],g=yd[d],h=yd[e];h?(this.tokens.push({index:this.index,text:e,fn:h}),this.index+=3):g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=2):f?(this.tokens.push({index:this.index,text:this.ch,fn:f,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){return a=a||1,this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||""===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){throw c=c||this.index,b=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c,wd("lexerr",a,b,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Nc(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a*=1,this.tokens.push({index:b,text:a,json:!0,fn:function(){return a}})},readIdent:function(){for(var a,b,c,d,e=this,f="",g=this.index;this.index<this.text.length&&(d=this.text.charAt(this.index),"."===d||this.isIdent(d)||this.isNumber(d));)"."===d&&(a=this.index),f+=d,this.index++;if(a)for(b=this.index;b<this.text.length;){if(d=this.text.charAt(b),"("===d){c=f.substr(a-g+1),f=f.substr(0,a-g),this.index=b;break}if(!this.isWhitespace(d))break;b++}if(g={index:g,text:f},yd.hasOwnProperty(f))g.fn=yd[f],g.json=yd[f];else{var h=ec(f,this.options,this.text);g.fn=l(function(a,b){return h(a,b)},{assign:function(a,b){return cc(a,f,b,e.text,e.options)}})}this.tokens.push(g),c&&(this.tokens.push({index:a,text:".",json:!1}),this.tokens.push({index:a+1,text:c,json:!1}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),d=d+f;if(e)"u"===f?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,c+=String.fromCharCode(parseInt(f,16))):c=(e=zd[f])?c+e:c+f,e=!1;else if("\\"===f)e=!0;else{if(f===a)return this.index++,this.tokens.push({index:b,text:d,string:c,json:!0,fn:function(){return c}}),void 0;c+=f}this.index++}this.throwError("Unterminated quote",b)}};var Bd=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};Bd.ZERO=function(){return 0},Bd.prototype={constructor:Bd,parse:function(a,b){this.text=a,this.json=b,this.tokens=this.lexer.lex(a),b&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:a,index:0})});var c=b?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),c.literal=!!c.literal,c.constant=!!c.constant,c},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();(a=b.fn)||this.throwError("not a primary expression",b),b.json&&(a.constant=!0,a.literal=!0)}for(var c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw wd("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw wd("ueoe",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(0<this.tokens.length){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!(a||b||c||d))return e}return!1},expect:function(a,b,c,d){return(a=this.peek(a,b,c,d))?(this.json&&!a.json&&this.throwError("is not valid json",a),this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){e=[e];for(var f=0;f<c.length;f++)e.push(c[f](a,d));return b.apply(a,e)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")?(a=this.ternary(),(b=this.expect(":"))?this.ternaryFn(c,a,this.ternary()):(this.throwError("expected :",b),void 0)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(Bd.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var b=this,c=this.expect().text,d=ec(c,this.options,this.text);return l(function(b,c,e){return d(e||a(b,c),c)},{assign:function(d,e,f){return cc(a(d,f),c,e,b.text,b.options)}})},objectIndex:function(a){var b=this,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=ac(d(e,f),b.text,!0);return h?((h=bc(h[i],b.text))&&h.then&&b.options.unwrapPromises&&(g=h,"$$v"in h||(g.$$v=c,g.then(function(a){g.$$v=a})),h=h.$$v),h):c},{assign:function(c,e,f){var g=ac(d(c,f),b.text);return bc(a(c,f),b.text)[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],h=b?b(e,f):e,i=0;i<c.length;i++)g.push(c[i](e,f));return i=a(e,f,h)||o,bc(h,d.text),bc(i,d.text),g=i.apply?i.apply(h,g):i(g[0],g[1],g[2],g[3],g[4]),bc(g,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{var c=this.expect(),c=c.string||c.text;this.consume(":");var d=this.expression();a.push({key:c,value:d}),d.constant||(b=!1)}while(this.expect(","));return this.consume("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};var Cd={},Dd=d("$sce"),Ed={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fd=b.createElement("a"),Gd=pc(a.location.href,!0);sc.$inject=["$provide"],uc.$inject=["$locale"],vc.$inject=["$locale"];var Hd=".",Id={yyyy:yc("FullYear",4),yy:yc("FullYear",2,0,!0),y:yc("FullYear",1),MMMM:zc("Month"),MMM:zc("Month",!0),MM:yc("Month",2,1),M:yc("Month",1,1),dd:yc("Date",2),d:yc("Date",1),HH:yc("Hours",2),H:yc("Hours",1),hh:yc("Hours",2,-12),h:yc("Hours",1,-12),mm:yc("Minutes",2),m:yc("Minutes",1),ss:yc("Seconds",2),s:yc("Seconds",1),sss:yc("Milliseconds",3),EEEE:zc("Day"),EEE:zc("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a){return a=-1*a.getTimezoneOffset(),a=(a>=0?"+":"")+(xc(Math[a>0?"floor":"ceil"](a/60),2)+xc(Math.abs(a%60),2))}},Jd=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Kd=/^\-?\d+$/;Ac.$inject=["$locale"];var Ld=q(Nc),Md=q(Oc);Dc.$inject=["$parse"];var Nd=q({restrict:"E",compile:function(a,c){return 8>=Ic&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),function(a,b){b.on("click",function(a){b.attr("href")||a.preventDefault()})}}}),Od={};f(fd,function(a,b){if("multiple"!=a){var c=Cb("ng-"+b);Od[c]=function(){return{priority:100,compile:function(){return function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}}),f(["src","srcset","href"],function(a){var b=Cb("ng-"+a);Od[b]=function(){return{priority:99,link:function(c,d,e){e.$observe(b,function(b){b&&(e.$set(a,b),Ic&&d.prop(a,e[a]))})}}}});var Pd={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};Fc.$inject=["$element","$attrs","$scope"];var Qd=function(a){return["$timeout",function(b){return{name:"form",restrict:a?"EAC":"E",controller:Fc,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};_c(d[0],"submit",g),d.on("$destroy",function(){b(function(){ad(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&cc(a,i,f,i),h&&d.on("$destroy",function(){h.$removeControl(f),i&&cc(a,i,c,i),l(f,Pd)})}}}}}]},Rd=Qd(),Sd=Qd(!0),Td=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Ud=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,Vd=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Wd={text:Gc,number:function(a,b,d,e,f,g){Gc(a,b,d,e,f,g),e.$parsers.push(function(a){var b=e.$isEmpty(a);return b||Vd.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a}),d.min&&(a=function(a){var b=parseFloat(d.min);return!e.$isEmpty(a)&&b>a?(e.$setValidity("min",!1),c):(e.$setValidity("min",!0),a)},e.$parsers.push(a),e.$formatters.push(a)),d.max&&(a=function(a){var b=parseFloat(d.max);return!e.$isEmpty(a)&&a>b?(e.$setValidity("max",!1),c):(e.$setValidity("max",!0),a)},e.$parsers.push(a),e.$formatters.push(a)),e.$formatters.push(function(a){return e.$isEmpty(a)||v(a)?(e.$setValidity("number",!0),a):(e.$setValidity("number",!1),c)})},url:function(a,b,d,e,f,g){Gc(a,b,d,e,f,g),a=function(a){return e.$isEmpty(a)||Td.test(a)?(e.$setValidity("url",!0),a):(e.$setValidity("url",!1),c)},e.$formatters.push(a),e.$parsers.push(a)},email:function(a,b,d,e,f,g){Gc(a,b,d,e,f,g),a=function(a){return e.$isEmpty(a)||Ud.test(a)?(e.$setValidity("email",!0),a):(e.$setValidity("email",!1),c)},e.$formatters.push(a),e.$parsers.push(a)},radio:function(a,b,c,d){r(c.name)&&b.attr("name",j()),b.on("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){b[0].checked=c.value==d.$viewValue},c.$observe("value",d.$render)},checkbox:function(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.on("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a!==e},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})},hidden:o,button:o,submit:o,reset:o},Xd=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(Wd[Nc(e.type)]||Wd.text)(c,d,e,f,b,a)}}}],Yd="ng-valid",Zd="ng-invalid",$d="ng-pristine",_d="ng-dirty",ae=["$scope","$exceptionHandler","$attrs","$element","$parse",function(a,b,c,e,g){function h(a,b){b=b?"-"+W(b,"-"):"",e.removeClass((a?Zd:Yd)+b).addClass((a?Yd:Zd)+b)}this.$modelValue=this.$viewValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var i=g(c.ngModel),j=i.assign;if(!j)throw d("ngModel")("nonassign",c.ngModel,O(e));this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var k=e.inheritedData("$formController")||Pd,l=0,m=this.$error={};e.addClass($d),h(!0),this.$setValidity=function(a,b){m[a]!==!b&&(b?(m[a]&&l--,l||(h(!0),this.$valid=!0,this.$invalid=!1)):(h(!1),this.$invalid=!0,this.$valid=!1,l++),m[a]=!b,h(b,a),k.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,e.removeClass(_d).addClass($d)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,e.removeClass($d).addClass(_d),k.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,j(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var n=this;a.$watch(function(){var b=i(a);if(n.$modelValue!==b){var c=n.$formatters,d=c.length;for(n.$modelValue=b;d--;)b=c[d](b);n.$viewValue!==b&&(n.$viewValue=b,n.$render())}})}],be=function(){return{require:["ngModel","^?form"],controller:ae,link:function(a,b,c,d){var e=d[0],f=d[1]||Pd;f.$addControl(e),a.$on("$destroy",function(){f.$removeControl(e)})}}},ce=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),de=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&d.$isEmpty(a)?(d.$setValidity("required",!1),void 0):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},ee=function(){return{require:"ngModel",link:function(a,b,d,e){var g=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!r(a)){var b=[];return a&&f(a.split(g),function(a){a&&b.push(Vc(a))}),b}}),e.$formatters.push(function(a){return x(a)?a.join(", "):c}),e.$isEmpty=function(a){return!a||!a.length}}}},fe=/^(true|false|\d+)$/,ge=function(){return{priority:100,compile:function(a,b){return fe.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},he=Ec(function(a,b,d){b.addClass("ng-binding").data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}),ie=["$interpolate",function(a){return function(b,c,d){b=a(c.attr(d.$attr.ngBindTemplate)),c.addClass("ng-binding").data("$binding",b),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],je=["$sce","$parse",function(a,b){return function(c,d,e){d.addClass("ng-binding").data("$binding",e.ngBindHtml);var f=b(e.ngBindHtml);c.$watch(function(){return(f(c)||"").toString()},function(){d.html(a.getTrustedHtml(f(c))||"")})}}],ke=Hc("",!0),le=Hc("Odd",0),me=Hc("Even",1),ne=Ec({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),oe=[function(){return{scope:!0,controller:"@"}}],pe={};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Cb("ng-"+a);pe[b]=["$parse",function(c){return{compile:function(d,e){var f=c(e[b]);return function(b,c){c.on(Nc(a),function(a){b.$apply(function(){f(b,{$event:a})})})}}}}]});var qe=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,compile:function(c,d,e){return function(c,d,f){var g,h;c.$watch(f.ngIf,function(i){N(i)?(h=c.$new(),e(h,function(c){g={startNode:c[0],endNode:c[c.length++]=b.createComment(" end ngIf: "+f.ngIf+" ")},a.enter(c,d.parent(),d)})):(h&&(h.$destroy(),h=null),g&&(a.leave(_(g)),g=null))})}}}}],re=["$http","$templateCache","$anchorScroll","$compile","$animate","$sce",function(a,b,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",compile:function(g,h,i){var j=h.ngInclude||h.src,k=h.onload||"",l=h.autoscroll;return function(g,h){var m,n,o=0,p=function(){m&&(m.$destroy(),m=null),n&&(e.leave(n),n=null)};g.$watch(f.parseAsResourceUrl(j),function(f){var j=function(){!s(l)||l&&!g.$eval(l)||c()},q=++o;f?(a.get(f,{cache:b}).success(function(a){if(q===o){var b=g.$new();i(b,function(c){p(),m=b,n=c,n.html(a),e.enter(n,null,h,j),d(n.contents())(m),m.$emit("$includeContentLoaded"),g.$eval(k)})}}).error(function(){q===o&&p()}),g.$emit("$includeContentRequested")):p()})}}}}],se=Ec({compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),te=Ec({terminal:!0,priority:1e3}),ue=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=g.$attr.when&&e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i)||{},l={},m=b.startSymbol(),n=b.endSymbol(),o=/^when(Minus)?(.+)$/;f(g,function(a,b){o.test(b)&&(k[Nc(b.replace("when","").replace("Minus","-"))]=e.attr(g.$attr[b]))}),f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],ve=["$parse","$animate",function(a,c){var g=d("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,h,i){return function(d,h,j){var k,l,m,n,o,p,q,r=j.ngRepeat,s=r.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),t={$id:sb};if(!s)throw g("iexp",r);if(j=s[1],o=s[2],(s=s[4])?(k=a(s),l=function(a,b,c){return q&&(t[q]=a),t[p]=b,t.$index=c,k(d,t)}):(m=function(a,b){return sb(b)},n=function(a){return a}),s=j.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!s)throw g("iidexp",j);p=s[3]||s[1],q=s[2];var u={};d.$watchCollection(o,function(a){var j,k,o,s,t,v,w,x,y,z=h[0],A={},B=[];if(e(a))x=a,o=l||m;else{o=l||n,x=[];for(v in a)a.hasOwnProperty(v)&&"$"!=v.charAt(0)&&x.push(v);x.sort()}for(s=x.length,k=B.length=x.length,j=0;k>j;j++)if(v=a===x?j:x[j],w=a[v],w=o(v,w,j),Z(w,"`track by` id"),u.hasOwnProperty(w))y=u[w],delete u[w],A[w]=y,B[j]=y;else{if(A.hasOwnProperty(w))throw f(B,function(a){a&&a.startNode&&(u[a.id]=a)}),g("dupes",r,w);B[j]={id:w},A[w]=!1}for(v in u)u.hasOwnProperty(v)&&(y=u[v],j=_(y),c.leave(j),f(j,function(a){a.$$NG_REMOVED=!0}),y.scope.$destroy());for(j=0,k=x.length;k>j;j++){if(v=a===x?j:x[j],w=a[v],y=B[j],B[j-1]&&(z=B[j-1].endNode),y.startNode){t=y.scope,o=z;do o=o.nextSibling;while(o&&o.$$NG_REMOVED);y.startNode!=o&&c.move(_(y),null,Jc(z)),z=y.endNode}else t=d.$new();t[p]=w,q&&(t[q]=v),t.$index=j,t.$first=0===j,t.$last=j===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&j)),y.startNode||i(t,function(a){a[a.length++]=b.createComment(" end ngRepeat: "+r+" "),c.enter(a,null,Jc(z)),z=a,y.scope=t,y.startNode=z&&z.endNode?z.endNode:a[0],y.endNode=a[a.length-1],A[y.id]=y})}u=A})}}}}],we=["$animate",function(a){return function(b,c,d){b.$watch(d.ngShow,function(b){a[N(b)?"removeClass":"addClass"](c,"ng-hide")})}}],xe=["$animate",function(a){return function(b,c,d){b.$watch(d.ngHide,function(b){a[N(b)?"addClass":"removeClass"](c,"ng-hide")})}}],ye=Ec(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),ze=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g,h,i=[];b.$watch(d.ngSwitch||d.on,function(c){for(var j=0,k=i.length;k>j;j++)i[j].$destroy(),a.leave(h[j]);h=[],i=[],(g=e.cases["!"+c]||e.cases["?"])&&(b.$eval(d.change),f(g,function(c){var d=b.$new();i.push(d),c.transclude(d,function(b){var d=c.element;h.push(b),a.enter(b,d.parent(),d)})}))})}}}],Ae=Ec({transclude:"element",priority:800,require:"^ngSwitch",compile:function(a,b,c){return function(a,d,e,f){f.cases["!"+b.ngSwitchWhen]=f.cases["!"+b.ngSwitchWhen]||[],f.cases["!"+b.ngSwitchWhen].push({transclude:c,element:d})}}}),Be=Ec({transclude:"element",priority:800,require:"^ngSwitch",compile:function(a,b,c){return function(a,b,d,e){e.cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:c,element:b})}}}),Ce=Ec({controller:["$element","$transclude",function(a,b){if(!b)throw d("ngTransclude")("orphan",O(a));this.$transclude=b}],link:function(a,b,c,d){d.$transclude(function(a){b.html(""),b.append(a)})}}),De=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"==c.type&&a.put(c.id,b[0].text)}}}],Ee=d("ngOptions"),Fe=q({terminal:!0}),Ge=["$compile","$parse",function(a,d){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e=this,f={},g=h;e.databound=c.ngModel,e.init=function(a,b,c){g=a,d=c},e.addOption=function(b){Z(b,'"option value"'),f[b]=!0,g.$viewValue==b&&(a.val(b),d.parent()&&d.remove())},e.removeOption=function(a){this.hasOption(a)&&(delete f[a],g.$viewValue==a&&this.renderUnknownOption(a))},e.renderUnknownOption=function(b){b="? "+sb(b)+" ?",d.val(b),a.prepend(d),a.val(b),d.prop("selected",!0)},e.hasOption=function(a){return f.hasOwnProperty(a)},b.$on("$destroy",function(){e.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new tb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){H(d,c.$viewValue)||(d=F(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a,c,d,e,i,j={"":[]},u=[""];e=h.$modelValue,i=p(b)||[];var z,A,B,C=m?g(i):i;A={},d=!1;var D,E;if(t)if(q&&x(e))for(d=new tb([]),B=0;B<e.length;B++)A[l]=e[B],d.put(q(b,A),e[B]);else d=new tb(e);for(B=0;z=C.length,z>B;B++){if(c=B,m){if(c=C[B],"$"===c.charAt(0))continue;A[m]=c}A[l]=i[c],a=n(b,A)||"",(c=j[a])||(c=j[a]=[],u.push(a)),t?a=s(d.remove(q?q(b,A):o(b,A))):(q?(a={},a[l]=e,a=q(b,a)===q(b,A)):a=e===o(b,A),d=d||a),D=k(b,A),D=s(D)?D:"",c.push({id:q?q(b,A):m?C[B]:B,label:D,selected:a})}for(t||(v||null===e?j[""].unshift({id:"",label:"",selected:!d}):d||j[""].unshift({id:"?",label:"",selected:!0})),A=0,C=u.length;C>A;A++){for(a=u[A],c=j[a],r.length<=A?(e={element:y.clone().attr("label",a),label:c.label},i=[e],r.push(i),f.append(e.element)):(i=r[A],e=i[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,z=c.length;z>B;B++)d=c[B],(a=i[B+1])?(D=a.element,a.label!==d.label&&D.text(a.label=d.label),a.id!==d.id&&D.val(a.id=d.id),D[0].selected!==d.selected&&D.prop("selected",a.selected=d.selected)):(""===d.id&&v?E=v:(E=w.clone()).val(d.id).attr("selected",d.selected).text(d.label),i.push({element:E,label:d.label,id:d.id,selected:d.selected}),D?D.after(E):e.element.append(E),D=E);for(B++;i.length>B;)i.pop().element.remove()}for(;r.length>A;)r.pop()[0].element.remove()}var j;if(!(j=u.match(e)))throw Ee("iexp",u,O(f));var k=d(j[2]||j[1]),l=j[4]||j[6],m=j[5],n=d(j[3]||""),o=d(j[2]?j[1]:l),p=d(j[7]),q=j[8]?d(j[8]):null,r=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.html(""),f.on("change",function(){b.$apply(function(){var a,d,e,g,i,j,k,n,s=p(b)||[],u={};if(t){for(e=[],i=0,k=r.length;k>i;i++)for(a=r[i],g=1,j=a.length;j>g;g++)if((d=a[g].element)[0].selected){if(d=d.val(),m&&(u[m]=d),q)for(n=0;n<s.length&&(u[l]=s[n],q(b,u)!=d);n++);else u[l]=s[d];e.push(o(b,u))}}else if(d=f.val(),"?"==d)e=c;else if(""===d)e=null;else if(q){for(n=0;n<s.length;n++)if(u[l]=s[n],q(b,u)==d){e=o(b,u);break}}else u[l]=s[d],m&&(u[m]=d),e=o(b,u);h.$setViewValue(e)})}),h.$render=i,b.$watch(i)}if(k[1]){var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=Jc(b.createElement("option")),y=Jc(b.createElement("optgroup")),z=w.clone();k=0;for(var A=i.children(),B=A.length;B>k;k++)if(""===A[k].value){o=v=A.eq(k);break}if(p.init(q,v,z),t&&(j.required||j.ngRequired)){var C=function(a){return q.$setValidity("required",!j.required||a&&a.length),a};q.$parsers.push(C),q.$formatters.unshift(C),j.$observe("required",function(){C(q.$viewValue)})}u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],He=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f=c.parent(),g=f.data("$selectController")||f.parent().data("$selectController");
g&&g.databound?c.prop("selected",!1):g=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&g.removeOption(b),g.addOption(a)}):g.addOption(d.value),c.on("$destroy",function(){g.removeOption(d.value)})}}}}],Ie=q({restrict:"E",terminal:!0});(Kc=a.jQuery)?(Jc=Kc,l(Kc.fn,{scope:ed.scope,isolateScope:ed.isolateScope,controller:ed.controller,injector:ed.injector,inheritedData:ed.inheritedData}),cb("remove",!0,!0,!1),cb("empty",!1,!1,!1),cb("html",!1,!1,!0)):Jc=db,Tc.element=Jc,function(b){l(b,{bootstrap:V,copy:F,extend:l,equals:H,element:Jc,forEach:f,injector:vb,noop:o,bind:J,toJson:L,fromJson:M,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:y,isObject:t,isNumber:v,isElement:B,isArray:x,version:Xc,isDate:w,lowercase:Nc,uppercase:Oc,callbacks:{counter:0},$$minErr:d,$$csp:I}),Lc=ab(a);try{Lc("ngLocale")}catch(c){Lc("ngLocale",[]).provider("$locale",Ob)}Lc("ng",["ngLocale"],["$provide",function(a){a.provider("$compile",Bb).directive({a:Nd,input:Xd,textarea:Xd,form:Rd,script:De,select:Ge,style:Ie,option:He,ngBind:he,ngBindHtml:je,ngBindTemplate:ie,ngClass:ke,ngClassEven:me,ngClassOdd:le,ngCloak:ne,ngController:oe,ngForm:Sd,ngHide:xe,ngIf:qe,ngInclude:re,ngInit:se,ngNonBindable:te,ngPluralize:ue,ngRepeat:ve,ngShow:we,ngStyle:ye,ngSwitch:ze,ngSwitchWhen:Ae,ngSwitchDefault:Be,ngOptions:Fe,ngTransclude:Ce,ngModel:be,ngList:ee,ngChange:ce,required:de,ngRequired:de,ngValue:ge}).directive(Od).directive(pe),a.provider({$anchorScroll:wb,$animate:nd,$browser:yb,$cacheFactory:zb,$controller:Db,$document:Eb,$exceptionHandler:Fb,$filter:sc,$interpolate:Mb,$interval:Nb,$http:Jb,$httpBackend:Kb,$location:$b,$log:_b,$parse:fc,$rootScope:ic,$q:gc,$sce:mc,$sceDelegate:lc,$sniffer:nc,$templateCache:Ab,$timeout:oc,$window:rc})}])}(Tc),Jc(b).ready(function(){U(b,V)})}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-start{clip:rect(0,auto,auto,0);-ms-zoom:1.0001;}.ng-animate-active{clip:rect(-1px,auto,auto,0);-ms-zoom:1;}</style>'),function(a,b,c){b.module("ngAnimate",["ng"]).config(["$provide","$animateProvider",function(d,e){var f=b.noop,g=b.forEach,h=e.$$selectors,i=1,j="$$ngAnimateState",k="ng-animate",l={running:!0};d.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$timeout","$rootScope","$document",function(a,c,d,e,m,n){function o(a){if(a){var b=[],e={};a=a.substr(1).split("."),(d.transitions||d.animations)&&a.push("");for(var f=0;f<a.length;f++){var g=a[f],i=h[g];i&&!e[g]&&(b.push(c.get(i)),e[g]=!0)}return b}}function p(a,b,c,d,e,h,i){function l(a){h(),!0===a?q():((a=c.data(j))&&(a.done=q,c.data(j,a)),n(w,"after",q))}function n(d,e,h){var i=e+"End";g(d,function(g,j){var k=function(){a:{var a=e+"Complete",b=d[j];for(b[a]=!0,(b[i]||f)(),b=0;b<d.length;b++)if(!d[b][a])break a;h()}};"before"!=e||"enter"!=a&&"move"!=a?g[e]?g[i]=v?g[e](c,b,k):g[e](c,k):k():k()})}function p(){i&&m(i,0,!1)}function q(){if(!q.hasBeenRun){q.hasBeenRun=!0;var a=c.data(j);a&&(v?s(c):(a.closeAnimationTimeout=m(function(){s(c)},0,!1),c.data(j,a))),p()}}var u=(" "+((c.attr("class")||"")+" "+b)).replace(/\s+/g,".");d||(d=e?e.parent():c.parent()),e=o(u);var v="addClass"==a||"removeClass"==a,u=c.data(j)||{};if(t(c,d)||0===e.length)h(),q();else{var w=[];u.running&&v&&u.structural||g(e,function(d){if(!d.allowCancel||d.allowCancel(c,a,b)){var e=d[a];"leave"==a?(d=e,e=null):d=d["before"+a.charAt(0).toUpperCase()+a.substr(1)],w.push({before:d,after:e})}}),0===w.length?(h(),p()):(u.running&&(m.cancel(u.closeAnimationTimeout),s(c),r(u.animations),(u.done||f)(!0)),"addClass"==a&&c.hasClass(b)||"removeClass"==a&&!c.hasClass(b)?(h(),p()):(c.addClass(k),c.data(j,{running:!0,structural:!v,animations:w,done:l}),n(w,"before",l)))}}function q(a){a=a[0],a.nodeType==i&&g(a.querySelectorAll("."+k),function(a){a=b.element(a);var c=a.data(j);c&&(r(c.animations),s(a))})}function r(a){g(a,function(b){a.beforeComplete||(b.beforeEnd||f)(!0),a.afterComplete||(b.afterEnd||f)(!0)})}function s(a){a[0]==e[0]?l.disabled||(l.running=!1,l.structural=!1):(a.removeClass(k),a.removeData(j))}function t(a,b){if(l.disabled)return!0;if(a[0]==e[0])return l.disabled||l.running;do{if(0===b.length)break;var c=b[0]==e[0],d=c?l:b.data(j),d=d&&(!!d.disabled||!!d.running);if(c||d)return d;if(c)break}while(b=b.parent());return!0}return e.data(j,l),n.$$postDigest(function(){l.running=!1}),{enter:function(b,c,d,e){this.enabled(!1,b),a.enter(b,c,d),n.$$postDigest(function(){p("enter","ng-enter",b,c,d,f,e)})},leave:function(b,c){q(b),this.enabled(!1,b),n.$$postDigest(function(){p("leave","ng-leave",b,null,null,function(){a.leave(b)},c)})},move:function(b,c,d,e){q(b),this.enabled(!1,b),a.move(b,c,d),n.$$postDigest(function(){p("move","ng-move",b,c,d,f,e)})},addClass:function(b,c,d){p("addClass",c,b,null,null,function(){a.addClass(b,c)},d)},removeClass:function(b,c,d){p("removeClass",c,b,null,null,function(){a.removeClass(b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)s(b);else{var c=b.data(j)||{};c.disabled=!0,b.data(j,c)}break;case 1:l.disabled=!a;break;default:a=!l.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout",function(d,e,h){function j(a){M.push(a),h.cancel(B),B=h(function(){g(M,function(a){a()}),M=[],B=null,K={}},10,!1)}function k(a,b){var c=a.getAttribute("style")||"";return a.setAttribute("style",(0<c.length?"; ":"")+b),c}function l(a,b){var c=b?K[b]:null;if(!c){var e,f,h,j,k=0,l=0,n=0,o=0;g(a,function(a){if(a.nodeType==i){a=d.getComputedStyle(a)||{},h=a[w+C],k=Math.max(m(h),k),j=a[w+D],e=a[w+E],l=Math.max(m(e),l),f=a[y+E],o=Math.max(m(f),o);var b=m(a[y+C]);b>0&&(b*=parseInt(a[y+F],10)||1),n=Math.max(b,n)}}),c={total:0,transitionPropertyStyle:j,transitionDurationStyle:h,transitionDelayStyle:e,transitionDelay:l,transitionDuration:k,animationDelayStyle:f,animationDelay:o,animationDuration:n},b&&(K[b]=c)}return c}function m(a){var c=0;return a=b.isString(a)?a.split(/\s*,\s*/):[],g(a,function(a){c=Math.max(parseFloat(a)||0,c)}),c}function n(a){var b=a.parent(),c=b.data(G);return c||(b.data(G,++L),c=L),c+"-"+a[0].className}function o(a,b){var c=n(a),d=c+" "+b,e={},f=K[d]?++K[d].total:0;if(f>0){var h=b+"-stagger",e=c+" "+h;(c=!K[e])&&a.addClass(h),e=l(a,e),c&&a.removeClass(h)}if(a.addClass(b),d=l(a,d),h=Math.max(d.transitionDuration,d.animationDuration),0===h)return a.removeClass(b),!1;var c=a[0],i="";return 0<d.transitionDuration&&(a.addClass(I),i+=J+" ",c.style[w+D]="none"),g(b.split(" "),function(a,b){i+=(b>0?" ":"")+a+"-active"}),a.data(H,{className:b,activeClassName:i,maxDuration:h,classes:b+" "+i,timings:d,stagger:e,ii:f}),!0}function p(a,b,c){function d(a){a.stopPropagation(),a=a.originalEvent||a;var b=a.$manualTimeStamp||a.timeStamp||Date.now();Math.max(b-p,0)>=o&&a.elapsedTime>=m&&c()}var f=a.data(H);if(a.hasClass(b)&&f){var g,h,i=a[0],j=f.timings,l=f.stagger,m=f.maxDuration,n=f.activeClassName,o=1e3*Math.max(j.transitionDelay,j.animationDelay),p=Date.now(),r=z+" "+x,f=f.ii,s="";if(0<j.transitionDuration){i.style[w+D]="";var t=j.transitionPropertyStyle;-1==t.indexOf("all")&&(h=!0,s+=A+"transition-property: "+t+", "+(e.msie?"-ms-zoom":"clip")+"; ",s+=A+"transition-duration: "+j.transitionDurationStyle+", "+j.transitionDuration+"s; ")}return f>0&&(0<l.transitionDelay&&0===l.transitionDuration&&(t=j.transitionDelayStyle,h&&(t+=", "+j.transitionDelay+"s"),s+=A+"transition-delay: "+q(t,l.transitionDelay,f)+"; "),0<l.animationDelay&&0===l.animationDuration&&(s+=A+"animation-delay: "+q(j.animationDelayStyle,l.animationDelay,f)+"; ")),0<s.length&&(g=k(i,s)),a.on(r,d),a.addClass(n),function(){a.off(r,d),a.removeClass(n),u(a,b),null!=g&&(0<g.length?i.setAttribute("style",g):i.removeAttribute("style"))}}c()}function q(a,b,c){var d="";return g(a.split(","),function(a,e){d+=(e>0?",":"")+(c*b+parseInt(a,10))+"s"}),d}function r(a,b){return o(a,b)?function(c){c&&u(a,b)}:void 0}function s(a,b,c){return a.data(H)?p(a,b,c):(u(a,b),c(),void 0)}function t(a,b,c){var d=r(a,b);if(d){var e=d;return j(function(){e=s(a,b,c)}),function(a){(e||f)(a)}}c()}function u(a,b){a.removeClass(b),a.removeClass(I),a.removeData(H)}function v(a,c){var d="";return a=b.isArray(a)?a:a.split(/\s+/),g(a,function(a,b){a&&0<a.length&&(d+=(b>0?" ":"")+a+c)}),d}var w,x,y,z,A="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(A="-webkit-",w="WebkitTransition",x="webkitTransitionEnd transitionend"):(w="transition",x="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(A="-webkit-",y="WebkitAnimation",z="webkitAnimationEnd animationend"):(y="animation",z="animationend");var B,C="Duration",D="Property",E="Delay",F="IterationCount",G="$$ngAnimateKey",H="$$ngAnimateCSS3Data",I="ng-animate-start",J="ng-animate-active",K={},L=0,M=[];return{allowCancel:function(a,c,d){var e=(a.data(H)||{}).classes;if(!e||0<=["enter","leave","move"].indexOf(c))return!0;var f=a.parent(),h=b.element(a[0].cloneNode());return h.attr("style","position:absolute; top:-9999px; left:-9999px"),h.removeAttr("id"),h.html(""),g(e.split(" "),function(a){h.removeClass(a)}),h.addClass(v(d,"addClass"==c?"-add":"-remove")),f.append(h),a=l(h),h.remove(),0<Math.max(a.transitionDuration,a.animationDuration)},enter:function(a,b){return t(a,"ng-enter",b)},leave:function(a,b){return t(a,"ng-leave",b)},move:function(a,b){return t(a,"ng-move",b)},beforeAddClass:function(a,b,c){return(a=r(a,v(b,"-add")))?(j(c),a):(c(),void 0)},addClass:function(a,b,c){return s(a,v(b,"-add"),c)},beforeRemoveClass:function(a,b,c){return(a=r(a,v(b,"-remove")))?(j(c),a):(c(),void 0)},removeClass:function(a,b,c){return s(a,v(b,"-remove"),c)}}}])}])}(window,window.angular),function(a,b,c){var d=b.$$minErr("$resource");b.module("ngResource",["ng"]).factory("$resource",["$http","$parse","$q",function(a,e,f){function g(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function h(o,p,q){function r(a,b){var c={};return b=l({},p,b),k(b,function(b,d){n(b)&&(b=b());var f;b&&b.charAt&&"@"==b.charAt(0)?(f=b.substr(1),f=e(f)(a)):f=b,c[d]=f}),c}function s(a){return a.resource}function t(a){m(a||{},this)}var u=new g(o);return q=l({},i,q),k(q,function(e,g){var h=/^(POST|PUT|PATCH)$/i.test(e.method);t[g]=function(g,i,o,p){var q,v,w,x={};switch(arguments.length){case 4:w=p,v=o;case 3:case 2:if(!n(i)){x=g,q=i,v=o;break}if(n(g)){v=g,w=i;break}v=i,w=o;case 1:n(g)?v=g:h?q=g:x=g;break;case 0:break;default:throw d("badargs",arguments.length)}var y=q instanceof t,z=y?q:e.isArray?[]:new t(q),A={},B=e.interceptor&&e.interceptor.response||s,C=e.interceptor&&e.interceptor.responseError||c;return k(e,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(A[b]=m(a))}),h&&(A.data=q),u.setUrlParams(A,l({},r(q,e.params||{}),x),e.url),x=a(A).then(function(a){var c=a.data,f=z.$promise;if(c){if(b.isArray(c)!==!!e.isArray)throw d("badcfg",e.isArray?"array":"object",b.isArray(c)?"array":"object");e.isArray?(z.length=0,k(c,function(a){z.push(new t(a))})):(m(c,z),z.$promise=f)}return z.$resolved=!0,a.resource=z,a},function(a){return z.$resolved=!0,(w||j)(a),f.reject(a)}),x=x.then(function(a){var b=B(a);return(v||j)(b,a.headers),b},C),y?x:(z.$promise=x,z.$resolved=!1,z)},t.prototype["$"+g]=function(a,b,c){return n(a)&&(c=b,b=a,a={}),a=t[g](a,this,b,c),a.$promise||a}}),t.bind=function(a){return h(o,l({},p,a),q)},t}var i={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},j=b.noop,k=b.forEach,l=b.extend,m=b.copy,n=b.isFunction;return g.prototype={setUrlParams:function(a,c,e){var f,g,h=this,i=e||h.template,j=h.urlParams={};k(i.split(/\W/),function(a){if("hasOwnProperty"===a)throw d("badname");!/^\d+$/.test(a)&&a&&RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(i)&&(j[a]=!0)}),i=i.replace(/\\:/g,":"),c=c||{},k(h.urlParams,function(a,d){f=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(f)&&null!==f?(g=encodeURIComponent(f).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),i=i.replace(RegExp(":"+d+"(\\W|$)","g"),g+"$1")):i=i.replace(RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),i=i.replace(/\/+$/,""),i=i.replace(/\/\.(?=\w+($|\?))/,"."),a.url=i.replace(/\/\\\./,"/."),k(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},h}])}(window,window.angular),function(a,b){function c(a,c,d,e,f){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(g,h,i){return function(g,h,j){function k(){m&&(m.$destroy(),m=null),n&&(f.leave(n),n=null)}function l(){var j=a.current&&a.current.locals,l=j&&j.$template;if(l){var q=g.$new();i(q,function(i){i.html(l),f.enter(i,null,n||h,function(){!b.isDefined(o)||o&&!g.$eval(o)||c()}),k();var r=d(i.contents()),s=a.current;if(m=s.scope=q,n=i,s.controller){j.$scope=m;var t=e(s.controller,j);s.controllerAs&&(m[s.controllerAs]=t),i.data("$ngControllerController",t),i.children().data("$ngControllerController",t)}r(m),m.$emit("$viewContentLoaded"),m.$eval(p)})}else k()}var m,n,o=j.autoscroll,p=j.onload||"";g.$on("$routeChangeSuccess",l),l()}}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(){var a=m(),d=p.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!o?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(o=!1,c.$broadcast("$routeChangeStart",a,d),(p.current=a)&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(n(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==p.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==p.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function m(){var c,f;return b.forEach(d,function(d){var g;if(g=!f){var h=e.path();g=d.keys;var i={};if(d.regexp)if(h=d.regexp.exec(h)){for(var j=1,k=h.length;k>j;++j){var l=g[j-1],m="string"==typeof h[j]?decodeURIComponent(h[j]):h[j];l&&m&&(i[l.name]=m)}g=i}else g=null;else g=null;g=c=g}g&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function n(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var o=!1,p={routes:d,reload:function(){o=!0,c.$evalAsync(l)}};return c.$on("$locationChangeSuccess",l),p}]}),a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",c),c.$inject=["$route","$anchorScroll","$compile","$controller","$animate"]}(window,window.angular),function(a,b,c){function d(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function e(a,c){function d(a,d,g,h){if(d=b.lowercase(d),v[d])for(;r.last()&&w[r.last()];)e("",r.last());u[d]&&r.last()==d&&e("",d),(h=t[d]||!!h)||r.push(d);var i={};g.replace(l,function(a,b,c,d,e){i[b]=f(c||d||e||"")}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=r.length-1;f>=0&&r[f]!=d;f--);if(f>=0){for(e=r.length-1;e>=f;e--)c.end&&c.end(r[e]);r.length=f}}var g,h,r=[],s=a;for(r.last=function(){return r[r.length-1]};a;){if(h=!0,r.last()&&x[r.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+r.last()+"[^>]*>","i"),function(a,b){return b=b.replace(o,"$1").replace(q,"$1"),c.chars&&c.chars(f(b)),""}),e("",r.last())):(0===a.indexOf("<!--")?(g=a.indexOf("--",4),g>=0&&a.lastIndexOf("-->",g)===g&&(c.comment&&c.comment(a.substring(4,g)),a=a.substring(g+3),h=!1)):p.test(a)?(g=a.match(p))&&(a=a.replace(g[0],""),h=!1):n.test(a)?(g=a.match(k))&&(a=a.substring(g[0].length),g[0].replace(k,e),h=!1):m.test(a)&&(g=a.match(j))&&(a=a.substring(g[0].length),g[0].replace(j,d),h=!1),h&&(g=a.indexOf("<"),h=0>g?a:a.substring(0,g),a=0>g?"":a.substring(g),c.chars&&c.chars(f(h)))),a==s)throw i("badparse",a);s=a}e()}function f(a){return B.innerHTML=a.replace(/</g,"&lt;"),B.innerText||B.textContent||""}function g(a){return a.replace(/&/g,"&amp;").replace(s,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(a){var c=!1,d=b.bind(a,a.push);return{start:function(a,e,f){a=b.lowercase(a),!c&&x[a]&&(c=a),c||!0!==y[a]||(d("<"),d(a),b.forEach(e,function(a,c){var e=b.lowercase(c);!0!==A[e]||!0===z[e]&&!a.match(r)||(d(" "),d(c),d('="'),d(g(a)),d('"'))}),d(f?"/>":">"))},end:function(a){a=b.lowercase(a),c||!0!==y[a]||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(g(a))}}}var i=b.$$minErr("$sanitize"),j=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,k=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,n=/^<\s*\//,o=/\x3c!--(.*?)--\x3e/g,p=/<!DOCTYPE([^>]*?)>/i,q=/<!\[CDATA\[(.*?)]]\x3e/g,r=/^((ftp|https?):\/\/|mailto:|tel:|#)/i,s=/([^\#-~| |!])/g,t=d("area,br,col,hr,img,wbr");a=d("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c=d("rp,rt");var u=b.extend({},c,a),v=b.extend({},a,d("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),w=b.extend({},c,d("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=d("script,style"),y=b.extend({},t,v,w,u),z=d("background,cite,href,longdesc,src,usemap"),A=b.extend({},z,d("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),B=document.createElement("pre");b.module("ngSanitize",[]).value("$sanitize",function(a){var b=[];return e(a,h(b)),b.join("")}),b.module("ngSanitize").filter("linky",function(){var a=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,c=/^mailto:/;return function(d,e){if(!d)return d;var f,g,i,j=d,k=[],l=h(k),m={};for(b.isDefined(e)&&(m.target=e);f=j.match(a);)g=f[0],f[2]==f[3]&&(g="mailto:"+g),i=f.index,l.chars(j.substr(0,i)),m.href=g,l.start("a",m),l.chars(f[0].replace(c,"")),l.end("a"),j=j.substring(i+f[0].length);return l.chars(j),k.join("")}})}(window,window.angular),angular.module("fundoo.services",[]).factory("createDialog",["$document","$compile","$rootScope","$controller","$timeout",function(a,b,c,d,e){var f={id:null,template:null,templateUrl:null,title:"Default Title",backdrop:!0,success:{label:"OK",fn:null},cancel:{label:"Close",fn:null},controller:null,backdropClass:"modal-backdrop",footerTemplate:null,modalClass:"modal",css:{top:"100px",left:"30%",margin:"0 auto"}},g=a.find("body");return function(a,h,i){angular.isObject(a)?(i=h,h=a):h.templateUrl=a,h=angular.extend({},f,h);var j,k=h.id?' id="'+h.id+'" ':"",l='<button class="btn" ng-click="$modalCancel()">{{$modalCancelLabel}}</button><button class="btn btn-primary" ng-click="$modalSuccess()">{{$modalSuccessLabel}}</button>',m='<div class="modal-footer">'+(h.footerTemplate||l)+"</div>",n=function(){return h.template?angular.isString(h.template)?'<div class="modal-body">'+h.template+"</div>":'<div class="modal-body">'+h.template.html()+"</div>":'<div class="modal-body" ng-include="\''+h.templateUrl+"'\"></div>"}(),o=angular.element('<div class="'+h.modalClass+' fade"'+k+">"+'  <div class="modal-header">'+'    <button type="button" class="close" ng-click="$modalCancel()">&times;</button>'+"    <h2>{{$title}}</h2>"+"  </div>"+n+m+"</div>");for(j in h.css)o.css(j,h.css[j]);var p=angular.element('<div ng-click="$modalCancel()">');p.addClass(h.backdropClass),p.addClass("fade in");var q=function(a){27===a.keyCode&&u.$modalCancel()},r=function(){g.unbind("keydown",q),o.remove(),h.backdrop&&p.remove()};g.bind("keydown",q);var s,t,u=h.scope||c.$new();u.$title=h.title,u.$modalClose=r,u.$modalCancel=function(){var a=h.cancel.fn||r;a.call(this),u.$modalClose()},u.$modalSuccess=function(){var a=h.success.fn||r;a.call(this),u.$modalClose()},u.$modalSuccessLabel=h.success.label,u.$modalCancelLabel=h.cancel.label,h.controller&&(t=angular.extend({$scope:u},i),s=d(h.controller,t),o.contents().data("$ngControllerController",s)),b(o)(u),b(p)(u),g.append(o),h.backdrop&&g.append(p),e(function(){o.addClass("in")},200)}}]),angular.module("XSockets",[]).factory("xsocket",function(a,b){function c(a){g.on(a,function(c){b.$apply(function(){h[a].invoke(c)})})}function d(a,b){f||"undefined"==typeof g?g.trigger(a,b):i.push({t:a,d:b||{}})}function e(a){return h.hasOwnProperty(a)?h[a]:(h[a]=new j,c(a,h[a]),h[a])}var f,g,h={},i=[],j=function(){function a(a){this._a=a}return a.prototype.process=function(a){return this._a=a,this},a.prototype.invoke=function(a){return this._a(a),this},a}(),k=function(c){var d=a.defer();return g=new XSockets.WebSocket(c),g.on(XSockets.Events.open,function(a){b.$apply(function(){d.resolve(a)})}),d.promise};return k("ws://take65-v2.local.netbiis.com:4502/Chat").then(function(){f=!0,i.forEach(function(a){d(a.t,a.d)}),i=[]}),{isConnected:f,subscribe:e,publish:d}}),function(a,b){function c(a){return function(b){return b[a]}}var d=a.module("angular-underscore",[]),e=a.module("angular-underscore/utils",[]),f=a.module("angular-underscore/filters",[]);b._=b,b.each(["min","max","sortedIndex"],function(a){b[a]=b.wrap(b[a],function(a){var d=b.toArray(arguments).slice(1);return b.isString(d[2])?d[2]=c(d[2]):b.isString(d[1])&&(d[1]=c(d[1])),a.apply(b,d)})}),a.injector(["ng"]).invoke(["$filter",function(a){b.filter=b.select=b.wrap(a("filter"),function(a,c,d){return b.isArray(c)||(c=b.toArray(c)),a(c,d)}),b.reject=function(a,c){if(b.isString(c))return b.filter(a,"!"+c);var d=b.bind(b.difference,b,a);return d(b.filter(a,c))}}]),b.each(b.methods(b),function(c){function f(a){a[c]=b.bind(b[c],b)}b.each([d,e,a.module("angular-underscore/utils/"+c,[])],function(a){a.run(["$rootScope",f])})});var g=[["map","collect"],["reduce","inject","foldl"],["reduceRight","foldr"],["find","detect"],["filter","select"],"where","findWhere","reject","invoke","pluck","max","min","sortBy","groupBy","countBy","shuffle","toArray","size",["first","head","take"],"initial","last",["rest","tail","drop"],"compact","flatten","without","union","intersection","difference",["uniq","unique"],"zip","object","indexOf","lastIndexOf","sortedIndex","keys","values","pairs","invert",["functions","methods"],"pick","omit","tap","identity","uniqueId","escape","result","template"];b.each(g,function(c){b.isArray(c)||(c=[c]);var e=b.bind(b[c[0]],b),g=function(){return e};b.each(c,function(c){b.each([d,f,a.module("angular-underscore/filters/"+c,[])],function(a){a.filter(c,g)})})})}(angular,_);var blurFocusDirective=function(){return{restrict:"E",require:"?ngModel",link:function(a,b,c,d){d&&(b.on("focus",function(){b.addClass("has-focus"),a.$apply(function(){d.hasFocus=!0})}),b.on("blur",function(){b.removeClass("has-focus"),b.addClass("has-visited"),a.$apply(function(){d.hasFocus=!1,d.hasVisited=!0})}),b.closest("form").on("submit",function(){b.addClass("has-visited"),a.$apply(function(){d.hasFocus=!1,d.hasVisited=!0})}))}}},LoadBehaviorCaller=[];angular.module("App.directives",[]).directive("input",blurFocusDirective).directive("select",blurFocusDirective).directive("appVersion",["version",function(a){return function(b,c){c.text(a)}}]).directive("dashboxes",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$on("dataloaded",function(){a(function(){void 0==LoadBehaviorCaller["dataload-"+d.widget]&&(LoadBehaviorCaller["dataload-"+d.widget]=setTimeout(function(){NB.LoadBehavior(c)},700))},100,!1)})}}}]).directive("filterDash",["filter",function(){return{restrict:"A",controller:function(a,b,c){a.$on("handleBroadcast",function(){a.filter.key=c})}}}]).directive("loadbehavior",["$timeout",function(a){return{restrict:"A",link:function(b,c){b.$on("dataloaded",function(){a(function(){NB.LoadBehavior(c)},0,!1)})}}}]).directive("resizecolorbox",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$on("dataloaded",function(){a(function(){if("false"===d.resizecolorbox)$.colorbox.resize();else{var a=c.innerWidth()>0?{width:c.innerWidth()+10}:{};$.colorbox.resize(a)}},200,!1)})}}}]).directive("ngopenpop",["$http","$compile","$parse","$rootScope","$timeout",function(a,b,c,d,e){return{restrict:"A",link:function(c,f,g){f.off("click.ngopenpop").on("click.ngopenpop",function(){void 0!=d.widgets&&(d.widgets.attrsClick=g),document.body.scrollTop=document.documentElement.scrollTop=0,a.get(g.ngopenpop+"?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(a){$("#modalSliderAjax").html(b(a)(c)),c.$watch("$compile",function(){e(function(){NB.LoadBehavior($("#modalSliderAjax")),$.colorbox.resize()},10,!1)})}).error(function(){})})}}}]).directive("nglogged",[function(){return{restrict:"A",link:function(a){a.$watch("reloadHome",function(){a.reloadHome&&(window.location.href="/")})}}}]).directive("alignboxes",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$on("dataloaded",function(){a(function(){var a=c.find(d.alignboxes),b=0;a.height("auto").each(function(){var a=$(this).height();0===a&&(a=$(this).find("label").height()),a>b&&(b=a)}),a.height(b)},200,!1)})}}}]).directive("checkUrl",[function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=/((ftp|http|https):\/\/)/;b.on({blur:function(){f($(this))},"keydown keypress":function(){try{13===event.which&&f($(this))}catch(a){}}});var f=function(b){var c=b.val();""===c||e.test(c)||(b.val("http://"+c),a.$apply(function(){d.$setViewValue("http://"+c)}))}}}}}]).directive("loading",[function(){return{restrict:"A",replace:!0,templateUrl:"/Templates/Load.html",link:function(a,b){var c=b.parent();c.css("position")||c.addClass("pos-relative"),a.$on("dataloaded",function(){var a=b.parent(),c=a.css("position")||"static";"static"===c&&a.addClass("pos-relative")})}}}]).directive("ngEnter",[function(){return{restrict:"A",link:function(a,b,c){b.find("input, textarea, select").bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}}]).directive("colorboxClose",[function(){return{restrict:"A",link:function(a,b){b.on("click",function(a){a.preventDefault(),$.colorbox.close()})}}}]).directive("closeColorbox",[function(){return{restrict:"A",link:function(a){a.$on("closeColorbox",function(){$.colorbox.close()})}}}]).directive("ngTarget",["$rootScope","$timeout",function(a){return{restrict:"A",link:function(b,c){c.on("click.blank",".openIframe",function(){$(window),void 0==a.currentExternalWindows&&(a.currentExternalWindows=[]);var b,c=navigator.userAgent.toLowerCase();b=-1!=c.indexOf("msie")?window.screenY+480:window.screenY+180;var d=window.open($(this).attr("href"),"","menubar=yes,toolbar=yes,scrollbars=yes,width="+window.innerWidth+",height="+.75*window.innerHeight+",top="+b+",left="+window.screenX,"");return a.currentExternalWindows.push(d),waitUser(),!1})}}}]).directive("currentTime",["$timeout",function(a){return{restrict:"A",link:function(b){var c=a(function d(){b.currentTime=moment().format("dddd, MMMM D, YYYY h:mm A"),c=a(d,3e4)},0,!1)}}}]).directive("pwCheck",[function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.pwCheck;b.add(e).on("keyup",function(){a.$apply(function(){d.$setValidity("pwmatch",b.val()===$(e).val())})})}}}]).directive("passwordMatch",function(){return{require:"ngModel",restrict:"A",scope:!0,link:function(a,b,c,d){var e=function(){var b=a.$eval(c.ngModel),d=a.$eval(c.passwordMatch);return b==d};a.$watch(e,function(a){d.$setValidity("passwordMatch",a)})}}}).directive("ensureUniqueEmail",["$http",function(a){return{strict:"A",require:"ngModel",scope:{unique:"=unique",requiredEmail:"="},link:function(b,c,d,e){b.unique={},e.$setValidity("unique",!0),""!==e.$modelValue&&a.post("/REST/User/Check",{email:e.$modelValue}).success(function(a){b.unique.status=a.status,a.status?e.$setValidity("unique",!0):e.$setValidity("unique",!1)}).error(function(a){b.unique=a,e.$setValidity("unique",!1)}),c.on({blur:function(){return e&&c.val()?e.$modelValue&&e.$pristine?(b.unique={response:"",status:!0},e.$setValidity("unique",!0),void 0):(e.$error.required||e.$error.$email?e.$setValidity("unique",!1):(b.unique={response:"Verifying email...",status:!0},$.colorbox.resize(),b.model=e.$modelValue,a.post("/REST/User/Check",{email:e.$modelValue}).success(function(a){b.unique.status=a.status,a.status?"SAME"==a.response?(e.$setValidity("unique",!0),b.unique.response=""):(e.$setValidity("unique",!0),b.unique.response="Email available"):(e.$setValidity("unique",!1),b.unique.response="Email already registered"),$.colorbox.resize()}).error(function(a){b.unique=a,e.$setValidity("unique",!1)})),void 0):void 0},focus:function(){b.unique&&(b.unique.response="")}})}}}]).directive("ngEqual",["$http",function(){return{require:"ngModel",scope:{inputEqual:"=inputEqual"},link:function(a,b,c,d){d.$setValidity("equal",!1),b.on("blur keydown keyup",function(){e()});var e=function(){d.$modelValue!==a.inputEqual?d.$setValidity("equal",!1):d.$setValidity("equal",!0)}}}}]).directive("colorboxCloseReload",[function(){return{restrict:"A",link:function(){$(document).on("cbox_closed",function(){window.location.href="/"})}}}]).directive("colorboxCloseClean",["$rootScope",function(a){return{restrict:"A",link:function(b,c,d){$(document).on("cbox_closed.clean",function(){a[d.colorboxCloseClean]=void 0,$(this).off("cbox_closed.clean")})}}}]).directive("animateTab",[function(){return{restrict:"A",link:function(a,b,c){var d=$(c.elAnimate),e={};e.open=function(){d.removeClass("close")},e.close=function(){d.addClass("close")},b.on("click",function(a){a.preventDefault(),d.hasClass("close")?e.open():e.close()}),$(".wrap, footer.main").on("click",function(a){void 0!=a.target&&void 0!=a.target.attributes["class"]&&"icon icon-remove-red"==a.target.attributes["class"].nodeValue?a.stopPropagation():e.close()}).on("click",".aside-box",function(a){a.stopPropagation()})}}}]).directive("placeholder",function(a){return!$.browser.msie||$.browser.version>=10?{}:{link:function(b,c,d){return"password"===d.type?(c.attr("placeholder",""),void 0):(a(function(){(""==c.val()||null==c.val())&&c.val(d.placeholder).focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))})}),void 0)}}}).directive("ngRepeatFinished",function(a){return{restrict:"A",link:function(b){b.$last===!0&&a(function(){b.$emit("ngRepeatFinished")
})}}}).directive("ngCarousel",["$compile",function(){return{restrict:"A",link:function(a,b){a.$on("callCarousel",function(){a.$watch("$compile",function(){b.bxSlider({slideWidth:280,pager:!1,minSlides:2,maxSlides:3,moveSlides:1,slideMargin:14,infiniteLoop:!1,hideControlOnEnd:!0}),$(".bx-prev").addClass("icon-arrow-left-blue"),$(".bx-next").addClass("icon-arrow-right-blue")})}),a.$on("callCarouselFbPhoto",function(){a.$watch("$compile",function(){b.cycle()})}),a.$on("callCarouselFbPhotoDetail",function(){a.$watch("$compile",function(){b.bxSlider({pager:!1,infiniteLoop:!1,hideControlOnEnd:!0}),$(".bx-prev").addClass("icon-arrow-left-blue"),$(".bx-next").addClass("icon-arrow-right-blue")})})}}}]);var replaceString=function(a,b){return a.replace(/\{{(\w+)\}}/g,function(a,c){return b[c]||a})},calcRealBox=function(a){var b={height:a.outerHeight()+parseInt(a.css("margin-top"),10)+parseInt(a.css("margin-bottom"),10)+parseInt(a.css("border-top-width"),10)+parseInt(a.css("border-bottom-width"),10),widht:a.outerWidth()+parseInt(a.css("margin-left"),10)+parseInt(a.css("margin-right"),10)+parseInt(a.css("border-left-width"),10)+parseInt(a.css("border-right-width"),10)};return"none"!==a.css("display")?b:{height:0,width:0}},scrollToLeft=function(a,b){a.stop(!0,!1).animate({scrollLeft:b},500)},datediff=function(a,b,c){var d=1e3,e=60*d,f=60*e,g=24*f,h=7*g;a=new Date(a),b=new Date(b);var i=b-a;if(isNaN(i))return 0/0;switch(c){case"years":return b.getFullYear()-a.getFullYear();case"months":return 12*b.getFullYear()+b.getMonth()-(12*a.getFullYear()+a.getMonth());case"weeks":return Math.floor(i/h);case"days":return Math.floor(i/g);case"hours":return Math.floor(i/f);case"minutes":return Math.floor(i/e);case"seconds":return Math.floor(i/d);default:return void 0}},convertTime=function(a){var b=parseInt(a,10),c=Math.floor(b/3600),d=Math.round((b-3600*c)/60),e=b-3600*c-60*d;10>c&&(c="0"+c),10>d&&(d="0"+d),10>e&&(e="0"+e);var f;return f="00"!=c?c+"h ":"",f+="00"!=d?d+"min":""},converHourToSec=function(a){var b=a.split(":"),c=60*60*+b[0]+60*+b[1]+ +b[2];return c},converToDate=function(a){var b=new Date;return b.setTime(1e3*a),b},triggerClick=function(a){$(function(){$(a).trigger("click")})},add=function(){""===$(this).val()&&$(this).val($(this).attr("placeholder")).addClass("placeholder")},remove=function(){$(this).val()===$(this).attr("placeholder")&&$(this).val("").removeClass("placeholder")},placeHolder=function(){"placeholder"in $("<input>")[0]||($("input[placeholder], textarea[placeholder]").not("input[type=password]").blur(add).focus(remove).each(add),$("form").submit(function(){$(this).find("input[placeholder], textarea[placeholder]").not("input[type=password]").each(remove)})),$("form").find("input[type=password][placeholder]").each(function(a){var b=$(this),c=b.attr("placeholder"),d="placeholder"+a,e=$("<label class='placeholder show' id='"+d+"'>"+c+"</label>");""!==c&&(b.before(e).addClass(d).css({position:"relative",zIndex:1}).on({"focus setVal":function(){e.hide().removeClass("show")},"blur removeVal":function(){e.hasClass("show")||""!==b.val()||e.show().addClass("show")}}),e.height()<1&&e.height(17),e.css({color:b.css("color"),marginTop:parseInt(b.height()-e.height(),10)/2,marginLeft:b.css("padding-left"),fontSize:b.css("font-size"),height:e.height(),left:0,position:"absolute",overflow:"hidden",cursor:"text",zIndex:3}).data({width:e.width()}).on("click",function(){b.focus()}),""!==b.val()&&e.css({width:0}).removeClass("show"))})},clickHash=function(){var a=window.location.hash;if("undefined"!=typeof a){var b=$(a);b.length>0&&b.trigger("click")}},waitUser=function(){$(".take-me-home").hasClass("hide")&&($(".take-me-home").removeClass("hide"),$(".take-me-home-background").removeClass("hide"))};$(function(){Modernizr.placeholder||placeHolder(),document.onreadystatechange=function(){"complete"==document.readyState&&clickHash()}});var NB=window.NB||{};NB.Behaviors={},NB.Lang={},NB.Breakpoints={small:767,large:768},NB.searchGoogle=!1;var instantFn=function(a){var b=$(a),c=b.attr("data-fn");$.each(c.split(" "),function(c,d){try{var e=NB.Behaviors[d],f=new e(b);b.data("inst"+d,f)}catch(g){console.log(a),console.log("Erro",g)}})};NB.LoadBehavior=function(a){void 0===a&&(a=$(document)),"undefined"!=typeof a.data("fn")&&instantFn(a),a.find("*[data-fn]").each(function(){instantFn(this)})},NB.instant=function(a,b){try{var c=NB.Behaviors[b],d=new c(a);a.data("inst"+b,d)}catch(e){console.log(this),console.log("Erro",e)}},NB.onReady=function(){NB.LoadBehavior(),$.browser.msie&&$("html").addClass("ie"+$.browser.version),Modernizr.placeholder||$("input, textarea").placeholder()};var ie=!1;$(document).ready(function(){NB.onReady()}),NB.Behaviors.colorbox=function(a){var b=a.data("param")||{},c=this;b.loadingIco=b.loadingIco||"white",b.type=b.type||"inline",b.onComplete=b.onComplete||function(){},this.init=function(){this.colorbox()},this.colorbox=function(){$.colorbox.settings.close=NB.Lang.Close,b.close=b.close||NB.Lang.Close,b.closeButton=void 0!==typeof b.closeButton?b.closeButton:!0,b.allowClose=void 0!==typeof b.allowClose?b.allowClose:!0,b.width=b.width||"auto",b.height=b.height||"auto",b.className=b.className||"box-white",b.action=b.action||!1,b.resizeBoxLightbox=b.resizeBoxLightbox||!1,a.on("click",function(){"close"===b.action&&$.colorbox.close()}),c[b.type]()},this.simple=function(){var c="<h2>"+b.title+"</h2>"+b.content;a.colorbox({html:c,width:b.width,height:b.height,className:b.className,loadingIco:b.loadingIco,close:b.close,opacity:.8,onComplete:function(){$.colorbox.resize(),NB.LoadBehavior($("#colorbox")),b.onComplete()}})},this.inline=function(){a.off("click.colorbox").on("click.colorbox",function(c){c.preventDefault(),$.colorbox({inline:!0,className:b.className,href:b.href||a.attr("href"),closeButton:b.closeButton,escKey:b.allowClose,overlayClose:b.allowClose,height:b.height,width:b.width,close:b.close,opacity:.8,scrolling:!1,scrollTop:!0,onComplete:function(){b.onComplete()}})})},this.iframe=function(){a.off("click.colorbox").on("click.colorbox",function(c){c.preventDefault(),a.hasClass("openIframe")||(document.body.scrollTop=document.documentElement.scrollTop=0,$.colorbox({iframe:!0,className:b.className,height:b.height,width:b.width,href:b.href||$(this).attr("href"),close:b.close,closeButton:b.closeButton,opacity:.8,onComplete:function(){("auto"==b.height||"auto"==b.width)&&$.colorbox.resize(),NB.LoadBehavior($("#colorbox")),b.onComplete()}}))})},this.ajax=function(){a.colorbox({className:b.className,height:b.height,width:b.width,close:b.close,closeButton:b.closeButton,opacity:.8,onComplete:function(){NB.LoadBehavior($("#colorbox")),b.onComplete(),b.resizeBoxLightbox&&$.colorbox.resize({width:$("#colorbox").find(".box-lightbox").outerWidth()+10})}})},this.param=b,c.init()},NB.Behaviors.colorbox.param="title, content",NB.Behaviors.formValidation=function(a){var b=this.param=a.data("param")||{},c=this;this.init=function(){a.data("formvalid",!1).find('[data-valid="submit"]').on("click",function(){var c=!0,d=[],e=$(this);if(a.find('[data-valid][data-valid!="submit"]').each(function(){var b,e=$(this),f=e.validform({parent:!0,errorClass:"error"}).data("plugin_validform");if(b="equal"===e.data("valid")?f[e.data("valid")](a.find('[data-group="'+e.data("group")+'"]').not(e)):"checked"===e.data("valid")?f[e.data("valid")](a.find('[data-group="'+e.data("group")+'"]')):f[e.data("valid")](),!b){c=!1;var g=e.data("elem")||"";f.invalid(g),"undefined"!=typeof e.data("name")&&-1===$.inArray(e.data("name"),d)&&d.push(e.data("name"))}}),"undefined"!=typeof b.error&&!c){var f="",g="";if("undefined"!=typeof b.msgtype&&"summary"==b.msgtype){f="<ul>";for(g in d)f+="<li>"+d[g]+"</li>";f+="</ul>",a.find(b.error).html(f).fadeIn(400)}else{f="Please fill out the required fields: ";for(g in d)f+=d[g]+", ";f=f.substring(0,f.length-2)+".",a.find(b.error).text(f).fadeIn(400)}}return a.data("formvalid",c),c&&e.data("trigger")&&e.trigger(e.data("trigger")),b.colorbox&&$.colorbox.resize(),c})},c.init()},NB.Behaviors.formValidation.version="0.1",NB.Behaviors.menu=function(a){a.data("param")||{};var b=this;this.miniMenu=$("#miniMenu"),this.init=function(){a.find("#openMenu").on("click",function(a){a.preventDefault(),b.openMenu()}),$("#closeMenu").on("click",function(a){a.preventDefault(),b.closeMenu()}),$("#searchOpen").on("click",function(a){a.preventDefault(),$("section.search").slideToggle(500,function(){$(window).trigger("resize")})}),$("body").on("openpop",function(){b.closeMenu()})},this.openMenu=function(){var a=$(".main-links");b.miniMenu.css("top",a.offset().top+a.outerHeight()).fadeIn(800).animate({right:0},{queue:!1,duration:500})},this.closeMenu=function(){b.miniMenu.fadeOut(500).animate({right:"-100%"},{queue:!1,duration:800})},b.init()},NB.Behaviors.menu.param="",NB.Behaviors.openPop=function(a){a.data("param")||{};var b=this;this.init=function(){$(window).width()<=NB.Breakpoints.small?this.callSlider():$(window).width()<=NB.Breakpoints.large?this.callSlider():this.callColorbox()},this.callColorbox=function(){"undefined"!=typeof a.data("callColorbox")&&a.data("callColorbox")||($("#cboxOverlay").height($(".wrap").height()),a.data("callSlider",!1).data("callColorbox",!0).off("click",b.openSlider),$("body").trigger("removeSlider"),NB.instant(a,"colorbox"),$(document).off("cbox_closed.openpop").on("cbox_closed.openpop",function(){$("#modalSliderAjax").empty()}))},this.callSlider=function(){a.colorbox.close(),a.colorbox.remove(),a.off("click.colorbox"),"undefined"!=typeof a.data("callSlider")&&a.data("callSlider")||(a.removeData("instcolorbox").data("callColorbox",!1),a.data("callSlider",!0).on("click",b.openSlider))},this.openSlider=function(b){b.preventDefault(),$(a).hasClass("openIframe")||(NB.instant(a,"openSlider"),$("body").trigger("openpop"))},$(window).on("resize",function(){b.init()}),b.init()},NB.Behaviors.openPop.param="",$("html, body").css({overflow:"auto",height:"auto",width:"auto"}),NB.Behaviors.openSlider=function(a){var b=a.data("param")||{},c=this,d=$("#modalSlider"),e=d.find("#modalSliderAjax"),f=$("html, body");this.init=function(){c.openSlider(),f.on({removeSlider:function(){c.closeSlider()},resizeModalBox:function(){c.resizeModal()}}),d.find("#closeModal").on("click",function(a){a.preventDefault(),c.closeSlider()}),$(window).on("resize.openSlider",function(){c.resizeModal()})},this.getAjax=function(){"iframe"===b.type&&e.html('<iframe frameborder="0" src="'+a.attr("href")+'" class="cboxIframe" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>')},this.openSlider=function(){c.removeScrollPage(),setTimeout(function(){try{window.scrollTo(0)}catch(a){}document.body.scrollTop=document.documentElement.scrollTop=0,f.css({display:"none"}),d.show(),e.height("100%"),c.getAjax(),f.css({display:"block"})},100)},this.closeSlider=function(){d.hide().removeAttr("style"),e.html("").removeAttr("style"),c.returnScrollPage(),$(window).off("resize.openSlider"),f.off("removeSlider resizeModalBox")},this.resizeModal=function(){d.stop(!0,!0).css("height",NB.window.sizes.height),e.height(d.height()-d.find("#closeModal").height())},this.removeScrollPage=function(){f.css({overflow:"hidden",height:"100%",width:"100%"})},this.returnScrollPage=function(){f.css({overflow:"auto",height:"auto",width:"auto"})},c.init()},NB.Behaviors.openSlider.param="",NB.Behaviors.placeholder=function(a){a.data("param")||{};var b=this;this.init=function(){Modernizr.placeholder||$("input, textarea").placeholder()},b.init()},NB.Behaviors.placeholder.param="",NB.Behaviors.resizeLetter=function(a){var b=a.data("param")||{},c=this;b.coeff=b.coeff||1,this.init=function(){return"undefined"!=typeof a.data("sizes")?!1:(a.data({sizes:{min:a.css("font-size"),max:2,actual:0}}).find(b.plus).on("click",function(c){return c.preventDefault(),a.data("sizes").actual===a.data("sizes").max?!1:(a.data("sizes").actual++,a.css("font-size","+="+b.coeff),$("body").trigger("realignBoxes"),void 0)}).end().find(b.minus).on("click",function(c){c.preventDefault(),parseInt(a.data("sizes").min)<parseInt(a.css("font-size"))?(a.css("font-size","-="+b.coeff),a.data("sizes").actual--):(a.css("font-size",a.data("sizes").min),a.data("sizes").actual=0),$("body").trigger("realignBoxes")}),void 0)},c.init()},NB.Behaviors.resizeLetter.param="",NB.Behaviors.styleForms=function(a){a.data("param")||{},$.browser.msie&&$.browser.version<8?this.reinitForm=function(){}:(this.reinitForm=function(){styleForm.reformSelect(a)},"undefined"!==window.styleForm&&styleForm.init(a))},NB.Behaviors.styleForms.version="0.1",angular.module("App.services",[]).value("version","0.1").factory("filterDash",function(a){var b={};return b.key="",b.prepForBroadcast=function(a){this.key=a,this.broadcastItem()},b.broadcastItem=function(){a.$broadcast("handleBroadcast")},b});var hello=function(a){return hello.use(a)};hello.utils={extend:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){var d=b[c];if(a instanceof Object&&d instanceof Object&&a!==d)for(var e in d)a[e]=hello.utils.extend(a[e],d[e]);else a=d}return a}},hello.utils.extend(hello,{settings:{redirect_uri:window.location.href.split("#")[0]+"redirect.html",response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:!0},service:function(a){return"undefined"!=typeof a?this.utils.store("sync_service",a):this.utils.store("sync_service")},services:{},use:function(a){var b=this.utils.objectCreate(this);return b.settings=this.utils.objectCreate(this.settings),a&&(b.settings.default_service=a),b.utils.Event.call(b),b},init:function(a,b){var c=this.utils;if(!a)return this.services;for(var d in a)a.hasOwnProperty(d)&&"object"!=typeof a[d]&&(a[d]={id:a[d]});c.extend(this.services,a);for(d in this.services)this.services.hasOwnProperty(d)&&(this.services[d].scope=this.services[d].scope||{});return b&&(c.extend(this.settings,b),"redirect_uri"in b&&(this.settings.redirect_uri=c.url(b.redirect_uri).href)),this},login:function(){var a=this.use(),b=a.utils,c=b.args({network:"s",options:"o",callback:"f"},arguments);a.args=c;var d,e=c.options=b.merge(a.settings,c.options||{});if(c.network=a.settings.default_service=c.network||a.settings.default_service,a.on("complete",c.callback),"string"!=typeof c.network||!(c.network in a.services))return a.emitAfter("error complete",{error:{code:"invalid_network",message:"The provided network was not recognized"}}),a;var f=a.services[c.network],g=!1,h=b.globalEvent(function(c){var d;c?(d=JSON.parse(c),hello.utils.store(d.network,d)):d={error:{code:"cancelled",message:"The authentication was not completed"}},g=!0,d.error?a.emit("complete error failed auth.failed",{error:d.error}):(b.store(d.network,d),a.emit("complete success login auth.login auth",{network:d.network,authResponse:d}))}),i=b.url(e.redirect_uri).href;c.qs={client_id:f.id,response_type:f.oauth.response_type||e.response_type,redirect_uri:i,display:e.display,scope:"basic",state:{client_id:f.id,network:c.network,display:e.display,callback:h,state:e.state,redirect_uri:i,oauth_proxy:e.oauth_proxy}};var j=b.store(c.network),k=(e.scope||"").toString();if(k=(k?k+",":"")+c.qs.scope,j&&"scope"in j&&j.scope instanceof String&&(k+=","+j.scope),c.qs.state.scope=hello.utils.unique(k.split(/[,\s]+/)).join(","),c.qs.scope=k.replace(/[^,\s]+/gi,function(b){if(b in f.scope)return f.scope[b];for(var c in a.services){var d=a.services[c].scope;if(d&&b in d)return""}return b}).replace(/[,\s]+/gi,","),c.qs.scope=b.unique(c.qs.scope.split(/,+/)).join(f.scope_delim||","),e.force===!1&&j&&"access_token"in j&&j.access_token&&"expires"in j&&j.expires>(new Date).getTime()/1e3){var l=b.diff(j.scope||[],c.qs.state.scope||[]);if(0===l.length)return a.emit("notice","User already has a valid access_token"),a.emitAfter("complete success login",{network:c.network,authResponse:j}),a}if(c.qs.state.oauth=f.oauth,c.qs.state=JSON.stringify(c.qs.state),"login"in f&&"function"==typeof f.login&&f.login(c),1===parseInt(f.oauth.version,10)?d=b.qs(e.oauth_proxy,c.qs):"none"===e.display&&f.oauth.grant&&j&&j.refresh_token?(c.qs.refresh_token=j.refresh_token,d=b.qs(e.oauth_proxy,c.qs)):d=b.qs(f.oauth.auth,c.qs),a.emit("notice","Authorization URL "+d),"none"===e.display)b.iframe(d);else if("popup"===e.display)var m=hello.utils.popup(d,i,e.window_width||800,e.window_height||900),n=setInterval(function(){if((!m||m.closed)&&(clearInterval(n),!g)){var b={code:"cancelled",message:"Login has been cancelled"};m||(b={code:"blocked",message:"Popup was blocked"}),a.emit("complete failed error",{error:b,network:c.network})}},100);else window.location=d;return a},logout:function(){var a=this.use(),b=a.utils,c=b.args({name:"s",options:"o",callback:"f"},arguments);if(c.options=c.options||{},a.on("complete",c.callback),c.name=c.name||a.settings.default_service,!c.name||c.name in a.services)if(c.name&&b.store(c.name)){var d=function(b){a.utils.store(c.name,""),a.emitAfter("complete logout success auth.logout auth",hello.utils.merge({network:c.name},b||{}))},e={};if(c.options.force){var f=a.services[c.name].logout;if(f)if("function"==typeof f&&(f=f(d)),"string"==typeof f)b.iframe(f),e.force=null,e.message="Logout success on providers site was indeterminate";else if(void 0===f)return a}d(e)}else if(c.name)a.emitAfter("complete error",{error:{code:"invalid_session",message:"There was no session to remove"}});else{for(var g in a.services)a.services.hasOwnProperty(g)&&a.logout(g);a.service(!1)}else a.emitAfter("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}});return a},getAuthResponse:function(a){return a=a||this.settings.default_service,a&&a in this.services?this.utils.store(a)||null:(this.emit("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),null)},events:{}}),hello.utils.extend(hello.utils,{qs:function(a,b){if(b){var c;for(var d in b)if(a.indexOf(d)>-1){var e="[\\?\\&]"+d+"=[^\\&]*";c=new RegExp(e),a=a.replace(c,"")}}return a+(this.isEmpty(b)?"":(a.indexOf("?")>-1?"&":"?")+this.param(b))},param:function(a){var b,c,d={};if("string"==typeof a){if(c=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var e=0;e<c.length;e++)b=c[e].match(/([^=]+)=(.*)/),d[b[1]]=decodeURIComponent(b[2]);return d}var f=a;d=[];for(var g in f)f.hasOwnProperty(g)&&f.hasOwnProperty(g)&&d.push([g,"?"===f[g]?"?":encodeURIComponent(f[g])].join("="));return d.join("&")},store:function(a){var b=[a,window.sessionStorage],c=0;for(a=b[c++];a;)try{a.setItem(c,c),a.removeItem(c);break}catch(d){a=b[c++]}return a||(a={getItem:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].replace(/(^\s+|\s+$)/,"");if(d&&0===d.indexOf(a))return d.substr(a.length)}return null},setItem:function(a,b){document.cookie=a+"="+b}}),function(b,c){var d=JSON.parse(a.getItem("hello"))||{};if(b&&void 0===c)return d[b]||null;if(b&&null===c)try{delete d[b]}catch(e){d[b]=null}else{if(!b)return d;d[b]=c}return a.setItem("hello",JSON.stringify(d)),d||null}}(window.localStorage),append:function(a,b,c){var d="string"==typeof a?document.createElement(a):a;if("object"==typeof b)if("tagName"in b)c=b;else for(var e in b)if(b.hasOwnProperty(e))if("object"==typeof b[e])for(var f in b[e])b[e].hasOwnProperty(f)&&(d[e][f]=b[e][f]);else"html"===e?d.innerHTML=b[e]:/^on/.test(e)?d[e]=b[e]:d.setAttribute(e,b[e]);return"body"===c?!function g(){document.body?document.body.appendChild(d):setTimeout(g,16)}():"object"==typeof c?c.appendChild(d):"string"==typeof c&&document.getElementsByTagName(c)[0].appendChild(d),d},iframe:function(a){this.append("iframe",{src:a,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var a=Array.prototype.slice.call(arguments);return a.unshift({}),this.extend.apply(null,a)},args:function(a,b){var c={},d=0,e=null,f=null;for(f in a)if(a.hasOwnProperty(f))break;if(1===b.length&&"object"==typeof b[0]&&"o!"!=a[f])for(f in b[0])if(a.hasOwnProperty(f)&&f in a)return b[0];for(f in a)if(a.hasOwnProperty(f))if(e=typeof b[d],"function"==typeof a[f]&&a[f].test(b[d])||"string"==typeof a[f]&&(a[f].indexOf("s")>-1&&"string"===e||a[f].indexOf("o")>-1&&"object"===e||a[f].indexOf("i")>-1&&"number"===e||a[f].indexOf("a")>-1&&"object"===e||a[f].indexOf("f")>-1&&"function"===e))c[f]=b[d++];else if("string"==typeof a[f]&&a[f].indexOf("!")>-1)return!1;return c},url:function(a){if(a){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(a,window.location);var b=document.createElement("a");return b.href=a,b}return window.location},diff:function(a,b){for(var c=[],d=0;d<b.length;d++)-1===this.indexOf(a,b[d])&&c.push(b[d]);return c},indexOf:function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},unique:function(a){if("object"!=typeof a)return[];for(var b=[],c=0;c<a.length;c++)a[c]&&0!==a[c].length&&-1===this.indexOf(b,a[c])&&b.push(a[c]);return b},isEmpty:function(a){if(!a)return!0;if(a&&a.length>0)return!1;if(a&&0===a.length)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},objectCreate:function(){function a(){}return Object.create?Object.create:function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}(),Event:function(){var a=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(b,c){if(c&&"function"==typeof c)for(var d=b.split(a),e=0;e<d.length;e++)this.events[d[e]]=[c].concat(this.events[d[e]]||[]);return this},this.off=function(a,b){return this.findEvents(a,function(a,c){b&&this.events[a][c]!==b||(this.events[a][c]=null)}),this},this.emit=function(a){var b=Array.prototype.slice.call(arguments,1);b.push(a);for(var c=function(c,d){b[b.length-1]="*"===c?a:c,this.events[c][d].apply(this,b)},d=this;d&&d.findEvents;)d.findEvents(a+",*",c),d=d.parent;return this},this.emitAfter=function(){var a=this,b=arguments;return setTimeout(function(){a.emit.apply(a,b)},0),this},this.findEvents=function(b,c){var d=b.split(a);for(var e in this.events)if(this.events.hasOwnProperty(e)&&hello.utils.indexOf(d,e)>-1)for(var f=0;f<this.events[e].length;f++)this.events[e][f]&&c.call(this,e,f)},this},globalEvent:function(a,b){return b=b||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[b]=function(){try{bool=a.apply(this,arguments)}catch(c){console.error(c)}if(bool)try{delete window[b]}catch(c){}},b},popup:function(a,b,c,d){var e=document.documentElement,f=void 0!==window.screenLeft?window.screenLeft:screen.left,g=void 0!==window.screenTop?window.screenTop:screen.top,h=window.innerWidth||e.clientWidth||screen.width,i=window.innerHeight||e.clientHeight||screen.height,j=(h-c)/2+f,k=(i-d)/2+g,l=function(a){var e=window.open(a,"_blank","resizeable=true,height="+d+",width="+c+",left="+j+",top="+k);if(e&&e.addEventListener){var f=hello.utils.url(b),g=f.origin||f.protocol+"//"+f.hostname;e.addEventListener("loadstart",function(a){var b=a.url;if(0===b.indexOf(g)){var c=hello.utils.url(b),d={location:{assign:function(a){e.addEventListener("exit",function(){setTimeout(function(){l(a)},1e3)})},search:c.search,hash:c.hash,href:c.href},close:function(){e.close&&e.close()}};hello.utils.responseHandler(d,window),d.close()}})}return e&&e.focus&&e.focus(),e};return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(a=b+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(a))),l(a)},responseHandler:function(a,b){function c(a,b,c){if(f.store(a.network,a),!("display"in a&&"page"===a.display)){if(c){var e=a.callback;try{delete a.callback}catch(g){}if(f.store(a.network,a),e in c){var h=JSON.stringify(a);try{c[e](h)}catch(g){}}}d()}}function d(){try{a.close()}catch(b){}a.addEventListener&&a.addEventListener("load",function(){a.close()})}var e,f=this,g=a.location,h=function(b){g.assign?g.assign(b):a.location=b};if(e=f.param(g.search),e&&(e.code&&e.state||e.oauth_token&&e.proxy_url)){var i=JSON.parse(e.state);e.redirect_uri=i.redirect_uri||g.href.replace(/[\?\#].*$/,"");var j=(i.oauth_proxy||e.proxy_url)+"?"+f.param(e);return void h(j)}if(e=f.merge(f.param(g.search||""),f.param(g.hash||"")),e&&"state"in e){try{var k=JSON.parse(e.state);f.extend(e,k)}catch(l){console.error("Could not decode state parameter")}if("access_token"in e&&e.access_token&&e.network)e.expires_in&&0!==parseInt(e.expires_in,10)||(e.expires_in=0),e.expires_in=parseInt(e.expires_in,10),e.expires=(new Date).getTime()/1e3+(e.expires_in||31536e3),c(e,a,b);else if("error"in e&&e.error&&e.network)e.error={code:e.error,message:e.error_message||e.error_description},c(e,a,b);else if(e.callback&&e.callback in b){var m="result"in e&&e.result?JSON.parse(e.result):!1;b[e.callback](m),d()}}else if("oauth_redirect"in e)return void h(decodeURIComponent(e.oauth_redirect))}}),hello.utils.Event.call(hello),hello.subscribe=hello.on,hello.trigger=hello.emit,hello.unsubscribe=hello.off,hello.utils.responseHandler(window,window.opener||window.parent),function(a){var b={},c={};a.on("auth.login, auth.logout",function(c){c&&"object"==typeof c&&c.network&&(b[c.network]=a.utils.store(c.network)||{})}),function d(){var e=(new Date).getTime()/1e3,f=function(b){a.emit("auth."+b,{network:g,authResponse:h})};for(var g in a.services)if(a.services.hasOwnProperty(g)){if(!a.services[g].id)continue;var h=a.utils.store(g)||{},i=a.services[g],j=b[g]||{};if(h&&"callback"in h){var k=h.callback;try{delete h.callback}catch(l){}a.utils.store(g,h);try{window[k](h)}catch(l){}}if(h&&"expires"in h&&h.expires<e){var m=i.refresh||h.refresh_token;!m||g in c&&!(c[g]<e)?m||g in c||(f("expired"),c[g]=!0):(a.emit("notice",g+" has expired trying to resignin"),a.login(g,{display:"none",force:!1}),c[g]=e+600);continue}if(j.access_token===h.access_token&&j.expires===h.expires)continue;!h.access_token&&j.access_token?f("logout"):h.access_token&&!j.access_token?f("login"):h.expires!==j.expires&&f("update"),b[g]=h,g in c&&delete c[g]}setTimeout(d,1e3)}()}(hello),hello.api=function(){function a(a){if(c.data=e.clone(f),"get"===c.method){for(var g,h=/[\?\&]([^=&]+)(=([^&]+))?/gi;g=h.exec(a);)c.data[g[1]]=g[3];a=a.replace(/\?.*/,"")}var l=i[{"delete":"del"}[c.method]||c.method]||{},m=l[a]||l["default"]||a,n=function(a){a=a.replace(/\@\{([a-z\_\-]+)(\|.+?)?\}/gi,function(a,b,e){var f=e?e.replace(/^\|/,""):"";return b in c.data?(f=c.data[b],delete c.data[b]):"undefined"==typeof e&&d.emitAfter("error",{error:{code:"missing_attribute_"+b,message:"The attribute "+b+" is missing from the request"}}),f}),a.match(/^https?:\/\//)||(a=i.base+a);var f={},g=function(g,h){g&&("function"==typeof g?g(f):e.extend(f,g));var j=e.qs(a,f||{});d.emit("notice","Request "+j),b(c.network,j,c.method,c.data,i.querystring,h)};if(!e.isEmpty(c.data)&&!("FileList"in window)&&e.hasBinary(c.data))return e.post(g,c.data,"form"in i?i.form(c):null,j),d;if("delete"===c.method){var h=j;j=function(a,b){h(!a||e.isEmpty(a)?{success:!0}:a,b)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in i)||i.xhr&&i.xhr(c,f))){var l=e.xhr(c.method,g,c.headers,c.data,j);l.onprogress=function(a){d.emit("progress",a)},l.upload&&(l.upload.onprogress=function(a){d.emit("uploadprogress",a)})}else{if(c.callbackID=e.globalEvent(),"jsonp"in i&&i.jsonp(c,f),"api"in i&&i.api(a,c,k&&k.access_token?{access_token:k.access_token}:{},j))return;"post"===c.method?(f.redirect_uri=d.settings.redirect_uri,f.state=JSON.stringify({callback:c.callbackID}),e.post(g,c.data,"form"in i?i.form(c):null,j,c.callbackID,d.settings.timeout)):(e.extend(f,c.data),f.callback=c.callbackID,e.jsonp(g,j,c.callbackID,d.settings.timeout))}};"function"==typeof m?m(c,n):n(m)}function b(a,b,c,f,g,h){var i=d.services[a],j=k?k.access_token:null,l=i.oauth&&1===parseInt(i.oauth.version,10)?d.settings.oauth_proxy:null;if(l)return void h(e.qs(l,{path:b,access_token:j||"",then:"get"===c.toLowerCase()?"redirect":"proxy",method:c,suppress_response_codes:!0}));var m={access_token:j||""};g&&g(m),h(e.qs(b,m))}var c=this.utils.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments),d=this.use(),e=d.utils;d.args=c,c.method=(c.method||"get").toLowerCase();var f=c.data=c.data||{};d.on("complete",c.callback),c.path=c.path.replace(/^\/+/,"");var g=(c.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(g in d.services){c.network=g;var h=new RegExp("^"+g+":?/?");c.path=c.path.replace(h,"")}c.network=d.settings.default_service=c.network||d.settings.default_service;var i=d.services[c.network];if(!i)return d.emitAfter("complete error",{error:{code:"invalid_network",message:"Could not match the service requested: "+c.network}}),d;c.timeout&&(d.settings.timeout=c.timeout),d.emit("notice","API request "+c.method.toUpperCase()+" '"+c.path+"' (request)",c);var j=function(b,e){if(i.wrap&&(c.path in i.wrap||"default"in i.wrap)){var f=c.path in i.wrap?c.path:"default",g=(new Date).getTime(),h=i.wrap[f](b,e,c);h&&(b=h),d.emit("notice","Processing took"+((new Date).getTime()-g))}d.emit("notice","API: "+c.method.toUpperCase()+" '"+c.path+"' (response)",b);var j=null;b&&"paging"in b&&b.paging.next&&(j=function(){a((b.paging.next.match(/^\?/)?c.path:"")+b.paging.next)}),d.emit("complete "+(!b||"error"in b?"error":"success"),b,j)};if(c.method in i&&c.path in i[c.method]&&i[c.method][c.path]===!1)return d.emitAfter("complete error",{error:{code:"invalid_path",message:"The provided path is not available on the selected network"}});var k=d.getAuthResponse(c.network);return a(c.path),d},hello.utils.extend(hello.utils,{isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},domInstance:function(a,b){var c="HTML"+(a||"").replace(/^[a-z]/,function(a){return a.toUpperCase()})+"Element";return b?window[c]?b instanceof window[c]:window.Element?b instanceof window.Element&&(!a||b.tagName&&b.tagName.toLowerCase()===a):!(b instanceof Object||b instanceof Array||b instanceof String||b instanceof Number)&&b.tagName&&b.tagName.toLowerCase()===a:!1},clone:function(a){if("nodeName"in a||this.isBinary(a))return a;var b,c={};for(b in a)c[b]="object"==typeof a[b]?this.clone(a[b]):a[b];return c},xhr:function(a,b,c,d,e){function f(a){for(var b,c={},d=/([a-z\-]+):\s?(.*);?/gi;b=d.exec(a);)c[b[1]]=b[2];return c}var g=this;if("function"!=typeof b){var h=b;b=function(a,b){b(g.qs(h,a))}}var i=new XMLHttpRequest,j=!1;"blob"===a&&(j=a,a="GET"),a=a.toUpperCase(),i.onload=function(){var b=i.response;try{b=JSON.parse(i.responseText)}catch(c){401===i.status&&(b={error:{code:"access_denied",message:i.statusText}})}var d=f(i.getAllResponseHeaders());d.statusCode=i.status,e(b||("DELETE"!==a?{error:{message:"Could not get resource"}}:{}),d)},i.onerror=function(){var a=i.responseText;try{a=JSON.parse(i.responseText)}catch(b){}e(a||{error:{code:"access_denied",message:"Could not get resource"}})};var k,l={};if("GET"===a||"DELETE"===a)g.isEmpty(d)||g.extend(l,d),d=null;else if(!(!d||"string"==typeof d||d instanceof FormData||d instanceof File||d instanceof Blob)){var m=new FormData;for(k in d)d.hasOwnProperty(k)&&(d[k]instanceof HTMLInputElement?"files"in d[k]&&d[k].files.length>0&&m.append(k,d[k].files[0]):d[k]instanceof Blob?m.append(k,d[k],d.name):m.append(k,d[k]));d=m}return b(l,function(b){if(i.open(a,b,!0),j&&("responseType"in i?i.responseType=j:i.overrideMimeType("text/plain; charset=x-user-defined")),c)for(var e in c)i.setRequestHeader(e,c[e]);i.send(d)}),i},jsonp:function(a,b,c,d){var e,f,g=this,h=0,i=document.getElementsByTagName("head")[0],j={error:{message:"server_error",code:"server_error"}},k=function(){h++||window.setTimeout(function(){b(j),i.removeChild(f)},0)},l=g.globalEvent(function(a){return j=a,!0},c);if("function"!=typeof a){var m=a;m=m.replace(new RegExp("=\\?(&|$)"),"="+l+"$1"),a=function(a,b){b(g.qs(m,a))}}a(function(a){for(var b in a)a.hasOwnProperty(b)&&"?"===a[b]&&(a[b]=l)},function(a){f=g.append("script",{id:l,name:l,src:a,async:!0,onload:k,onerror:k,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&k()
}}),window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(e=g.append("script",{text:"document.getElementById('"+l+"').onerror();"}),f.async=!1),d&&window.setTimeout(function(){j={error:{message:"timeout",code:"timeout"}},k()},d),i.appendChild(f),e&&i.appendChild(e)})},post:function(a,b,c,d,e,f){var g=this,h=document;if("function"!=typeof a){var i=a;a=function(a,b){b(g.qs(i,a))}}var j,k=null,l=[],m=0,n=null,o=0,p=function(a){o++||d(a)};g.globalEvent(p,e);var q;try{q=h.createElement('<iframe name="'+e+'">')}catch(r){q=h.createElement("iframe")}if(q.name=e,q.id=e,q.style.display="none",c&&c.callbackonload&&(q.onload=function(){p({response:"posted",message:"Content was posted"})}),f&&setTimeout(function(){p({error:{code:"timeout",message:"The post operation timed out"}})},f),h.body.appendChild(q),g.domInstance("form",b)){for(k=b.form,m=0;m<k.elements.length;m++)k.elements[m]!==b&&k.elements[m].setAttribute("disabled",!0);b=k}if(g.domInstance("form",b))for(k=b,m=0;m<k.elements.length;m++)k.elements[m].disabled||"file"!==k.elements[m].type||(k.encoding=k.enctype="multipart/form-data",k.elements[m].setAttribute("name","file"));else{for(n in b)b.hasOwnProperty(n)&&g.domInstance("input",b[n])&&"file"===b[n].type&&(k=b[n].form,k.encoding=k.enctype="multipart/form-data");k||(k=h.createElement("form"),h.body.appendChild(k),j=k);var s;for(n in b)if(b.hasOwnProperty(n)){var t=g.domInstance("input",b[n])||g.domInstance("textArea",b[n])||g.domInstance("select",b[n]);if(t&&b[n].form===k)t&&b[n].name!==n&&(b[n].setAttribute("name",n),b[n].name=n);else{var u=k.elements[n];if(s)for(u instanceof NodeList||(u=[u]),m=0;m<u.length;m++)u[m].parentNode.removeChild(u[m]);s=h.createElement("input"),s.setAttribute("type","hidden"),s.setAttribute("name",n),s.value=t?b[n].value:g.domInstance(null,b[n])?b[n].innerHTML||b[n].innerText:b[n],k.appendChild(s)}}for(m=0;m<k.elements.length;m++)s=k.elements[m],s.name in b||s.getAttribute("disabled")===!0||(s.setAttribute("disabled",!0),l.push(s))}k.setAttribute("method","POST"),k.setAttribute("target",e),k.target=e,a({},function(a){k.setAttribute("action",a),setTimeout(function(){k.submit(),setTimeout(function(){try{j&&j.parentNode.removeChild(j)}catch(a){try{console.error("HelloJS: could not remove iframe")}catch(b){}}for(var c=0;c<l.length;c++)l[c]&&(l[c].setAttribute("disabled",!1),l[c].disabled=!1)},0)},100)})},hasBinary:function(a){for(var b in a)if(a.hasOwnProperty(b)&&this.isBinary(a[b]))return!0;return!1},isBinary:function(a){return a instanceof Object&&(this.domInstance("input",a)&&"file"===a.type||"FileList"in window&&a instanceof window.FileList||"File"in window&&a instanceof window.File||"Blob"in window&&a instanceof window.Blob)},toBlob:function(a){var b=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,c=a.match(b);if(!c)return a;for(var d=atob(a.replace(b,"")),e=[],f=0;f<d.length;f++)e.push(d.charCodeAt(f));return new Blob([new Uint8Array(e)],{type:c[1]})}}),function(a){var b=a.api,c=a.utils;c.extend(c,{dataToJSON:function(a){var b=this,c=window,d=a.data;if(b.domInstance("form",d)?d=b.nodeListToJSON(d.elements):"NodeList"in c&&d instanceof NodeList?d=b.nodeListToJSON(d):b.domInstance("input",d)&&(d=b.nodeListToJSON([d])),("File"in c&&d instanceof c.File||"Blob"in c&&d instanceof c.Blob||"FileList"in c&&d instanceof c.FileList)&&(d={file:d}),!("FormData"in c&&d instanceof c.FormData))for(var e in d)if(d.hasOwnProperty(e))if("FileList"in c&&d[e]instanceof c.FileList)1===d[e].length&&(d[e]=d[e][0]);else{if(b.domInstance("input",d[e])&&"file"===d[e].type)continue;b.domInstance("input",d[e])||b.domInstance("select",d[e])||b.domInstance("textArea",d[e])?d[e]=d[e].value:b.domInstance(null,d[e])&&(d[e]=d[e].innerHTML||d[e].innerText)}return a.data=d,d},nodeListToJSON:function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];!d.disabled&&d.name&&(b[d.name]="file"===d.type?d:d.value||d.innerHTML)}return b}}),a.api=function(){var a=c.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return a.data&&c.dataToJSON(a),b.call(this,a)}}(hello),function(){function a(a){return function(){var c=a.apply(this,arguments),d=b(function(a,b){c.on("success",a).on("error",b).on("*",function(){var a=Array.prototype.slice.call(arguments);a.unshift(a.pop()),e.emit.apply(e,a)})}),e=hello.utils.Event.call(d.proxy);return e}}Function.prototype.bind||(Function.prototype.bind=function(a){function b(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=[].slice,d=c.call(arguments,1),e=this,f=function(){return e.apply(this instanceof b?this:a||window,d.concat(c.call(arguments)))};return b.prototype=this.prototype,f.prototype=new b,f});var b=function(){var a=0,b=1,c=2,d=function(b){return this instanceof d?(this.id="Thenable/1.0.6",this.state=a,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof b&&b.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new d(b)};d.prototype={fulfill:function(a){return e(this,b,"fulfillValue",a)},reject:function(a){return e(this,c,"rejectReason",a)},then:function(a,b){var c=this,e=new d;return c.onFulfilled.push(h(a,e,"fulfill")),c.onRejected.push(h(b,e,"reject")),f(c),e.proxy}};var e=function(b,c,d,e){return b.state===a&&(b.state=c,b[d]=e,f(b)),b},f=function(a){a.state===b?g(a,"onFulfilled",a.fulfillValue):a.state===c&&g(a,"onRejected",a.rejectReason)},g=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(e):"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},h=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=a(d)}catch(f){return void b.reject(f)}i(b,e)}}},i=function(a,b){if(a===b||a.proxy===b)return void a.reject(new TypeError("cannot resolve promise with itself"));var c;if("object"==typeof b&&null!==b||"function"==typeof b)try{c=b.then}catch(d){return void a.reject(d)}if("function"!=typeof c)a.fulfill(b);else{var e=!1;try{c.call(b,function(c){e||(e=!0,c===b?a.reject(new TypeError("circular thenable chain")):i(a,c))},function(b){e||(e=!0,a.reject(b))})}catch(d){e||a.reject(d)}}};return d}();hello.login=a(hello.login),hello.api=a(hello.api),hello.logout=a(hello.logout)}(hello),function(a){function b(a){a&&"error"in a&&(a.error={code:"server_error",message:a.error.message||a.error})}function c(b){if(!("object"!=typeof b||"Blob"in window&&b instanceof Blob||"ArrayBuffer"in window&&b instanceof ArrayBuffer||"error"in b)){var c=b.root+b.path.replace(/\&/g,"%26");b.thumb_exists&&(b.thumbnail=a.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/"+c+"?format=jpeg&size=m")+"&access_token="+a.getAuthResponse("dropbox").access_token),b.type=b.is_dir?"folder":b.mime_type,b.name=b.path.replace(/.*\//g,""),b.is_dir?b.files="metadata/"+c:(b.downloadLink=a.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/"+c)+"&access_token="+a.getAuthResponse("dropbox").access_token,b.file="https://api-content.dropbox.com/1/files/"+c),b.id||(b.id=b.path.replace(/^\//,""))}}function d(a){return function(b,c){delete b.data.limit,c(a)}}a.init({dropbox:{login:function(a){a.options.window_width=1e3,a.options.window_height=1e3},oauth:{version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":d("metadata/@{root|sandbox}/@{parent}"),"me/folder":d("metadata/@{root|sandbox}/@{id}"),"me/folders":d("metadata/@{root|sandbox}/"),"default":function(a,b){a.path.match("https://api-content.dropbox.com/1/files/")&&(a.method="blob"),b(a.path)}},post:{"me/files":function(b,c){var d=b.data.parent,e=b.data.name;b.data={file:b.data.file},"string"==typeof b.data.file&&(b.data.file=a.utils.toBlob(b.data.file)),c("https://api-content.dropbox.com/1/files_put/@{root|sandbox}/"+d+"/"+e)},"me/folders":function(b,c){var d=b.data.name;b.data={},c("fileops/create_folder?root=@{root|sandbox}&"+a.utils.param({path:d}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(a){return b(a),a.uid?(a.name=a.display_name,a.first_name=a.name.split(" ")[0],a.last_name=a.name.split(" ")[1],a.id=a.uid,delete a.uid,delete a.display_name,a):a},"default":function(a){if(b(a),a.is_dir&&a.contents){a.data=a.contents,delete a.contents;for(var d=0;d<a.data.length;d++)a.data[d].root=a.root,c(a.data[d])}return c(a),a.is_deleted&&(a.success=!0),a}},xhr:function(a){if(a.data&&a.data.file){var b=a.data.file;b&&(a.data=b.files?b.files[0]:b)}return"delete"===a.method&&(a.method="post"),!0}}})}(hello),function(a){function b(a){return a.id&&(a.thumbnail=a.picture="http://graph.facebook.com/"+a.id+"/picture"),a}function c(a){if("data"in a)for(var c=0;c<a.data.length;c++)b(a.data[c]);return a}function d(b){if("data"in b)for(var c=a.getAuthResponse("facebook").access_token,d=0;d<b.data.length;d++){var f=b.data[d];f.picture&&(f.thumbnail=f.picture),f.cover_photo&&(f.thumbnail=e+f.cover_photo+"/picture?access_token="+c),"album"===f.type&&(f.files=f.photos=e+f.id+"/photos"),f.can_upload&&(f.upload_location=e+f.id+"/photos")}return b}var e="https://graph.facebook.com/";a.init({facebook:{name:"Facebook",login:function(a){a.options.window_width=580,a.options.window_height=400},oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/"},refresh:!0,logout:function(b){var c=a.utils.globalEvent(b),d=encodeURIComponent(a.settings.redirect_uri+"?"+a.utils.param({callback:c,result:JSON.stringify({force:!0}),state:"{}"})),e=(a.utils.store("facebook")||{}).access_token;return a.utils.iframe("https://www.facebook.com/logout.php?next="+d+"&access_token="+e),e?void 0:!1},scope:{basic:"public_profile",email:"email",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},base:"https://graph.facebook.com/",get:{me:"me","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/files":"me/albums","me/albums":"me/albums","me/album":"@{id}/photos","me/photos":"me/photos","me/photo":"@{id}"},post:{"me/share":"me/feed","me/albums":"me/albums","me/album":"@{id}/photos"},del:{"me/photo":"@{id}"},wrap:{me:b,"me/friends":c,"me/following":c,"me/followers":c,"me/albums":d,"me/files":d,"default":d},xhr:function(b,c){return("get"===b.method||"post"===b.method)&&(c.suppress_response_codes=!0),"post"===b.method&&b.data&&"string"==typeof b.data.file&&(b.data.file=a.utils.toBlob(b.data.file)),!0},jsonp:function(b,c){var d=b.method.toLowerCase();"get"===d||a.utils.hasBinary(b.data)?"delete"===b.method&&(c.method="delete",b.method="post"):(b.data.method=d,b.method="get")},form:function(){return{callbackonload:!0}}}})}(hello),function(a){function b(b,c,d){var e=(d?"":"flickr:")+"?method="+b+"&api_key="+a.init().flickr.id+"&format=json";for(var f in c)c.hasOwnProperty(f)&&(e+="&"+f+"="+c[f]);return e}function c(c){var d=a.getAuthResponse("flickr");d&&d.user_nsid?c(d.user_nsid):a.api(b("flickr.test.login"),function(a){c(i(a,"user").id)})}function d(a,d){return d||(d={}),function(e,f){c(function(c){d.user_id=c,f(b(a,d,!0))})}}function e(a,b){var c="https://www.flickr.com/images/buddyicon.gif";return a.nsid&&a.iconserver&&a.iconfarm&&(c="https://farm"+a.iconfarm+".staticflickr.com/"+a.iconserver+"/buddyicons/"+a.nsid+(b?"_"+b:"")+".jpg"),c}function f(a,b,c,d,e){return e=e?"_"+e:"","https://farm"+b+".staticflickr.com/"+c+"/"+a+"_"+d+e+".jpg"}function g(a){a&&a.stat&&"ok"!=a.stat.toLowerCase()&&(a.error={code:"invalid_request",message:a.message})}function h(a){if(a.photoset||a.photos){var b="photoset"in a?"photoset":"photos";a=i(a,b),k(a),a.data=a.photo,delete a.photo;for(var c=0;c<a.data.length;c++){var d=a.data[c];d.name=d.title,d.picture=f(d.id,d.farm,d.server,d.secret,""),d.source=f(d.id,d.farm,d.server,d.secret,"b"),d.thumbnail=f(d.id,d.farm,d.server,d.secret,"m")}}return a}function i(a,b){return b in a?a=a[b]:"error"in a||(a.error={code:"invalid_request",message:a.message||"Failed to get data from Flickr"}),a}function j(a){if(g(a),a.contacts){a=i(a,"contacts"),k(a),a.data=a.contact,delete a.contact;for(var b=0;b<a.data.length;b++){var c=a.data[b];c.id=c.nsid,c.name=c.realname||c.username,c.thumbnail=e(c,"m")}}return a}function k(a){a.page&&a.pages&&a.page!==a.pages&&(a.paging={next:"?page="+ ++a.page})}a.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:d("flickr.people.getInfo"),"me/friends":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":d("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/photos":d("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(a){if(g(a),a=i(a,"person"),a.id){if(a.realname){a.name=a.realname._content;var b=a.name.split(" ");a.first_name=b[0],a.last_name=b[1]}a.thumbnail=e(a,"l"),a.picture=e(a,"l")}return a},"me/friends":j,"me/followers":j,"me/following":j,"me/albums":function(a){if(g(a),a=i(a,"photosets"),k(a),a.photoset){a.data=a.photoset,delete a.photoset;for(var c=0;c<a.data.length;c++){var d=a.data[c];d.name=d.title._content,d.photos="https://api.flickr.com/services/rest"+b("flickr.photosets.getPhotos",{photoset_id:d.id},!0)}}return a},"me/photos":function(a){return g(a),h(a)},"default":function(a){return g(a),h(a)}},xhr:!1,jsonp:function(a,b){"get"==a.method.toLowerCase()&&(delete b.callback,b.jsoncallback=a.callbackID)}}})}(hello),function(a){function b(a){a.meta&&400===a.meta.code&&(a.error={code:"access_denied",message:a.meta.errorDetail})}function c(a){a&&a.id&&(a.thumbnail=a.photo.prefix+"100x100"+a.photo.suffix,a.name=a.firstName+" "+a.lastName,a.first_name=a.firstName,a.last_name=a.lastName,a.contact&&a.contact.email&&(a.email=a.contact.email))}a.init({foursquare:{name:"FourSquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate"},refresh:!0,querystring:function(a){var b=a.access_token;delete a.access_token,a.oauth_token=b,a.v=20121125},base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(a){return b(a),a&&a.response&&(a=a.response.user,c(a)),a},"default":function(a){if(b(a),a&&"response"in a&&"friends"in a.response&&"items"in a.response.friends){a.data=a.response.friends.items,delete a.response;for(var d=0;d<a.data.length;d++)c(a.data[d])}return a}}}})}(hello),function(a){function b(a,b){var c=b?b.statusCode:a&&"meta"in a&&"status"in a.meta&&a.meta.status;(401===c||403===c)&&(a.error={code:"access_denied",message:a.message||(a.data?a.data.message:"Could not get response")},delete a.message)}function c(a){a.id&&(a.thumbnail=a.picture=a.avatar_url,a.name=a.login)}function d(a,b){if(a.data&&a.data.length&&b&&b.Link){var c=b.Link.match(/&page=([0-9]+)/);c&&(a.paging={next:"?page="+c[1]})}}a.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}"},wrap:{me:function(a,d){return b(a,d),c(a),a},"default":function(a,e,f){if(b(a,e),"[object Array]"===Object.prototype.toString.call(a)){a={data:a},d(a,e,f);for(var g=0;g<a.data.length;g++)c(a.data[g])}return a}}}})}(hello),function(a,b){function c(a){return parseInt(a,10)}function d(a){a.error||(a.name||(a.name=a.title||a.message),a.picture||(a.picture=a.thumbnailLink),a.thumbnail||(a.thumbnail=a.thumbnailLink),"application/vnd.google-apps.folder"===a.mimeType&&(a.type="folder",a.files="https://www.googleapis.com/drive/v2/files?q=%22"+a.id+"%22+in+parents"))}function e(a){h(a);var b=function(a){var b,c=a.media$group.media$content.length?a.media$group.media$content[0]:{},d=0,e={id:a.id.$t,name:a.title.$t,description:a.summary.$t,updated_time:a.updated.$t,created_time:a.published.$t,picture:c?c.url:null,thumbnail:c?c.url:null,width:c.width,height:c.height};if("link"in a)for(d=0;d<a.link.length;d++){var f=a.link[d];if(f.rel.match(/\#feed$/)){e.upload_location=e.files=e.photos=f.href;break}}if("category"in a&&a.category.length)for(b=a.category,d=0;d<b.length;d++)b[d].scheme&&b[d].scheme.match(/\#kind$/)&&(e.type=b[d].term.replace(/^.*?\#/,""));if("media$thumbnail"in a.media$group&&a.media$group.media$thumbnail.length){for(b=a.media$group.media$thumbnail,e.thumbnail=a.media$group.media$thumbnail[0].url,e.images=[],d=0;d<b.length;d++)e.images.push({source:b[d].url,width:b[d].width,height:b[d].height});b=a.media$group.media$content.length?a.media$group.media$content[0]:null,b&&e.images.push({source:b.url,width:b.width,height:b.height})}return e},c=[];if("feed"in a&&"entry"in a.feed){for(e=0;e<a.feed.entry.length;e++)c.push(b(a.feed.entry[e]));a.data=c,delete a.feed}else{if("entry"in a)return b(a.entry);if("items"in a){for(var e=0;e<a.items.length;e++)d(a.items[e]);a.data=a.items,delete a.items}else d(a)}return a}function f(a){a.name=a.displayName||a.name,a.picture=a.picture||(a.image?a.image.url:null),a.thumbnail=a.picture}function g(b){h(b);var c=[];if("feed"in b&&"entry"in b.feed){for(var d=a.getAuthResponse("google").access_token,e=0;e<b.feed.entry.length;e++){var f=b.feed.entry[e],g=f.link&&f.link.length>0?f.link[0].href+"?access_token="+d:null;c.push({id:f.id.$t,name:f.title.$t,email:f.gd$email&&f.gd$email.length>0?f.gd$email[0].address:null,updated_time:f.updated.$t,picture:g,thumbnail:g})}b.data=c,delete b.feed}return b}function h(a){if("feed"in a&&a.feed.openSearch$itemsPerPage){var b=c(a.feed.openSearch$itemsPerPage.$t),d=c(a.feed.openSearch$startIndex.$t),e=c(a.feed.openSearch$totalResults.$t);e>d+b&&(a.paging={next:"?start="+(d+b)})}else"nextPageToken"in a&&(a.paging={next:"?pageToken="+a.nextPageToken})}function i(){function a(a){var b=new FileReader;b.onload=function(b){c(btoa(b.target.result),a.type+g+"Content-Transfer-Encoding: base64")},b.readAsBinaryString(a)}function c(a,b){d.push(g+"Content-Type: "+b+g+g+a),f--,i()}var d=[],e=(1e10*Math.random()).toString(32),f=0,g="\r\n",h=g+"--"+e,i=function(){},j=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(d,e){"string"!=typeof d&&"length"in Object(d)||(d=[d]);for(var h=0;h<d.length;h++){f++;var i=d[h];if(i instanceof b.File||i instanceof b.Blob)a(i);else if("string"==typeof i&&i.match(j)){var k=i.match(j);c(i.replace(j,""),k[1]+g+"Content-Transfer-Encoding: base64")}else c(i,e)}},this.onready=function(a){(i=function(){0===f&&(d.unshift(""),d.push("--"),a(d.join(h),e),d=[])})()}}function j(a,c,d,e,f){var g="https://content.googleapis.com";o||(q=String(parseInt(1e8*Math.random(),10)),o=n.append("iframe",{src:g+"/static/proxy.html?jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.mMZgig4ibk0.O%2Fm%3D__features__%2Fam%3DEQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAItRSTNZBJcXGialq7mfSUkqsE3kvYwkpQ#parent="+b.location.origin+"&rpctoken="+q,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body"),l(b,"message",function(a){if(a.origin===g){var b;try{b=JSON.parse(a.data)}catch(c){return}if(b&&b.s&&b.s==="ready:"+q){p=!0,r=0;for(var d=0;d<s.length;d++)s[d]()}}}));var h=function(){var h=b.navigator,i=++r,j=n.param(c.match(/\?.+/)[0]),k=j.access_token;delete j.access_token;var p=JSON.stringify({s:"makeHttpRequests",f:"..",c:i,a:[[{key:"gapiRequest",params:{url:c.replace(/(^https?\:\/\/[^\/]+|\?.+$)/,""),httpMethod:a.toUpperCase(),body:e,headers:{Authorization:":Bearer "+k,"Content-Type":d["content-type"],"X-Origin":b.location.origin,"X-ClientDetails":"appVersion="+h.appVersion+"&platform="+h.platform+"&userAgent="+h.userAgent},urlParams:j,clientName:"google-api-javascript-client",clientVersion:"1.1.0-beta"}}]],t:q,l:!1,g:!0,r:".."});l(b,"message",function s(a){if(a.origin===g)try{var c=JSON.parse(a.data);c.t===q&&c.a[0]===i&&(m(b,"message",s),f(JSON.parse(JSON.parse(c.a[1]).gapiRequest.data.body)))}catch(d){f({error:{code:"request_error",message:"Failed to post to Google"}})}}),o.contentWindow.postMessage(p,"*")};p?h():s.push(h)}function k(a,c){var d={};a.data&&a.data instanceof b.HTMLInputElement&&(a.data={file:a.data}),!a.data.name&&Object(Object(a.data.file).files).length&&"post"===a.method&&(a.data.name=a.data.file.files[0].name),"post"===a.method?a.data={title:a.data.name,parents:[{id:a.data.parent||"root"}],file:a.data.file}:(d=a.data,a.data={},d.parent&&(a.data.parents=[{id:a.data.parent||"root"}]),d.file&&(a.data.file=d.file),d.name&&(a.data.title=d.name)),c("upload/drive/v2/files"+(d.id?"/"+d.id:"")+"?uploadType=multipart")}var l,m,n=a.utils;document.removeEventListener?(l=function(a,b,c){a.addEventListener(b,c)},m=function(a,b,c){a.removeEventListener(b,c)}):document.detachEvent&&(m=function(a,b,c){a.detachEvent("on"+b,c)},l=function(a,b,c){a.attachEvent("on"+b,c)});var o,p,q,r,s=[],t="https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=@{limit|1000}&start-index=@{start|1}";a.init({google:{name:"Google Plus",login:function(a){"none"===a.qs.display&&(a.qs.display=""),"code"===a.qs.response_type&&(a.qs.access_type="offline")},oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":t,"me/followers":t,"me/contacts":t,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(a,b){var c=a.data.id;delete a.data.id,b(c.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":k,"me/folders":function(a,b){a.data={title:a.data.name,parents:[{id:a.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},b("drive/v2/files")}},put:{"me/files":k},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},wrap:{me:function(a){return a.id&&(a.last_name=a.family_name||(a.name?a.name.familyName:null),a.first_name=a.given_name||(a.name?a.name.givenName:null),a.emails&&a.emails.length&&(a.email=a.emails[0].value),f(a)),a},"me/friends":function(a){if(a.items){h(a),a.data=a.items,delete a.items;for(var b=0;b<a.data.length;b++)f(a.data[b])}return a},"me/contacts":g,"me/followers":g,"me/following":g,"me/share":function(a){return h(a),a.data=a.items,delete a.items,a},"me/feed":function(a){return h(a),a.data=a.items,delete a.items,a},"me/albums":e,"me/photos":e,"default":e},xhr:function(a){if("post"===a.method||"put"===a.method){if(a.data&&n.hasBinary(a.data)||a.data.file)return a.cors_support=a.cors_support||!0,!1;a.data=JSON.stringify(a.data),a.headers={"content-type":"application/json"}}return!0},api:function(a,b,c,d){if("get"!==b.method){"file"in b.data&&n.domInstance("input",b.data.file)&&!("files"in b.data.file)&&d({error:{code:"request_invalid",message:"Sorry, can't upload your files to Google Drive in this browser"}});var e;if("file"in b.data&&(e=b.data.file,delete b.data.file,"object"==typeof e&&"files"in e&&(e=e.files),!e||!e.length))return void d({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var f=new i;return f.append(JSON.stringify(b.data),"application/json"),e&&f.append(e),f.onready(function(e,f){b.cors_support?n.xhr(b.method,n.qs(a,c),{"content-type":'multipart/related; boundary="'+f+'"'},e,d):j(b.method,n.qs(a,c),{"content-type":'multipart/related; boundary="'+f+'"'},e,d)}),!0}}}})}(hello,window),function(a){function b(a){a&&"meta"in a&&"error_type"in a.meta&&(a.error={code:a.meta.error_type,message:a.meta.error_message})}function c(a){if(e(a),a&&"data"in a)for(var b=0;b<a.data.length;b++)d(a.data[b]);return a}function d(a){a.id&&(a.thumbnail=a.profile_picture,a.name=a.full_name||a.username)}function e(a){"pagination"in a&&(a.paging={next:a.pagination.next_url},delete a.pagination)}a.init({instagram:{name:"Instagram",login:function(a){a.qs.display=""},oauth:{version:2,auth:"https://instagram.com/oauth/authorize/"},refresh:!0,scope:{basic:"basic",friends:"relationships",photos:""},scope_delim:" ",base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}"},wrap:{me:function(a){return b(a),"data"in a&&(a.id=a.data.id,a.thumbnail=a.data.profile_picture,a.name=a.data.full_name||a.data.username),a},"me/friends":c,"me/following":c,"me/followers":c,"me/photos":function(a){if(b(a),e(a),"data"in a)for(var c=0;c<a.data.length;c++){var d=a.data[c];"image"===d.type?(d.thumbnail=d.images.thumbnail.url,d.picture=d.images.standard_resolution.url,d.name=d.caption?d.caption.text:null):(a.data.splice(c,1),c--)}return a},"default":function(a){return e(a),a}},xhr:!1}})}(hello),function(a){function b(a){a&&"errorCode"in a&&(a.error={code:a.status,message:a.message})}function c(a){a.error||(a.first_name=a.firstName,a.last_name=a.lastName,a.name=a.formattedName||a.first_name+" "+a.last_name,a.thumbnail=a.pictureUrl)}function d(a){if(b(a),e(a),a.values){a.data=a.values;for(var d=0;d<a.data.length;d++)c(a.data[d]);delete a.values}return a}function e(a){"_count"in a&&"_start"in a&&a._count+a._start<a._total&&(a.paging={next:"?start="+(a._start+a._count)+"&count="+a._count})}a.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_fullprofile",email:"r_emailaddress",friends:"r_network",publish:"rw_nus"},scope_delim:" ",querystring:function(a){a.oauth2_access_token=a.access_token,delete a.access_token},base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{},wrap:{me:function(a){return b(a),c(a),a},"me/friends":d,"me/following":d,"me/followers":d,"me/share":function(a){if(b(a),e(a),a.values){a.data=a.values,delete a.values;for(var d=0;d<a.data.length;d++){var f=a.data[d];c(f),f.message=f.headline}}return a},"default":function(a){b(a),e(a)}},jsonp:function(a,b){b.format="jsonp","get"===a.method&&(b["error-callback"]="?")},xhr:!1}})}(hello),function(a){function b(a){a.id&&(a.picture=a.avatar_url,a.thumbnail=a.avatar_url,a.name=a.username||a.full_name)}function c(a){"next_href"in a&&(a.paging={next:a.next_href})}a.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect"},querystring:function(a){var b=a.access_token;delete a.access_token,a.oauth_token=b,a["_status_code_map[302]"]=200},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(a,b){b(a.path+".json")}},wrap:{me:function(a){return b(a),a},"default":function(a){if(a instanceof Array){a={data:a};for(var d=0;d<a.data.length;d++)b(a.data[d])}return c(a),a}}}})}(hello),function(a){function b(a){if(a.id){if(a.name){var b=a.name.split(" ");a.first_name=b[0],a.last_name=b[1]}a.thumbnail=a.profile_image_url}}function c(a){if(d(a),e(a),a.users){a.data=a.users;for(var c=0;c<a.data.length;c++)b(a.data[c]);delete a.users}return a}function d(a){if(a.errors){var b=a.errors[0];a.error={code:"request_failed",message:b.message}}}function e(a){"next_cursor_str"in a&&(a.paging={next:"?cursor="+a.next_cursor_str})}a.init({twitter:{oauth:{version:"1.0a",auth:"https://twitter.com/oauth/authorize",request:"https://twitter.com/oauth/request_token",token:"https://twitter.com/oauth/access_token"},base:"https://api.twitter.com/1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}"},post:{"me/share":function(a,b){var c=a.data;a.data=null,b("statuses/update.json?include_entities=1&status="+c.message)}},wrap:{me:function(a){return d(a),b(a),a},"me/friends":c,"me/followers":c,"me/following":c,"me/share":function(a){return d(a),e(a),!a.error&&"length"in a?{data:a}:a},"default":function(a){return e(a),a}},xhr:function(a){return"get"!==a.method}}})}(hello),function(a){function b(b){if(b.id){var c=a.getAuthResponse("windows").access_token;if(b.emails&&(b.email=b.emails.preferred),b.is_friend!==!1){var d=b.user_id||b.id;b.thumbnail=b.picture="https://apis.live.net/v5.0/"+d+"/picture?access_token="+c}}}function c(a){if("data"in a)for(var c=0;c<a.data.length;c++)b(a.data[c]);return a}a.init({windows:{name:"windows",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},id:_authConfig.live.client_id,scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive/}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:function(a){return b(a),a
},"me/friends":c,"me/contacts":c,"me/followers":c,"me/following":c,"me/albums":function(a){if("data"in a)for(var b=0;b<a.data.length;b++){var c=a.data[b];c.photos=c.files="https://apis.live.net/v5.0/"+c.id+"/photos"}return a},"default":function(a){if("data"in a)for(var b=0;b<a.data.length;b++){var c=a.data[b];c.picture&&(c.thumbnail=c.picture)}return a}},xhr:function(b){return"get"===b.method||"delete"===b.method||a.utils.hasBinary(b.data)||("string"==typeof b.data.file?b.data.file=a.utils.toBlob(b.data.file):(b.data=JSON.stringify(b.data),b.headers={"Content-Type":"application/json"})),!0},jsonp:function(b){"get"===b.method.toLowerCase()||a.utils.hasBinary(b.data)||(b.data.method=b.method.toLowerCase(),b.method="get")}}})}(hello),function(a){function b(a){a&&"meta"in a&&"error_type"in a.meta&&(a.error={code:a.meta.error_type,message:a.meta.error_message})}function c(a){b(a),d(a);var c,e;if(a.query&&a.query.results&&a.query.results.contact){a.data=a.query.results.contact,delete a.query,a.data instanceof Array||(a.data=[a.data]);for(var f=0;f<a.data.length;f++){c=a.data[f],c.id=null;for(var g=0;g<c.fields.length;g++)e=c.fields[g],"email"===e.type&&(c.email=e.value),"name"===e.type&&(c.first_name=e.value.givenName,c.last_name=e.value.familyName,c.name=e.value.givenName+" "+e.value.familyName),"yahooid"===e.type&&(c.id=e.value)}}return a}function d(a){a.query&&a.query.count&&(a.paging={next:"?start="+a.query.count})}var e=function(a){return"https://query.yahooapis.com/v1/yql?q="+(a+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"};a.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},redirect_uri:"redirect.html",login:function(a){a.options.window_width=560},id:_authConfig.yahoo.consumer_key,base:"https://social.yahooapis.com/v1/",get:{me:e("select * from social.profile(0) where guid=me"),"me/friends":e("select * from social.contacts(0) where guid=me"),"me/following":e("select * from social.contacts(0) where guid=me")},wrap:{me:function(a){if(b(a),a.query&&a.query.results&&a.query.results.profile){a=a.query.results.profile,a.id=a.guid,a.last_name=a.familyName,a.first_name=a.givenName||a.nickname;var c=[];a.first_name&&c.push(a.first_name),a.last_name&&c.push(a.last_name),a.name=c.join(" "),a.email=a.emails?a.emails.handle:null,a.thumbnail=a.image?a.image.imageUrl:null}return a},"me/friends":c,"me/following":c,"default":function(a){return d(a),a}},xhr:!1}})}(hello),"function"==typeof define&&define.amd&&define(function(){return hello});var REDIRECT_URI={"local.knarly.com":"/hello.js/redirect.html"}[window.location.host]||"./redirect.html";$(document).ready(function(){"undefined"!=typeof Storage&&(void 0!=localStorage||"undefined"!=localStorage)&&void 0==localStorage.FirstUser&&(localStorage.FirstUser="trues",$("#joinSite").click()),$("#joinSite").click()}),angular.module("App.controllers",[]).constant("gcfg",{clientId:_googleAuthConfig.clientId,state:_googleAuthConfig.appState,scopes:{email:_googleAuthConfig.scopes.email,profile:_googleAuthConfig.scopes.profile,plus:_googleAuthConfig.scopes.plus,me:_googleAuthConfig.scopes.me}}).constant("authcfg",{live:{clientId:_authConfig.live.client_id,clientSecret:_authConfig.live.client_secret,redirectUrl:_authConfig.live.redirect_url},yahoo:{consumerKey:_authConfig.yahoo.consumer_key,consumerSecret:_authConfig.yahoo.consumer_secret,redirectUrl:_authConfig.yahoo.redirect_url}}).controller("AppCtrl",["$scope","$rootScope","$location",function(a,b,c){a.dash=b.dash={},b.facebookToken="",b.firstAccess=!1,-1!=c.$$absUrl.indexOf("?InviteYourFriends")&&(b.firstAccess=!0,c.$$absUrl=c.$$absUrl.replace("?InviteYourFriends",""),setTimeout(function(){$("#lnkMenuInvite").trigger("click")},1e3)),a.returningUser=function(){b.returningUser()}}]).controller("DashCtrl",["$timeout","$scope","$http","$rootScope","$injector","filterDash",function(a,b,c,d,e,f){b.userFriendsSearch=d.userFriendsSearch=[],b.facebookPhoto={friendName:"",viewDetail:!1},b.userEmailFeed=d.userEmailFeed=[],b.userHasEmailAccount=d.userHasEmailAccount=!1,d.$gridster=null,d.loadDragWidgets=function(){var c=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);c||"True"==homepage?$(function(){d.$gridster=$(".gridster .list-gridster").gridster({widget_margins:[5,5],widget_base_dimensions:[310,340]}).data("gridster").disable()}):null==d.$gridster?$(function(){console.log("remake grid"),d.$gridster=$(".gridster .list-gridster").gridster({widget_margins:[5,5],widget_base_dimensions:[310,340],shift_larger_widgets_down:!1,serialize_params:function(a,b){return{id:a.attr("data-widget"),col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},draggable:{stop:function(){var a=d.$gridster.serialize();b.updatePosition(a)}}}).data("gridster")}):a(function(){$(".list-gridster .box-column").each(function(a,b){$(b).hasClass("gs_w")||d.$gridster.add_widget(b,$(b).attr("data-sizex"),1,$(b).attr("data-col"),$(b).attr("data-row"))}),d.$gridster=null,d.loadDragWidgets()},200)},d.loadDragWidgets();var g;b.$inject=["$scope","filterDash"],b.$on("handleBroadcast",function(){b.category=f.key}),b.widgets=d.widgets=g=_page.widgets,b.$parent.dash.nWidgets=b.widgets.length,NB.searchGoogle&&b.$parent.dash.nWidgets<1&&(b.$parent.dash.nWidgets=1),b.delSelected=function(a,b){d.deleteItem={id:a,i:b}},b.findFriend=function(){""!=b.facebookPhoto.friendName?(b.userFriendsSearch=d.userFriends.slice(0),b.userFriendsSearch=_.filter(b.userFriends,function(a){return a.name.toLowerCase().slice(0,b.facebookPhoto.friendName.length)==b.facebookPhoto.friendName.toLowerCase()})):b.userFriendsSearch=[]},d.returningUser=b.returningUser=function(){if(void 0!=d.currentExternalWindows)for(var a in d.currentExternalWindows)null!=d.currentExternalWindows[a]&&d.currentExternalWindows[a].close();$(".take-me-home").hasClass("hide")||($(".take-me-home").addClass("hide"),$(".take-me-home-background").addClass("hide"))},window.focus=d.returningUser,d.removeWidget=b.removeWidget=function(a){LoadBehaviorCaller=[],b.widgets.splice(a.i,1),b.$parent.dash.nWidgets--,b.$broadcast("dataloaded")},d.addWidgetFirst=b.addWidgetFirst=function(a){b.widgets.unshift($.parseJSON(a)),b.$parent.dash.nWidgets++,b.$broadcast("dataloaded"),d.loadDragWidgets()},d.addWidgetLast=b.addWidgetLast=function(a){var c=3;$.parseJSON(a),b.widgets.splice(b.widgets.length-c,0,$.parseJSON(a)),b.$parent.dash.nWidgets++,b.$broadcast("dataloaded"),d.loadDragWidgets()},d.repositionWidgets=b.repositionWidgets=function(){var a=1;if(null!=d.$gridster)for(var b=d.$gridster.get_highest_occupied_cell(),c=b.row,e=0,f=0,g=1;c>=g;g++)for(var h=1;3>=h;h++)if(d.$gridster.is_empty(h,g)){var i=h+1,j=g;4==i&&(i=1,j=g+1);var k=d.$gridster.is_empty(i,j);if(e=0==e?h:e,f=0==f?g:f,k)a++;else for(var l=1;a>=l;l++){var m=d.$gridster.is_widget(i,j);if(m){var n=m.context.attributes["data-sizex"].value;if(3==n&&e>1)for(var o=!1,p=j+1;c>=p;p++){for(var q=1;3>=q;q++)if(m=d.$gridster.is_widget(q,p),m&&(n=m.context.attributes["data-sizex"].value,1==n)){o=!0;break}if(o)break}(1==n||3==n&&1==e)&&(d.$gridster.new_move_widget_to(m,e,f),e++,e>3&&(e=1,f++))}i++,i>3&&(i=1,j++),e=l==a?0:e,f=l==a?0:f,a=l==a?1:a}}},d.addWidgetForIndex=b.addWidgetForIndex=function(a,c){b.widgets.splice(a,1,$.parseJSON(c)),b.$parent.dash.nWidgets++,setTimeout(function(){b.$broadcast("dataloaded")},300)},b.viewUserPhotos=function(a){b.userFriendsSearch=!1,d.viewUserPhotos(a)},b.updateFacebookFriendsList=function(){b.facebookPhoto.viewDetail=!1,b.facebookPhoto.friendName="",d.showFriendsList()},d.attWidget=b.attWidget=function(a,c){var d={},e=0;for(var f in b.widgets)b.widgets[f].id===a&&(d=b.widgets[f],d.i=e=f);b.addWidgetForIndex(e,c)},b.showEditTitle=function(a){var c=b.widgets[a];c.editTitle=!0,c.newTitle=c.title},d.updatePosition=b.updatePosition=function(a){var b="/REST/UserWidget/SetPosition";c.post(b,a).success(function(a){a.status?console.log(a):console.log(a)}).error(function(a){console.log(a)})},b.submitTitle=function(a){var d=b.widgets[a],e="/REST/UserWidget/UpdateTitle",f="";d.editTitle=!1,f=d.title,d.title="Saving title...",c.post(e,{id:d.id,title:d.newTitle}).success(function(a){d.title=a.status?d.newTitle:f}).error(function(){d.title=f})},b.edit=function(a){d.edit={id:a.id,title:a.title}},b.loadedWidget=0,d.loadWidget=b.loadWidget=function(){b.loadedWidget++,b.widgets.length<=b.loadedWidget&&(b.wasLoaded=!0)}}]).controller("GoogleSearchCtrl",["$scope","$rootScope","$http","$sce","$location",function(a,b,c,d,e){b.forceNoWidgetsHide=!0,a.searchResult=[];var f="q",g=e.$$absUrl.toString();f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h=new RegExp("[\\?&]"+f+"=([^&#]*)"),i=h.exec(g);null==i?"":decodeURIComponent(i[1].replace(/\+/g," ")),c.get("/REST/GoogleSearch/"+i[1]+"?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){for(var c=$.parseJSON(b.response),e=0;e<c.responseData.results.length;e++)c.responseData.results[e].content=d.trustAsHtml(c.responseData.results[e].content);a.searchResult=c.responseData.results}).error(function(){})}]).controller("DeleteWidgetCtrl",["$scope","$rootScope","$http",function(a,b,c){a.feedbackDelete={},a.deleteConfirm=function(){a.feedbackDelete.msg="Deleting frame...",a.feedbackDelete.status=!0,$("ul.list-gridster li.box-column").each(function(a,c){if($(c).attr("data-widget")==b.deleteItem.id&&null!=b.$gridster){b.$gridster.remove_widget(c),b.repositionWidgets();var d=b.$gridster.serialize();b.updatePosition(d)}}),c.post("/REST/UserWidget/Delete/"+b.deleteItem.id).success(function(c){c.status?(a.feedbackDelete.msg="Frame deleted. Updating page...",a.feedbackDelete.status=!0,b.removeWidget(b.deleteItem),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):(a.feedbackDelete.msg=c.response,a.feedbackDelete.status=!1)}).error(function(b){a.feedbackDelete.msg=b.response,a.feedbackDelete.status=!1})}}]).controller("HeaderCtrl",["$window","$scope","$http","$rootScope","$injector","filterDash",function(a,b,c,d,e,f){b.$inject=["$scope","filterDash"],b.filterCategory=0,b.logout=function(){c.get("/REST/User/Logout?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(a){a.status&&(window.location.href="/")}).error(function(){})},b.getTrusteds=function(){b.trustedSource=_page.trustedSource},b.getTrusteds(),b.changeCategory=function(a){b.filterCategory=a,f.prepForBroadcast(a)},b.googleSearch=function(){$("#btnGoogleSearch").trigger("click")},b.addBookmark=function(){"sidebar"in a&&"addPanel"in a.sidebar?a.sidebar.addPanel(location.href,document.title,""):alert("Press "+(-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+" + D to bookmark this page.")}}]).controller("WeatherCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){a.weather={address:null!=a.$parent.widget.zipCode?a.$parent.widget.zipCode:"10001",lastUpdate:new Date,location:"",currentTemp:0,forecast:[],firstLoad:!0},a.loadWeather=function(){b.get("/REST/UserWidgetWeather/CurrentWeather/"+a.weather.address+"?WidgetId="+a.$parent.widget.id+"&m="+(new Date).getMilliseconds()).success(function(b){if(b.status){var c=$.parseJSON(b.response);a.weather.forecast=c.weather,a.weather.location=c.location,a.weather.currentTemp=a.weather.forecast[0].currentTemp,a.weather.lastUpdate=a.weather.forecast[0].dateWeatherLabel,a.weather.firstLoad&&(a.weather.firstLoad=!1,d.loadWidget())}else alert(b.response)}).error(function(){})},a.weather.firstLoad&&a.loadWeather()}]).controller("FacebookCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){a.facebookUserLogged=!1,a.facebookFeed=[],function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document),window.fbAsyncInit=function(){a.$apply(function(){FB.init({appId:_facebookAppId,status:!0,cookie:!0,xfbml:!0}),a.loadFacebookNewsFeed()})},a.facebookLogin=function(){FB.login(function(b){b.authResponse?a.loadFacebookNewsFeed():alert("Not Authorized")},{scope:"read_stream"})},a.processItemFeed=function(a){for(var b=a,c=[],d=0;d<b.length;d++){var e={nameFrom:"",url:"#",photo:"",message:"",id:0};void 0!=b[d].message&&(0!=b[d].id?(e.id=b[d].id,e.url="link"==b[d].type?"https://www.facebook.com/"+b[d].id:"status"==b[d].type?"https://www.facebook.com/"+b[d].id:"photo"==b[d].type?b[d].link:"https://www.facebook.com/"+b[d].id,e.photo="https://graph.facebook.com/"+b[d].from.id+"/picture"):e.photo=b[d].from.photo,e.nameFrom=b[d].from.name,e.message=b[d].message,c.push(e))}return c},a.loadFacebookNewsFeed=function(){if(a.widget.isDefault){if(""!=a.widget.token){a.wasLoaded=!1,a.facebookUserLogged=!0;var b=[];b.push({message:"Check your local weather in real time, just type your zip code or address into the Weather Frame.",id:0,from:{id:0,name:"Take 65",photo:"/Img/Default/take65-icon-34x34.png"}}),b.push({message:"Take 65 is your trusted source for security and simplicity on the web.",id:0,from:{id:0,name:"Take 65",photo:"/Img/Default/take65-icon-34x34.png"}}),b.push({message:"With the Social Media Photo feature you can access your family & friends' photos directly from your Take 65 dashboard.",id:0,from:{id:0,name:"Take 65",photo:"/Img/Default/take65-icon-34x34.png"}}),b.push({message:"Join Take 65 right now clicking on the top menu 'Join TAKE 65'",id:0,from:{id:0,name:"Take 65",photo:"/Img/Default/take65-icon-34x34.png"}}),a.facebookFeed=a.processItemFeed(b),a.wasLoaded=!0,d.$broadcast("dataloaded")}}else FB.getLoginStatus(function(b){"connected"===b.status?(a.wasLoaded=!1,a.facebookUserLogged=!0,FB.api("/me/home","get",function(b){a.$apply(function(){!b||b.error?(a.facebookUserLogged=!1,a.$broadcast("dataloaded")):(a.facebookFeed=a.processItemFeed(b.data),a.wasLoaded=!0,d.$broadcast("dataloaded"))})})):"not_authorized"===b.status&&alert("Not Authorized")})},d.loadWidget()}]).controller("FeedCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){a.wasLoaded=!1,void 0==_page.userWidgetFeed["items_"+a.widget.id]?b.get("/REST/UserWidgetFeedContent/"+a.widget.id+"/?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){b.length>0&&(a.highlight=b.shift(),a.highlight.description=c.trustAsHtml(a.highlight.description),a.feeds=b,d.loadWidget()),a.wasLoaded=!0}).error(function(){}):(a.highlight=_page.userWidgetFeed["items_"+a.widget.id].shift(),a.highlight.description=c.trustAsHtml(a.highlight.description),a.feeds=_page.userWidgetFeed["items_"+a.widget.id],d.loadWidget(),a.wasLoaded=!0),a.$on("ngRepeatFinished",function(){d.$broadcast("dataloaded"),a.$broadcast("callCarousel")})}]).controller("MoreFeedCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){a.widget={},a.widget.id=d.widgets.attrsClick.id,a.widget.count=10,a.widget.skip=0,a.loading=!1,a.hasMore=!1,a.statusLoad=!0,a.msgfeedback="",a.txtBtnMoreNews="More News",a.category=0,a.qFilter="",b.get("/REST/UserWidgetFeed/"+a.widget.id+"?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){a.widget.title=b.userWidget.title,b.trustedSource.length>0&&(delete a.trustedSource,a.trustedSource=b.trustedSource),a.widget.wasLoaded=!0,d.$broadcast("dataloaded")}).error(function(){}),a.getFeeds=function(c){a.loading=!0,a.txtBtnMoreNews="Loading...",a.widget.wasLoaded=!1,b.get("/REST/UserWidgetFeedContent/"+a.widget.id+"/"+a.widget.count+"/"+a.widget.skip+"/"+a.category+"/"+(""!==a.qFilter?a.qFilter:"")+"?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){a.hasMore=b.length<a.widget.count?!1:!0,a.feeds=c?a.feeds.concat(b):a.feeds=b,d.$broadcast("dataloaded"),a.loading=!1,a.txtBtnMoreNews="More News",a.widget.wasLoaded=!0}).error(function(){a.loading=!1,a.msgfeedback="Error, try again."})},a.loadMore=function(){a.loading||(a.widget.skip+=a.widget.count,a.getFeeds(!0))},a.setTrusted=function(b){a.widget.skip=0,a.category=b,a.getFeeds()},a.searchNews=function(){a.getFeeds()},a.getFeeds(!1)}]).controller("MyWebsiteCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){void 0==_page.userWidgetBookmark["items_"+a.widget.id]?b.get("/REST/UserWidgetBookmark/"+a.widget.id+"/?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){a.source=[].concat(_.map(b.trustedSource,function(a){return a.trusted=!0,a})).concat(_.map(b.source,function(a){return a.trusted=!1,a})).slice(0,8),d.$broadcast("dataloaded"),d.loadWidget(),a.widget.sourcesLength=b.trustedSource.length+b.source.length}).error(function(){}):(a.source=[].concat(_.map(_page.userWidgetBookmark["items_"+a.widget.id].trustedSource,function(a){return a.trusted=!0,a})).concat(_.map(_page.userWidgetBookmark["items_"+a.widget.id].source,function(a){return a.trusted=!1,a})).slice(0,8),d.$broadcast("dataloaded"),d.loadWidget(),a.widget.sourcesLength=_page.userWidgetBookmark["items_"+a.widget.id].trustedSource.length+_page.userWidgetBookmark["items_"+a.widget.id].source.length)}]).controller("MoreWebsiteCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){a.widget={},a.widget.id=d.widgets.attrsClick.id,a.widget.title=d.widgets[d.widgets.attrsClick.indexWidget].title,b.get("/REST/UserWidgetBookmark/"+a.widget.id+"?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){b.trustedSource.length>0&&(a.trustedSource=b.trustedSource),b.source.length>0&&(a.source=b.source),d.$broadcast("dataloaded")}).error(function(){})}]).controller("MyProfileCtrl",["$scope","$http","$rootScope",function(a,b,c){a.changePassword=!1,a.step=1,a.userPrefences=[],b.get("/REST/User/?m="+(new Date).getMilliseconds()).success(function(b){void 0!=b.id?a.user=b:window.location.href="/?SessionExpired"}).error(function(b){a.feedbackRegister.msg=b.response,a.feedbackRegister.status=!1}),a.setStep=function(b){var d=!0;switch(b){case 2:d=a.step2()}return d?(a.step=b,c.$broadcast("dataloaded"),void 0):!1},a.getChkId=function(a){var b=[];for(var c in a)a[c].chk&&b.push({id:a[c].id});return b},a.step2=function(){return a.register.$invalid?(a.register.showMessage=!0,!1):(b.get("/REST/UserPreference/?m="+(new Date).getMilliseconds()).success(function(b){b.length>0&&(a.userPrefences=b);var d=a.userPrefences;for(var e in d)for(var f in a.user.preference)d[e].id==a.user.preference[f].id&&(d[e].chk=!0);a.wasLoaded=!0,c.$broadcast("dataloaded")}).error(function(){}),!0)},a.userChangePassword=function(){a.changePassword=!a.changePassword,$.colorbox.resize()},a.submit=function(){var c={facebookId:"",login:"",password:"",name:"",email:"",birthdate:"",yearofbirth:"",gender:"",state:"",city:"",postalCode:"",preference:[]};a.user.preference=a.getChkId(a.userPrefences),a.user.categories=a.getChkId(a.categories),a.user.birthdate="",a.feedbackRegister={msg:"Updating user...",status:!0};var d=angular.extend(c,a.user);b.post("/REST/User/Update/",d).success(function(b){b.status?($.colorbox.close(),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):(a.feedbackRegister.msg=b.response,a.feedbackRegister.status=!1)}).error(function(b){a.feedbackRegister.msg=b.response,a.feedbackRegister.status=!1})}}]).controller("RegisterCtrl",["$scope","$http","$rootScope","gcfg",function(a,b,c,d){a.step=1,a.facebook={register:!1},console.log(d),a.user={email:a.newUseremail},""!=a.newUseremail&&(a.step=2);for(var e=(new Date).getFullYear(),f=e-100,g=[],h=parseInt(f);h<=parseInt(e);h++)g.push(h);a.byears=g,a.user.yearofbirth=e-65,a.clearFeedback=function(){a.google.feedback.msg="",a.facebook.feedback.msg=""},a.setStep=function(b){var d=!0;switch(b){case 2:d=a.step2();break;case 3:d=a.step3();break;case 4:d=a.step4()}return d?(a.step=b,c.$broadcast("dataloaded"),void 0):!1},a.getChkId=function(a){var b=[];for(var c in a)a[c].chk&&b.push({id:a[c].id});return b},a.step2=function(){return!0},a.step3=function(){return!a.register.$invalid||a.facebook.register||a.google.register?(b.get("/REST/UserPreference/?m="+(new Date).getMilliseconds()).success(function(b){b.length>0&&(a.userPrefences=b),a.wasLoaded=!0,c.$broadcast("dataloaded")}).error(function(){}),!0):(a.register.showMessage=!0,!1)},a.step4=function(){return b.get("/REST/TrustedSourceCategory/?m="+(new Date).getMilliseconds(),{cache:!1}).success(function(b){a.wasLoadedCategories=!0,b.length>0&&(a.categories=b),c.$broadcast("dataloaded")}).error(function(){}),!0},a.submit=function(){var c={facebookId:"",googleId:"",login:"",password:"",name:"",email:"",birthdate:"",yearofbirth:"",gender:"",state:"",city:"",postalCode:"",preference:[]};a.user.preference=a.getChkId(a.userPrefences),a.user.categories=a.getChkId(a.categories),a.user.email=a.register.email.$modelValue,a.feedbackRegister={msg:"Registering user...",status:!0};var d=angular.extend(c,a.user);b.post("/REST/User/",d).success(function(b){b.status?$("#openWizard").trigger("click"):(a.feedbackRegister.msg=b.response,a.feedbackRegister.status=!1)}).error(function(b){a.feedbackRegister.msg=b.response,a.feedbackRegister.status=!1})},a.registerGoogle=function(){console.log("register with google called..."),a.google={},a.google.feedback={},a.google.feedback.status=!0,a.google.feedback.msg="Authenticating on Google...",c.$broadcast("dataloaded");var e=!1;console.log("calling gapi.auth.singIn...."),gapi.auth.signIn({clientid:d.clientId,state:d.state,cookiepolicy:"single_host_origin",accesstype:"offline",responsetype:"code",approvalprompt:"auto",includegrantedscopes:"true",redirecturi:"postmessage",scope:d.scopes.plus+" "+d.scopes.me+" "+d.scopes.email+" "+d.scopes.profile,callback:function(c){e||("undefined"!=typeof c.code&&(e=!0),console.log("Aplication state :   ",d.state),console.log("in google singn callback on gapi.auth.signIn -- authresult..."),console.log("authresult --- ",c),console.log("authresult[status][method]----",c.status.method),console.log("autherization code ....",c.code),console.log("access tocken ....",c.access_token),console.log("post to /REST/User/RegisterGoogleAccount  params... state:   ",d.state,"authcode:  ",c.code),b.post("/REST/User/RegisterGoogleAccount",{state:d.state,authcode:c.code}).success(function(b){console.log("response received :  ",b.response),b.status?(a.setStep(2),a.user.googleId=d.state,a.google.register=!0,a.google.feedback.status=!0,a.google.feedback.msg=""):(console.log("Google account already registered...  REST response:   "+b.response),a.google.feedback.msg=b.response.length>0?b.response:"Google account already registered",a.google.feedback.status=!1)}).error(function(){console.log("FATAL ERROR -- google user could not be registered..."),a.google.feedback.msg="Google account is not available",a.google.feedback.status=!1}))}})},a.registerFacebook=function(){a.facebook={},a.facebook.feedback={},a.facebook.feedback.status=!0,a.facebook.feedback.msg="Authenticating on facebook...",c.$broadcast("dataloaded"),console.log("registerFacebook called...."),FB.login(function(c){if(c.authResponse){var d=c.authResponse;FB.api("/me",function(c){a.facebook.response=c,b.post("/REST/User/Check",{email:c.email}).success(function(e){if(console.log("/REST/User/Check .. response - ",e.response),e.status)b.post("/REST/User/CheckFacebook",{facebookId:c.id}).success(function(e){e.status?(a.setStep(2),a.user.email=a.facebook.response.email,a.user.facebookId=a.facebook.response.id,a.user.name=a.facebook.response.name,void 0!=a.facebook.response.location&&(a.user.city=a.facebook.response.location.name),a.user.gender=a.facebook.response.gender,a.facebook.register=!0):b.post("/REST/User/Login",{facebookId:c.id,facebookToken:d.accessToken}).success(function(b){b.status?(a.facebook.feedback.msg="Facebook Account Already Exists",window.location.href="/"):(a.facebook.feedback.status=!1,a.facebook.feedback.msg="Your Facebook account is not available at the moment.")}).error(function(){a.facebook.feedback.status=!1,a.facebook.feedback.msg="Your Facebook account is not available at the moment."})}).error(function(){alert("check facebook error"),a.facebook.feedback.status=!1,a.facebook.feedback.msg="Your Facebook account is not available at the moment."});else{var f=a.facebook.response.email+"  is already registered with take65";console.log(f),a.facebook.feedback.status=!1,a.facebook.feedback.msg=f}}).error(function(){var b="Error in checking user email take65";console.log(b),a.facebook.feedback.status=!1,a.facebook.feedback.msg=b})})}else a.facebook.feedback.status=!1,a.facebook.feedback.msg="You have canceled Facebook connection."},{scope:"email"})}}]).controller("SupportCtrl",["$scope","$http","$rootScope",function(a,b,c){a.feedbackStatus="error",a.isSending=!1,a.isFeedback=!1,a.feedbackMessage="",a.title="Support Request",a.userExists=!1,b.get("/REST/User/?m="+(new Date).getMilliseconds()).success(function(b){void 0!=b.id?(a.name=b.name,a.email=b.email,a.userExists=!0):(a.name="",a.email="",a.userExists=!1)}).error(function(b){a.msgError(b.response),c.$broadcast("dataloaded")}),a.submit=function(){a.isFeedback=!1,a.classStatus="",a.supportMessage="Sending mail...",a.isSending=!0,c.$broadcast("dataloaded");var d="/REST/User/SendSupportRequestEmail/"+a.name+"/"+a.email+"/"+a.subject+"/"+a.issue,e={name:a.name,email:a.email,subject:a.subject,issue:a.issue};b.post(d,e).success(function(b){b.status?"Issue submitted."==b.response&&(a.feedbackStatus="success",a.supportMessage="sent.",a.reloadHome=!0):a.msgError(b.response),c.$broadcast("dataloaded")}).error(function(b){a.msgError(b.response),c.$broadcast("dataloaded")})}}]).controller("GetToKnowAboutSiteCtrl",["$scope","$http","$rootScope","gcfg",function(a,b,c){a.title="Join Take 65 for Free",a.newUseremail="",a.login=a.newUseremail,a.regsterEmail=function(){b.post("/REST/User/RegisterNewUserEmail",{email:a.newUseremail}).success(function(){c.$broadcast("dataloaded")}).error(function(b){a.msgError(b.response),c.$broadcast("dataloaded")})}}]).controller("LoginCtrl",["$scope","$http","$rootScope","gcfg",function(a,b,c,d){a.feedbackStatus="error",a.isSending=!1,a.isFeedback=!1,a.feedbackMessage="",a.forgotPass=!1,a.forgotPasswordValid=!0,a.title="Login TAKE 65",console.log("LoginCtrl ctr.......   "),a.login=a.newUseremail,a.setForgotPass=function(b){a.forgotPass=b,c.$broadcast("dataloaded"),a.title=b?"Resend your password":"Login Take 65"},a.forgotPassword=function(){a.isFeedback=!1,a.isSendingForgot=!0,a.feedbackStatusForgot="success",a.forgotMessage="Sending data...",b.post("REST/User/ForgotPassword",{email:a.loginForgot}).success(function(b){b.status?(a.forgotMessage="",a.feedbackMessage="Your new password was sent to "+a.loginForgot+". Please, check your email.",a.isFeedback=!0,a.setForgotPass(!1)):(a.feedbackStatusForgot="error",a.forgotMessage=b.response),c.$broadcast("dataloaded")}).error(function(b){a.feedbackStatusForgot="error",a.forgotMessage=b.response,c.$broadcast("dataloaded")})},a.loginFacebook=function(){a.isFeedback=!1,a.facebookSending=!0,a.facebookMessage="Sending data...",a.feedbackFacebook="success",c.$broadcast("dataloaded"),FB.login(function(d){if(d.authResponse){a.facebookMessage="Authenticated user.";var e=d.authResponse;c.$broadcast("dataloaded"),FB.api("/me",function(d){a.facebookMessage="Loading user information...",b.post("/REST/User/Login",{facebookId:d.id,facebookToken:e.accessToken}).success(function(b){b.status?(a.facebookMessage="Logged",window.location.href="/",a.reloadHome=!0):(a.feedbackFacebook="error",a.facebookMessage=b.response),c.$broadcast("dataloaded")}).error(function(b){a.feedbackFacebook="error",a.facebookMessage=b.response,c.$broadcast("dataloaded")})})}else a.feedbackFacebook="error",a.facebookMessage="You have canceled Facebook connection.",c.$broadcast("dataloaded")},{scope:"email,read_friendlists,user_photos,friends_photos"})},a.loginGoogle=function(){a.isFeedback=!1,a.googleSending=!0,a.googleMessage="Sending data...",a.feedbackGoogle="success",c.$broadcast("dataloaded");var e=!1;console.log("calling gapi.auth.singIn...."),gapi.auth.signIn({clientid:d.clientId,state:d.state,cookiepolicy:"single_host_origin",accesstype:"offline",responsetype:"code",approvalprompt:"auto",includegrantedscopes:"true",redirecturi:"postmessage",scope:d.scopes.plus+" "+d.scopes.me+" "+d.scopes.email+" "+d.scopes.profile,callback:function(f){e||("undefined"!=typeof f.code&&(e=!0),console.log("Aplication state :   ",d.state),console.log("in google singn callback on gapi.auth.signIn -- authresult..."),console.log("authresult --- ",f),console.log("authresult[status][method]----",f.status.method),console.log("autherization code ....",f.code),console.log("access tocken ....",f.access_token),f.access_token&&gapi.client.load("plus","v1",function(){gapi.client.plus.people.get({userId:"me"}).execute(function(d){console.log("response received  : ",d),console.log("google userid :    ",d.id),b.post("/REST/User/Login",{googleId:d.id}).success(function(b){b.status?(a.googleMessage="Logged, loading preferences...",window.location.href="/",a.reloadHome=!0):(a.feedbackGoogle="error",a.googleMessage=b.response),c.$broadcast("dataloaded")}).error(function(b){a.feedbackGoogle="error",a.googleMessage=b.response,c.$broadcast("dataloaded")})})}))}})},a.submit=function(){a.isFeedback=!1,a.classStatus="",a.loginMessage="Sending data...",a.isSending=!0,c.$broadcast("dataloaded"),b.post("/REST/User/Login",{email:a.login,password:a.password}).success(function(b){b.status?"Change Password"==b.response?(a.password="",$("#openChangePassword").trigger("click")):(a.feedbackStatus="success",a.loginMessage="OK.",a.reloadHome=!0):a.msgError(b.response),c.$broadcast("dataloaded")}).error(function(b){a.msgError(b.response),c.$broadcast("dataloaded")})},a.changePassword=function(){a.isFeedback=!1,""!=a.password&&(a.password!=a.password2?(a.loginMessage="Your password does not match",a.isSending=!1):(a.classStatus="",a.loginMessage="Sending data...",a.isSending=!0,b.post("/REST/User/UpdatePassword",{password:a.password}).success(function(b){b.status?(a.feedbackStatus="success",a.loginMessage="OK.",a.reloadHome=!0):a.msgError(b.response),c.$broadcast("dataloaded")}).error(function(b){a.msgError(b.response),c.$broadcast("dataloaded")})))},a.msgError=function(b){a.feedbackStatus="error",a.loginMessage=b}}]).controller("AddNewWidgetCtrl",["$timeout","$scope","$http","$rootScope",function(a,b,c,d){b.hasLoad=!1,d.edit=void 0,b.hasValidFacebookToken=!1,b.isSocialMediaExists=!1,c.get("/REST/UserWidgetFacebookPhotos/GetToken?m="+(new Date).getMilliseconds()).success(function(a){b.hasValidFacebookToken=a.status,a.status&&(d.facebookToken=a.response)}).error(function(){b.hasValidFacebookToken=!1}),b.VerifyForSocialMediaFrame=function(){b.isSocialMediaExists=!0,a(function(){$.colorbox.resize({width:$(".hold-modal").width()+50})},100)},b.addTravel=function(){b.hasLoad=!0,d.$broadcast("dataloaded"),b.loadMsg="Creating a frame...",c.post("/REST/UserWidgetBookmark/Travel/").success(function(a){a.status?(b.loadMsg="Frame created, please wait...",d.addWidgetLast(a.response),b.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):b.loadMsg=a.response}).error(function(){})},b.addFacebook=function(){b.hasLoad=!0,d.$broadcast("dataloaded"),b.loadMsg="Creating a frame...",c.post("/REST/UserWidgetFacebook/").success(function(a){a.status?(b.loadMsg="Frame created, please wait...",d.addWidgetLast(a.response),b.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):b.loadMsg=a.response}).error(function(){})},b.addFacebookPhotos=function(){b.hasLoad=!0,b.loadMsg="Creating a frame...",d.$broadcast("dataloaded"),c.post("/REST/UserWidgetFacebookPhotos/").success(function(a){a.status?(d.addWidgetFirst(a.response),d.$broadcast("dataloaded"),b.loadMsg="Frame created, please wait...",b.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):(b.$broadcast("closeColorbox"),$("#closeModal").trigger("click"))}).error(function(){})},b.addWeather=function(){b.hasLoad=!0,d.$broadcast("dataloaded"),b.loadMsg="Creating a frame...",c.post("/REST/UserWidgetWeather/").success(function(a){a.status?(b.loadMsg="Frame created, please wait...",d.addWidgetLast(a.response),b.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):b.loadMsg=a.response
}).error(function(){})}}]).controller("FacebookLoginCtrl",function(){}).controller("FacebookPhotosCtrl",["$scope","$http","$sce","$rootScope",function(a,b,c,d){a.hasLoad=!1,a.hasValidFacebookToken=!1,a.photos=[],a.userFriends=[],a.friendsSearch=[],a.highlightFriend={id:0,photoCount:0,name:""},a.currentPage=0,a.pageSize=10,d.userFriends=[],d.userFriendsSearch=[],a.checkFacebookToken=function(c){b.get("/REST/UserWidgetFacebookPhotos/GetToken?m="+(new Date).getMilliseconds()).success(function(b){a.hasValidFacebookToken=b.status,b.status&&(d.facebookToken=b.response,a.loadUserFriends(c))}).error(function(){a.hasValidFacebookToken=!1})},a.loadUserFriends=function(c){b.get("/REST/UserWidgetFacebookPhotos/UserFriends?m="+(new Date).getMilliseconds()).success(function(b){b.length>0?(a.photos=[],d.userFriends=b.slice(0),a.userFriends=b,a.highlightFriend={id:0,photoCount:0,name:""},d.$broadcast("dataloaded")):(a.userFriends=[],a.highlightFriend={id:0,photoCount:0,name:""},c&&setTimeout(function(){$("#lnk-edit-facebook-photo").trigger("click")},1e3))}).error(function(){})},d.viewUserPhotos=a.viewUserPhotos=function(c){a.currentPage=0,null==c.photos?(a.hasLoad=!0,b.get("/REST/UserWidgetFacebookPhotos/FacebookPhotos/"+c.id+"?m="+(new Date).getMilliseconds()).success(function(b){if(a.hasLoad=!1,b.length>0){a.currentUser=c,a.photos=b,c.photos=b;var e=c.photoCount!=b.length;c.photoCount=b.length,a.facebookPhoto.friendName=c.name,a.facebookPhoto.viewDetail=!0;for(var f in a.userFriends)a.userFriends[f].id==c.id&&(a.userFriends[f].photos=c.photos,a.userFriends[f].photoCount=c.photos.length,e&&a.saveFriends());d.$broadcast("dataloaded")}}).error(function(){alert("facebook photos error")})):(a.currentUser=c,a.photos=c.photos,a.facebookPhoto.friendName=c.name,a.facebookPhoto.viewDetail=!0,d.$broadcast("dataloaded"))},a.saveFriends=function(){b.post("/REST/UserWidgetFacebookPhotos/SaveFriends",a.userFriends).success(function(){})},d.rebind=function(){d.$broadcast("dataloaded")},d.updateFacebookFriendsList=a.updateFacebookFriendsList=function(){a.loadUserFriends(!1)},d.showFriendsList=a.showFriendsList=function(){a.photos=[]},a.facebookLogin=function(){FB.login(function(c){c.authResponse&&b.post("/REST/UserWidgetFacebookPhotos/SetToken",{facebookToken:c.authResponse.accessToken}).success(function(b){b.status&&a.checkFacebookToken(!0),d.$broadcast("dataloaded")}).error(function(){})},{scope:"email,read_friendlists,user_photos,friends_photos"})},d.loadWidget(),a.checkFacebookToken(!1),d.$broadcast("dataloaded")}]).controller("FacebookPhotoDetailCtrl",function(){}).controller("FacebookPhotosManageFriendsCtrl",function(a,b,c){a.facebookPhoto={friendName:"",viewDetail:!1},a.userFriends=c.userFriends.slice(0),a.facebookFriends=[],a.facebookFriendsFilter=[],a.friendSearch={keywork:""},a.loadFacebookFriends=function(){b.get("/REST/UserWidgetFacebookPhotos/FacebookFriends?m="+(new Date).getMilliseconds()).success(function(b){if(b.length>0){a.facebookFriends=b;for(var c in a.facebookFriends)for(var d in a.userFriends)a.facebookFriends[c].id==a.userFriends[d].id&&(a.facebookFriends[c].chk=!0);a.facebookFriendsFilter=a.facebookFriends.slice(0)}else a.facebookFriends=[]}).error(function(){})},a.loadFacebookPhotos=function(c){-1==c.photoCount?(c.verifing=!0,b.get("/REST/UserWidgetFacebookPhotos/FacebookPhotos/"+c.id+"?m="+(new Date).getMilliseconds()).success(function(b){if(c.verifing=!1,b.length>0){a.userFriends.push(c);for(var d in a.userFriends)a.userFriends[d].id==c.id&&(a.userFriends[d].photos=b,a.userFriends[d].photoCount=b.length);for(var d in a.facebookFriends)a.facebookFriends[d].id==c.id&&(a.facebookFriends[d].photos=b,a.facebookFriends[d].photoCount=b.length)}else alert("This user selected to not share their Facebook photos. Please, select a different user."),c.photoCount=0,c.chk=!1}).error(function(){})):c.photoCount>0?a.userFriends.push(o):(alert("This user selected to not share their Facebook photos. Please, select a different user."),c.chk=!1)},a.findFriend=function(){a.facebookFriendsFilter=a.facebookFriends.slice(0),a.facebookFriendsFilter=_.filter(a.facebookFriendsFilter,function(b){return b.name.toLowerCase().slice(0,a.friendSearch.keywork.length)==a.friendSearch.keywork.toLowerCase()})},a.removeFriend=function(b,c){if(-1!=b)a.userFriends.splice(b,1);else for(var d in a.userFriends)a.userFriends[d].id==c&&a.userFriends.splice(d,1);for(var d in a.facebookFriends)a.facebookFriends[d].id==c&&(a.facebookFriends[d].chk=!1)},a.addFriend=function(b){b.chk?a.loadFacebookPhotos(b):a.removeFriend(-1,b.id)},a.loadFacebookFriends(),a.saveFriends=function(){b.post("/REST/UserWidgetFacebookPhotos/SaveFriends",a.userFriends).success(function(b){b.status?(a.facebookPhoto.viewDetail=!1,a.facebookPhoto.friendName="",c.updateFacebookFriendsList(),$.colorbox.close(),"User already have Facebook Photos Frame"!=b.response&&c.addWidgetFirst(b.response),c.$broadcast("dataloaded"),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):(a.$broadcast("closeColorbox"),$("#closeModal").trigger("click"))}).error(function(){})}}).controller("AddNewWidget.FeedCtrl",["$scope","$http","$rootScope","$element","$compile",function(a,b,c,d){var e=void 0!==c.edit?!0:!1;a.typeWidget=d.data("typewidget"),a.clickSubmit=!0,a.step=1,a.checkeds={},a.checkeds.categories=[],a.checkeds.trustedSource=[],a.feedback={status:"error",msg:""},a.validation={msg:""};var f=e?"/REST/TrustedSourceCategory/EditUserWidgetNews/"+c.edit.id:"/REST/TrustedSourceCategory/"+a.typeWidget+"?m="+(new Date).getMilliseconds();b.get(f,{cache:!1}).success(function(b){b.length>0&&(a.categories=b,a.changeAll={id:0,title:"Select All",image:"",chk:!1}),e&&a.checkItens(),a.$broadcast("dataloaded"),a.$watch("$compile",function(){a.$broadcast("dataloaded")})}).error(function(){}),a.checkItens=function(){for(var b in a.categories)for(var c=0;c<a.categories[b].trustedSource.length;c++)a.categories[b].trustedSource[c].chk&&(a.categories[b].chk=!0)};var g=function(b,d){a.feedback.status=b,a.feedback.msg=d,c.$broadcast("dataloaded")};a.postCategories=function(){if(a.clickSubmit=!1,!e){if(void 0==a.widget)return a.validation.msg="Please type a frame name to continue",a.clickSubmit=!0,!1;if(""==a.widget.title)return a.clickSubmit=!0,a.validation.msg="Please type a frame name to continue",!1;a.validation.msg=""}console.log(a.getCheckeds(a.categories)),a.postTrusteds()},a.postTrusteds=function(){if(a.clickSubmit=!1,!e){if(void 0==a.widget)return a.validation.msg="Please type a frame name to continue",a.clickSubmit=!0,!1;if(""==a.widget.title)return a.clickSubmit=!0,a.validation.msg="Please type a frame name to continue",!1;a.validation.msg=""}if(g("success","Sending data..."),!e){c.repositionWidgets();var d=c.$gridster.serialize();c.updatePosition(d)}b.post("/REST/UserWidgetFeed/"+(e?c.edit.id:""),{title:a.widget.title,category:a.getCheckeds(a.categories)}).success(function(b){b.status?e?($(".list-gridster .box-column").each(function(a,b){$(b).attr("data-widget")==c.edit.id&&c.$gridster.remove_widget(b)}),LoadBehaviorCaller["dataload-"+c.edit.id]=void 0,_page.userWidgetFeed["items_"+c.edit.id]=void 0,c.attWidget(c.edit.id,b.response),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click"),c.loadDragWidgets(c.edit.id)):(c.addWidgetFirst(b.response),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click")):a.messageFeedback="Error, try again."}).error(function(){})},a.changeChecked=function(b){b.chk=!b.chk,a.changeAll.chk=a.getCheckeds(a.categories).length===a.categories.length},a.getCheckeds=function(a){var b=[];for(var c in a){var d=a[c];d.chk&&b.push({id:d.id})}return b},a.changeAllCategories=function(b){a.checkeds.categories=[],b.chk=!b.chk;for(var c in a.categories)a.categories[c].chk=b.chk,b.chk&&a.checkeds.categories.push({id:a.categories[c].id})},a.changeStep=function(b){return 1===b?(a.step=1,c.$broadcast("dataloaded"),void 0):2===b?a.clickStep2?!1:(a.clickStep2=!0,a.checkeds.categories=a.getCheckeds(a.categories),a.checkeds.categories.length>0?a.postCategories():(g("error","Please select at least one category."),a.clickStep2=!1),void 0):void 0},a.submitAdd=function(){g("",""),a.checkeds.categories=a.getCheckeds(a.categories),a.checkeds.categories.length>0?a.postCategories():g("error","Please select at least one category.")},a.submit=function(){g("",""),a.checkeds.trustedSource=a.getCheckeds(a.trustedSource),a.checkeds.trustedSource.length>0?a.postTrusteds():(g("error","Please select at least one resources."),a.clickSubmit=!0)},a.submitInRegister=function(){g("",""),a.checkeds.trustedSource=a.getCheckeds(a.trustedSource),a.postTrustedsInRegister()},a.postTrustedsInRegister=function(){if(g("success","Sending data, please wait..."),a.ajaxController=a.getCheckeds(a.categories).length,a.ajaxController>0){for(var d=[],e=a.getCheckeds(a.categories),f=0;f<e.length;f++)for(var h=0;h<a.categories.length;h++)if(e[f].id==a.categories[h].id)for(var i=0;i<a.categories[h].trustedSource.length;i++){for(var j=!1,k=0;k<d.length;k++)d[k].id==a.categories[h].trustedSource[i].id&&(j=!0);j||d.push({id:a.categories[h].trustedSource[i].id})}b.post("/REST/UserWidgetFeed",{title:"News",category:a.getCheckeds(a.categories),trustedSource:d}).success(function(b){b.status?a.$parent.nextCustomStep():(a.messageFeedback="Error, try again.",c.$broadcast("dataloaded"))}).error(function(){})}else a.$parent.nextCustomStep()}}]).controller("AddNewWidget.MyWebsiteCtrl",["$timeout","$scope","$http","$rootScope","$element",function(a,b,c,d){var e=void 0!==d.edit?!0:!1;b.websites=[],b.trustedWebsites={},b.trusted={},b.trusted.trustedSourceSelected=[],b.feedback={status:"error",msg:""},b.validation={msg:""},b.clickSubmit=!0,b.confirmTrusted=!1,b.listTrustedCustom={},d.websitesCategories=[],b.$broadcast("dataloaded"),b.getTrusteds=function(){var e="/REST/TrustedSourceCategory/?m="+(new Date).getMilliseconds();b.listTrusted=[],b.listSources=[],b.category={},c.get(e,{cache:!1}).success(function(c){if(c.length>0){b.listTrusted=c,d.websitesCategories=c,b.$parent.cListTrusted=c.length,b.category.selected=b.listTrusted[0].id;for(var e in b.listTrusted)b.trustedWebsites[e]=[]}a(function(){$.colorbox.resize({width:"85%"})},500)}).error(function(){})},b.getEditTrusteds=function(){var e="/REST/TrustedSourceCategory/EditUserWidgetBookmark/"+d.edit.id+"?m="+(new Date).getMilliseconds();b.listTrusted=[],b.listSources=[],b.category={},b.widget=d.edit,d.deleteItem={id:b.widget.id},c.get(e,{cache:!1}).success(function(c){if(c.length>0){for(var d=[],e=-1,f=0;f<c.length;f++)if(0!=c[f].id){if(d.push(c[f]),-1==e)for(var g=0;g<c[f].trustedSource.length;g++)c[f].trustedSource[g].chk&&(e=f)}else for(var h=0;h<c[f].trustedSource.length;h++)b.websites.push({title:c[f].trustedSource[h].title,link:c[f].trustedSource[h].link});b.listTrusted=d,b.$parent.cListTrusted=d.length,e=-1==e?0:e,b.category.selected=b.listTrusted[e].id;for(var i in b.listTrusted)b.trustedWebsites[i]=[];b.setTrustedsChecked()}a(function(){$.colorbox.resize({width:"85%"})},500)}).error(function(){})},b.addWebsite=function(){b.websites.push({title:b.newWebsite.title,link:b.newWebsite.link}),b.newWebsite.title="",b.newWebsite.link="",b.setConfirmTrusted(!1),a(function(){$.colorbox.resize({width:"85%"})},500)},b.addWebsiteInCategory=function(a){b.trustedWebsites[a].push({title:b.newWebsite.title,link:b.newWebsite.link}),b.newWebsite.title="",b.newWebsite.link="",b.setConfirmTrusted(!1),d.$broadcast("dataloaded"),$(".list-dashboard .content").animate({scrollTop:$(".list-dashboard .content")[0].scrollHeight},400)},b.setConfirmTrusted=function(a){a?c.post("/REST/SafeWebsite",{url:b.newWebsite.link}).success(function(c){c.status?(b.addWebsite(),b.confirmTrusted=!1):b.confirmTrusted=a}).error(function(){b.confirmTrusted=a}):b.confirmTrusted=a},b.setConfirmTrustedInCategory=function(a,d){a?c.post("/REST/SafeWebsite",{url:b.newWebsite.link}).success(function(c){c.status?(b.addWebsiteInCategory(d),b.confirmTrusted=!1):b.confirmTrusted=a}).error(function(){b.confirmTrusted=a}):b.confirmTrusted=a},b.selectCategory=function(b,c){b.selected=c,a(function(){$.colorbox.resize({height:$(".hold-modal").height()+75})},200)},b.changeSource=function(c){c.chk=!c.chk,$(".list-dashboard .content").animate({scrollTop:$(".list-dashboard .content")[0].scrollHeight},400),c.chk?b.trusted.trustedSourceSelected.push(c):b.trusted.trustedSourceSelected.splice(b.trusted.trustedSourceSelected.indexOf(c),1),a(function(){$.colorbox.resize({width:"85%"})},500)},b.setTrustedsChecked=function(){for(var a in b.listTrusted)for(var c in b.listTrusted[a].trustedSource)b.listTrusted[a].trustedSource[c].chk&&b.trusted.trustedSourceSelected.push(b.listTrusted[a].trustedSource[c])},b.changeSourceInCategory=function(a,c){b.trusted.trustedSourceSelected[a]=b.trusted.trustedSourceSelected[a]||[],c.chk=!c.chk,$(".list-dashboard .content").animate({scrollTop:$(".list-dashboard .content")[0].scrollHeight},400),c.chk?b.trusted.trustedSourceSelected[a].push(c):b.trusted.trustedSourceSelected[a].splice(a,1),d.$broadcast("dataloaded")},b.deleteWebsite=function(a){b.websites.splice(a,1)},b.deleteWebsiteInCategory=function(a,c){b.trustedWebsites[c].splice(a,1)},b.toggleCustomWebsite=function(){b.customWebsiteDisplay=!b.customWebsiteDisplay,d.$broadcast("dataloaded")},b.closeModal=function(){b.$broadcast("closeColorbox"),$("#closeModal").trigger("click")},b.submit=function(){if(!e){if(void 0==b.widget)return b.validation.msg="Please type a frame name to continue",!1;if(""==b.widget.title)return b.validation.msg="Please type a frame name to continue",!1;b.validation.msg=""}var a="/REST/UserWidgetBookmark/"+(e?"Edit/"+d.edit.id:"");b.clickSubmit=!1,b.feedback.status="success",b.feedback.msg="Sending data...";var f={title:e?d.edit.title:b.widget.title,trustedSource:b.trusted.trustedSourceSelected.concat(b.websites)};if(!e&&(null!=d.repositionWidgets()&&d.repositionWidgets(),null!=d.$gridster)){var g=d.$gridster.serialize();d.updatePosition(g)}c.post(a,f).success(function(a){a.status?(b.feedback.msg="OK",e?($(".list-gridster .box-column").each(function(a,b){$(b).attr("data-widget")==d.edit.id&&null!=d.$gridster&&d.$gridster.remove_widget(b)}),LoadBehaviorCaller["dataload-"+d.edit.id]=void 0,_page.userWidgetBookmark["items_"+d.edit.id]=void 0,d.attWidget(d.edit.id,a.response),d.loadDragWidgets(d.edit.id)):d.addWidgetLast(a.response),b.$broadcast("closeColorbox"),$("#closeModal").trigger("click"),location.reload()):(b.feedback.msg=a.response,b.clickSubmit=!0)}).error(function(a){b.feedback.msg=a.response,b.clickSubmit=!0})},b.submitInCategory=function(){b.cSelecteds=0,b.clickSubmit=!1,b.feedback.status="success",b.selectedsCategories=[];for(var a in b.trusted.trustedSourceSelected)b.selectedsCategories[a]=[],b.selectedsCategories[a]=b.trusted.trustedSourceSelected[a];for(var e in b.trustedWebsites)b.trustedWebsites[e].length>0&&(b.selectedsCategories[e]=b.selectedsCategories[e]||[],b.selectedsCategories[e]=b.selectedsCategories[e].concat(b.trustedWebsites[e]));for(var f in b.selectedsCategories){for(var g="Websites",h=0;h<b.listTrusted.length;h++)b.selectedsCategories[f][0].categoryId==b.listTrusted[h].id&&(g=b.listTrusted[h].title);b.cSelecteds++;var i={title:g,trustedSource:b.selectedsCategories[f]};c.post("/REST/UserWidgetBookmark/",i).success(function(a){a.status?b.feedback.msg="Creating frames...":(b.feedback.msg=a.response,b.clickSubmit=!0),d.$broadcast("dataloaded"),b.cSelecteds--,0===b.cSelecteds&&(window.location.href="/?InviteYourFriends")}).error(function(a){b.feedback.msg=a.response,b.clickSubmit=!0,b.cSelecteds--,0===b.cSelecteds&&(window.location.href="/?InviteYourFriends")})}0===b.selectedsCategories.length&&(window.location.href="/?InviteYourFriends")},e?b.getEditTrusteds():b.getTrusteds()}]).controller("InviteFriends",["$scope","$http","$rootScope","$element","$timeout","$window","authcfg",function(a,b,c,d,e,f,g){a.title="Invite your Friends",a.step=1,a.listEmails=[],a.firstAccess=!1,console.log("live yahoo auth details :    ",g),c.firstAccess&&(a.firstAccess=!0,c.firstAccess=!1),a.goStep=function(b){a.step=b},a.finishRegistration=function(){$.colorbox.close(),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click")},a.addIndividual=function(){if(a.addIndividualEmail.$valid){var b=a.emailIndividual.split(","),c=[];for(var d in b)c.push({email:b[d]});a.invite(c,function(b){b.status?(a.classIndividualFeedback="success",a.msgIndividualFeedback="Your invite was sent successfully."):(a.classIndividualFeedback="error",a.msgIndividualFeedback=b.response)}),a.emailIndividual="",a.classIndividualFeedback="success",a.msgIndividualFeedback="Inviting your friend..."}},a.loginGmail=function(){a.feedbackStatus="success",a.loginMessage="Sending data...",c.$broadcast("dataloaded"),b.get("/REST/Invite/Gmail/"+a.login+"/"+a.password+"?m="+(new Date).getMilliseconds()).success(function(b){b.status||b.length>0?(a.loginMessage="OK.",a.title="Select your Friends",a.friends=b,a.friendsFilter=a.friends,a.goStep(3)):(a.feedbackStatus="error",a.loginMessage=b.response),c.$broadcast("dataloaded")}).error(function(b){a.feedbackStatus="error",a.loginMessage=b})},a.handleGmailAuthResult=function(c){c&&!c.error&&b.jsonp("https://www.google.com/m8/feeds/contacts/default/full",{params:{"max-results":"999",access_token:c.access_token,alt:"json",callback:"JSON_CALLBACK"}}).success(function(b){b.feed&&b.feed.entry&&b.feed.entry.length?(a.friends=_.compact(_.map(b.feed.entry,function(a){for(en in a.gd$email)if(entry=a.gd$email[en],"true"==entry.primary)return{email:entry.address,name:a.title.$t||entry.address}})),a.friendsFilter=a.friends,a.loginMessage="OK.",a.$parent.title="Select your Friends",a.goStep(3)):(a.friends=[],a.friendsFilter=a.friends,a.loginMessage="OK.",a.title="Not found",a.inviteMessage="You don't have friends on this account",a.goStep(4)),e($.colorbox.resize,500),a.hasLoad=!1})},a.getGmailContacts=function(){a.hasLoad=!0,gapi.auth.authorize({client_id:_googleConfig.clientId,scope:[_googleConfig.scopes.contacts,_googleConfig.scopes.plus],immediate:!1},a.handleGmailAuthResult)},a.findFriend=function(){a.friendSearch.keywork.length>2?(a.friendsFilter=a.friends.slice(0),a.friendsFilter=_.filter(a.friendsFilter,function(b){return void 0!=b.name&&b.name.length>a.friendSearch.keywork.length?b.name.toLowerCase().slice(0,a.friendSearch.keywork.length)==a.friendSearch.keywork.toLowerCase():void 0})):a.friendsFilter=a.friends},a.getOutlookContacts=function(){console.log("getOutlookContacts called..."),a.hasLoad=!0;var b="windows",c="me/contacts";document.getElementById("list"),hello.login(b,{scope:"friends",force:!0},function(d){return!d||d.error?(console.log("Signin aborted"),a.hasLoad=!1,void 0):(hello(b).api(c,{limit:1e3},function(b){void 0!=b.data?(a.friends=_.compact(_.map(b.data,function(a){return void 0!=a.email?{email:a.email,name:a.name}:void 0})),a.friendsFilter=a.friends,a.loginMessage="OK.",a.$parent.title="Select your Friends",a.goStep(3),a.hasLoad=!1):(a.friends=[],a.friendsFilter=a.friends,a.loginMessage="OK.",a.title="Not found",a.inviteMessage="You don't have friends on this account",a.goStep(4),e($.colorbox.resize,500),a.hasLoad=!1)}),void 0)})},a.invite=function(a,d){var e=a;d=d||function(){},b.post("/REST/Invite/",e).success(function(a){d(a),c.$broadcast("dataloaded")}).error(function(a){d(a)})},a.inviteAllFriends=function(){for(var b in a.friends)a.friends[b].chk=!0;a.inviteFriends()},a.inviteFriends=function(){var b=a.getCheckeds();a.msgSendInvite="Inviting your friends...",a.feedbackSendStatus="success",c.$broadcast("dataloaded"),a.invite(b,function(b){b.status?(a.title="Invite your Friends",a.inviteMessage="Your friends were invited successfully.",a.$parent.goStep?a.$parent.goStep(4):a.goStep&&a.goStep(4)):(a.feedbackSendStatus="error",a.msgSendInvite=b.response),c.$broadcast("dataloaded")})},a.getCheckeds=function(){return _.filter(a.friends,function(a){return a.chk})},a.getauthnonce=function(){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",b="",c=0;10>c;++c){var d=Math.floor(Math.random()*a.length);b+=a.substring(d,d+1)}return b},a.getauthtimestamp=function(){var a=(new Date).getTime();return Math.floor(a/1e3)},a.getYahooContacts=function(){console.log("getyahoocontacts called...."),a.hasLoad=!0;var d={token:"abc",email:"a@a.com"};b.get("/rest/Yahoo",{params:d}).success(function(b){b?(a.userEmailFeed=c.userEmailFeed=b,c.$broadcast("dataloaded"),a.userHasEmailAccount=!0,a.wasLoaded=!0):a.userHasEmailAccount=!1});var f="yahoo",g="me/friends";document.getElementById("list"),hello.login(f,{scope:"friends",force:!0},function(b){return!b||b.error?(console.log("Signin aborted"),a.hasLoad=!1,void 0):(hello(f).api(g,{limit:1e3},function(b){void 0!=b.data?(a.friends=_.compact(_.map(b.data,function(a){return void 0!=a.email?{email:a.email,name:a.name}:void 0})),a.friendsFilter=a.friends,a.loginMessage="OK.",a.$parent.title="Select your Friends",a.goStep(3),a.hasLoad=!1):(a.friends=[],a.friendsFilter=a.friends,a.loginMessage="OK.",a.title="Not found",a.inviteMessage="You don't have friends on this account",a.goStep(4),e($.colorbox.resize,500),a.hasLoad=!1)}),void 0)})}}]).directive("ngLastRepeat",function(){return function(a){a.$last&&setTimeout($.colorbox.resize,500)}}).controller("CustomizeHomepageCtrl",["$scope","$http","$rootScope","$timeout",function(a,b,c,d){a.customStep=0,a.custom={},a.custom.mywebsite={},a.custom.mywebsite.step=0,a.currentCategory="Entertainment",c.currentCategoryIndex=0,a.refreshPage=function(){window.window.location.href="/?InviteYourFriends"},a.setCustomStep=function(b){2==b&&$.colorbox.resize({width:"75%"}),a.customStep=b,c.$broadcast("dataloaded"),a.$watch("$compile",function(){c.$broadcast("dataloaded")})},a.resizeModal=function(){$.colorbox.resize({width:"910px"})},a.nextCustomStep=function(){a.setCustomStep(a.customStep+1)},a.prevCustomStep=function(){a.setCustomStep(a.customStep-1)},a.defaultHomepage=function(){b.post("/REST/UserWidget/CreateDefault",{cache:!1}).success(function(){a.refreshPage()}).error(function(){})},a.custom.mywebsite.selectCategory=function(b){a.currentCategory=c.websitesCategories[b].title,c.currentCategoryIndex=b,a.custom.mywebsite.step=b,d(function(){$.colorbox.resize({height:$(".hold-modal").height()+75})},200)},a.custom.mywebsite.nextStep=function(){a.custom.mywebsite.step++,a.currentCategory=c.websitesCategories[a.custom.mywebsite.step].title,d(function(){$.colorbox.resize({height:$(".hold-modal").height()+75})},200)},a.custom.mywebsite.prevStep=function(){a.custom.mywebsite.step--,a.currentCategory=c.websitesCategories[a.custom.mywebsite.step].title,d(function(){$.colorbox.resize({height:$(".hold-modal").height()+75})},200)},a.toggleCustomWebsite=function(){a.customWebsiteDisplay=!a.customWebsiteDisplay,c.$broadcast("dataloaded")}}]).controller("EmailCtrl",["$scope","$http","$rootScope",function(a,b,c){c.loadWidget()}]).controller("EmailFeedCtrl",["$scope","$http","$rootScope",function(a,b,c){a.wasLoaded=!1;try{gapi.auth.init(function(){})}catch(d){}a.userEmailFeed=c.userEmailFeed||[],a.userHasEmailAccount=!0,a.providers=[{name:"Gmail",image:"gmail.gif",serverType:"GMAIL"}],c.checkEmailAccount=a.checkEmailAccount=function(){b.get("/REST/UserWidgetEmail/?m="+(new Date).getMilliseconds()).success(function(b){if(b.length>0)if(void 0!=b.username)switch(a.userHasEmailAccount=!0,a.$parent.widget.userHasEmailAccount=!0,c.serverType=b.serverType,b.serverType){case"GMAIL":a.$parent.widget.webmailUrl=a.webmailUrl="http://www.gmail.com/",gapi.auth.authorize({client_id:_googleConfig.clientId,scope:[_googleConfig.scopes.email,_googleConfig.scopes.feed],immediate:!0},a.handleGmailAuthResult);break;case"HOTMAIL":a.$parent.widget.webmailUrl=a.webmailUrl="http://www.outlook.com/";break;case"YAHOO":a.$parent.widget.webmailUrl=a.webmailUrl="http://mail.yahoo.com/"}else a.$parent.widget.webmailUrl="",a.$parent.widget.userHasEmailAccount=!1,a.userHasEmailAccount=!1,c.loadWidget();else a.userHasEmailAccount=!1,a.wasLoaded=!0,c.loadWidget()})},a.setServerType=function(a){c.serverType=a},a.handleGmailAuthResult=function(d){null!=d?d&&!d.error&&gapi.client.load("oauth2","v2",function(){var e=gapi.client.oauth2.userinfo.v2.me.get({fields:"email"});e.execute(function(e){var f={token:d.access_token,email:e.email};b.get("/rest/gmail",{params:f}).success(function(b){b?(a.userEmailFeed=c.userEmailFeed=b,c.$broadcast("dataloaded"),a.userHasEmailAccount=!0,a.wasLoaded=!0):a.userHasEmailAccount=!1})})}):(a.userHasEmailAccount=!1,a.wasLoaded=!0)},a.setEmailAccount=function(c){switch(a.account={username:"oauth",password:"",serverType:c},a.wasLoaded=!1,c){case"GMAIL":return gapi.auth.authorize({client_id:_googleConfig.clientId,scope:[_googleConfig.scopes.email,_googleConfig.scopes.feed],immediate:!1},a.handleGmailAuthResult),b.post("/REST/UserWidgetEmail/Save",a.account).success(function(b){b.status||(a.loginMessage=b.response)}),!1;case"HOTMAIL":a.wasLoaded=!0,alert("Account Yahoo");break;case"YAHOO":a.wasLoaded=!0,alert("Account Live")}},a.loadEmailFeed=function(){a.userEmailFeed=[],a.wasLoaded=!1,b.get("/REST/UserWidgetEmail/Feed?m="+(new Date).getMilliseconds()).success(function(b){null!=b&&(b.status?(a.userEmailFeed=c.userEmailFeed=$.parseJSON(b.response),c.$broadcast("dataloaded")):(a.userHasEmailAccount=!1,a.wasLoaded=!0))})},a.checkEmailAccount()}]).controller("EmailAccountCtrl",["$scope","$http","$rootScope",function(a,b,c){switch(a.canDeleted=!1,a.loginMessage="",a.account={username:"",password:"",serverType:c.serverType},c.serverType){case"GMAIL":a.provider="Gmail",a.provider_image="gmail.gif";break;case"HOTMAIL":a.provider="Live",a.provider_image="hotmail.gif";break;case"YAHOO":a.provider="Yahoo Mail",a.provider_image="yahoo.gif"}b.get("/REST/UserWidgetEmail/?m="+(new Date).getMilliseconds()).success(function(b){void 0!=b&&void 0!=b.username&&(a.canDeleted=!0,a.account=b)}).error(function(){}),a.login=function(){b.post("/REST/UserWidgetEmail/Save",a.account).success(function(b){b.status?(c.userEmailFeed=$.parseJSON(b.response),c.checkEmailAccount(),$.colorbox.close()):a.loginMessage=b.response})},a.delete=function(){b.post("/REST/UserWidgetEmail/Delete").success(function(b){b.status?(c.userEmailFeed=[],c.userHasEmailAccount=!1,c.checkEmailAccount(),$.colorbox.close()):a.loginMessage=b.response})}}]).controller("SuggestionCtrl",["$scope","$http","$rootScope",function(a,b,c){a.currentPage=0,a.limitSuggestions=5,a.suggestions=[];var d=[];"undefined"!=typeof Storage&&(void 0!=localStorage||"undefined"!=localStorage)&&void 0!=localStorage.remainingSuggestion&&(d=JSON.parse(localStorage.remainingSuggestion),localStorage.removeItem("remainingSuggestion")),a.suggestions=_page.suggestions,void 0!=d&&d.length>0&&(a.suggestions=d),c.$broadcast("dataloaded"),a.numberOfPages=function(){return Math.ceil(a.suggestions.length/a.limitSuggestions)},a.$on("removeSuggestion",function(){a.suggestions=_.without(a.suggestions,_.findWhere(a.suggestions,{Id:c.selectedSuggestionBoxId})),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click")}),a.setSelected=function(a){c.selectedSuggestionBoxId=a},c.reloadSuggestions=a.reloadSuggestions=function(){b.get("/REST/SuggestionBox").success(function(b){_page.suggestions=b,a.suggestions=_page.suggestions,c.$broadcast("dataloaded")})},a.ignore=function(c){a.suggestions=_.without(a.suggestions,c),c.register="",c.lastupdate="",c.deleted="",b.post("/REST/SuggestionBox/Ignore",c).success(function(){})}}]).controller("AddSuggestionCtrl",["$scope","$http","$rootScope",function(a,b,c){a.feedbackSuggestion={status:!1,msg:""},a.widgets=[],a.suggestionBoxWidgetId=0,a.suggestionBoxWidgetVisible=!1,a.suggestionBoxWidgetTitle="New Frame +",a.widgets.push({id:0,title:"<< New Frame >>"}),a.setSuggestionBoxWidgetId=function(b,c){a.suggestionBoxWidgetTitle=b?c:"New Frame +",a.suggestionBoxWidgetId=b,a.suggestionBoxWidgetVisible=!1};for(var d=0;d<c.widgets.length;d++)2==c.widgets[d].typeId&&a.widgets.push(c.widgets[d]);a.submit=function(){var d="/REST/UserWidgetBookmark/AddSuggestionBox/"+c.selectedSuggestionBoxId;a.clickSubmit=!1,a.feedbackSuggestion.status="success",a.feedbackSuggestion.msg="Sending data...",a.$broadcast("dataloaded");var e={id:a.suggestionBoxWidgetId,title:"Websites"};b.post(d,e).success(function(b){b.status?(a.$emit("removeSuggestion"),a.feedbackSuggestion.msg="OK",0===a.suggestionBoxWidgetId?c.addWidgetLast(b.response):($(".list-gridster .box-column").each(function(b,d){$(d).attr("data-widget")==a.suggestionBoxWidgetId&&null!=c.$gridster&&c.$gridster.remove_widget(d)}),LoadBehaviorCaller["dataload-"+a.suggestionBoxWidgetId]=void 0,_page.userWidgetBookmark["items_"+a.suggestionBoxWidgetId]=void 0,c.attWidget(a.suggestionBoxWidgetId,b.response),c.loadDragWidgets(a.suggestionBoxWidgetId)),"undefined"!=typeof Storage&&void 0!=localStorage&&localStorage.setItem("remainingSuggestion",JSON.stringify(a.suggestions)),a.$broadcast("closeColorbox"),$("#closeModal").trigger("click"),location.reload()):(a.feedbackSuggestion=!1,a.feedbackSuggestion.msg=b.response)}).error(function(b){a.feedbackSuggestion=!1,a.feedbackSuggestion.msg=b.response})}}]).controller("ChatCtrl",["$scope","$http","$rootScope","xsocket",function(a){a.users=[]}]).controller("AddAsHomePageCtrl",["$timeout","$scope",function(a,b){b.browser,$.browser.chrome=$.browser.webkit&&!!window.chrome,$.browser.safari=$.browser.webkit&&!window.chrome,b.homepageImgWidth=0,$.browser.mozilla?b.browser="mozilla":$.browser.chrome?b.browser="chrome":$.browser.safari?b.browser="safari":$.browser.msie&&(b.browser="msie"),b.activeHPageQs=[],b.currentHPageTab="AddAsHome.tpl.html",b.isOpenHPageQ=function(a){return b.activeHPageQs.indexOf(a)>-1?(b.homepageImgWidth=60*(($(".accord_container").width()-20)/2)/100,!0):!1},b.openHPageQ=function(c){b.isOpenHPageQ(c)?(b.activeHPageQs.splice(b.activeHPageQs.indexOf(c),1),a(function(){$.colorbox.resize({height:$(".hold-modal").height()+50})},200)):(b.activeHPageQs.push(c),a(function(){$.colorbox.resize({height:$(".hold-modal").height()+50})},200))},b.$broadcast("dataloaded")}]).controller("FAQsCtrl",["$timeout","$scope",function(a,b){b.activeQs=[],b.faqImgWidth=0,b.tabs=[{title:"Registration",url:"Registration.tpl.html"},{title:"Frames",url:"Frames.tpl.html"},{title:"Misc",url:"Misc.tpl.html"}],b.currentTab="Registration.tpl.html",b.onClickTab=function(c){b.activeQs=[],b.currentTab=c.url,a(function(){$.colorbox.resize({height:$(".hold-modal").height()+90})},200)},b.isActiveTab=function(a){return b.faqImgWidth=60*(($(".accordion_container").width()-20)/2)/100,a==b.currentTab},b.isOpenQ=function(a){return b.activeQs.indexOf(a)>-1?!0:!1},b.openQ=function(c){b.isOpenQ(c)?(b.activeQs.splice(b.activeQs.indexOf(c),1),a(function(){$.colorbox.resize({height:$(".hold-modal").height()+90})},200)):(b.activeQs.push(c),a(function(){$.colorbox.resize({height:$(".hold-modal").height()+90})},200))}}]).controller("WelcomeModal",["$scope",function(){}]),angular.module("App.filters",[]).filter("interpolate",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}).filter("pubdate",function(){return function(a){var b=new Date(Date(a));return b.toISOString()}}).filter("formatDate",function(){return function(a){return moment(a).format("MM/D/YYYY - hh:mm a")}}).filter("numberForString",function(){return function(a){switch(a){case 1:return"one";case 2:return"two";case 3:return"three"}}}).filter("categoryWidget",function(){return function(a){switch(a){case 1:return"Feed";case 2:return"Bookmark"}}}).filter("sizeLightbox",function(){return function(a){switch(a){case 1:return"80%";case 2:return"60%";default:return"80%"}}}).filter("linkService",function(){return function(a){switch(a){case 1:return"/Templates/MoreFeed.html";case 2:return"/Templates/MoreMyWebsite.html"}}}).filter("countCheckeds",function(){return function(a){var b=0;return angular.forEach(a,function(a){a.chk&&b++}),b}}).filter("escape",function(){return window.escape}).filter("startFrom",function(){return function(a,b){b=+b;
try{return a.slice(b)}catch(c){return null}}}),angular.module("App.animate",[]).animation("animateSliderLeft",function(){return{setup:function(a){a.width(0)},start:function(a){a.animate({width:"auto"},500)}}}),WL.init({client_id:_authConfig.live.client_id,redirect_uri:window.location.origin+_authConfig.live.redirect_url,scope:["wl.signin","wl.basic","wl.emails","wl.contacts_emails"],response_type:"code"});var App=angular.module("App",["XSockets","ngRoute","ngAnimate","App.controllers","App.filters","App.services","App.directives","angular-underscore"]).run(["$rootScope",function(a){a.now=new Date,"string"!=typeof _userName&&"string"!=typeof _userEmail||"sandbox"!=_currentEnvironment||(Candy.init(_chatCoreUrl,{core:{debug:!1,autojoin:[_chatRoom]},view:{resources:"/Img/Default/"}}),Candy.Core.connect(_chatUrl,null,_userName||_userEmail.split("@")[0]))}]).config(function(a,b){a.when("/",{}).otherwise({redirectTo:"/"}),b.html5Mode(!1)});